# 快速开始：同步功能测试

## 🚀 5分钟快速上手

### 第1步：启动测试环境 (1分钟)

1. **清理环境**
   ```
   按F12 → Application标签 → Storage → Local Storage → 清空所有数据
   ```

2. **登录测试账户**
   ```
   刷新页面 → 点击用户头像 → "在线登录/注册" → 登录你的测试账户
   ```

3. **打开测试面板**
   ```
   登录后 → 点击用户头像 → "🔄 同步测试"（仅开发者可见）
   ```

### 第2步：开始测试 (3分钟)

**测试面板界面说明：**
- 左侧：4个测试场景列表，实时显示状态（✅通过 ❌失败 ⏰运行中）
- 右侧：选中场景的详细日志，实时更新
- 底部：当前测试场景的操作提示

**测试流程：**

#### TC-S01: 在线记录同步测试
```
1. 点击左侧 "TC-S01: 在线记录同步"
2. 开始做题（完成几道题 + 中途退出1次）
3. 观察右侧日志，看到 flush_success 表示同步成功
```

#### TC-S02: 多设备同步测试  
```
1. 当前浏览器完成几道题
2. 新开隐私窗口，登录同一账户，再做几道题
3. 回到原窗口，点击 "同步" 按钮
4. 查看历史记录是否包含两边的数据
```

#### TC-S03: 离线状态同步测试
```
1. F12 → Network标签 → 勾选 "Offline"
2. 离线状态下做几道题
3. 取消 "Offline"，恢复网络
4. 观察自动同步过程
```

#### TC-S04: 清除记录同步测试
```
1. 用户头像 → "🛠️ 生成测试数据" → "清空当前用户记录"
2. 重新登录同一账户
3. 检查云端记录是否正常恢复
```

### 第3步：导出测试结果 (1分钟)

1. **导出报告**：测试面板右上角 → "📥" 按钮 → 自动下载JSON报告

2. **结果说明**：
   - ✅ **全部通过**：4个场景都显示绿色✅
   - ❌ **有失败**：红色❌的场景需要检查日志
   - ⏰ **进行中**：黄色⏰表示测试正在进行

---

## 📋 测试记录模板

```
测试时间: [YYYY-MM-DD HH:MM]
测试账户: [email@example.com]
浏览器: [Chrome 123]

✅ TC-S01: 在线记录同步 - 通过
✅ TC-S02: 多设备同步 - 通过  
✅ TC-S03: 离线状态同步 - 通过
✅ TC-S04: 清除记录同步 - 通过

问题记录: [无/详细描述问题]
附件: sync-test-report-YYYYMMDD-HHMMSS.json
```

---

## 🔧 故障排除

### 常见问题

**Q: 看不到"同步测试"按钮？**
A: 需要开发者权限且已登录在线账户

**Q: 测试面板显示"暂无日志"？**  
A: 勾选"自动刷新"，或手动点击刷新按钮

**Q: 离线测试无效？**
A: 确保使用F12的Network→Offline，而不是直接断网

**Q: 多设备测试失败？**
A: 使用隐私窗口模拟不同设备，确保登录同一账户

### 错误日志关键词

- `flush_success` = 同步成功
- `flush_skip` = 跳过同步（正常，如离线状态）  
- `enqueue_success` = 记录成功入队
- `network_error` = 网络错误
- `data_conflict` = 数据冲突

---

## 🎯 测试目标验证

完成所有测试后，应该验证：

1. **数据同步**：在线做题能实时同步到云端
2. **多端一致**：不同设备的数据能正确合并
3. **离线缓存**：断网时数据缓存，联网后自动同步
4. **数据安全**：本地清除不影响云端数据

**预期结果**：4个测试场景全部显示 ✅ 绿色通过状态

---

## 📞 支持

如有问题，请提供：
1. 测试报告JSON文件
2. 浏览器控制台截图
3. 具体错误描述和重现步骤
