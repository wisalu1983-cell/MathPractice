<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elementary Math Practice Website</title>
    <link rel="icon" type="image/png" href="./pwa-192x192-Iz4vps3r.png" />
    <link rel="manifest" href="./manifest.webmanifest" />
    <meta name="theme-color" content="#3b82f6" />
    <script>
      // 处理file://协议下的PWA功能
      if (location.protocol === 'file:') {
        document.addEventListener('DOMContentLoaded', function() {
          // 移除manifest链接以避免CORS错误
          const manifestLinks = document.querySelectorAll('link[rel="manifest"]');
          manifestLinks.forEach(link => link.remove());
          console.log('PWA features disabled for local file access. Use a local server (npm run preview) for full PWA features.');
        });
      } else {
        // 非file://协议下注册Service Worker
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js', { scope: './' })
              .then(registration => {
                console.log('ServiceWorker registration successful');
              })
              .catch(err => {
                console.log('ServiceWorker registration failed:', err);
              });
          });
        }
      }
    </script>
    <script type="module" crossorigin>var Hf=Object.defineProperty;var qf=(t,e,r)=>e in t?Hf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var at=(t,e,r)=>qf(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Yu={exports:{}},Uo={},Xu={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps=Symbol.for("react.element"),Kf=Symbol.for("react.portal"),Jf=Symbol.for("react.fragment"),Gf=Symbol.for("react.strict_mode"),Qf=Symbol.for("react.profiler"),Yf=Symbol.for("react.provider"),Xf=Symbol.for("react.context"),Zf=Symbol.for("react.forward_ref"),ep=Symbol.for("react.suspense"),tp=Symbol.for("react.memo"),rp=Symbol.for("react.lazy"),hc=Symbol.iterator;function np(t){return t===null||typeof t!="object"?null:(t=hc&&t[hc]||t["@@iterator"],typeof t=="function"?t:null)}var Zu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ed=Object.assign,td={};function vn(t,e,r){this.props=t,this.context=e,this.refs=td,this.updater=r||Zu}vn.prototype.isReactComponent={};vn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rd(){}rd.prototype=vn.prototype;function ua(t,e,r){this.props=t,this.context=e,this.refs=td,this.updater=r||Zu}var da=ua.prototype=new rd;da.constructor=ua;ed(da,vn.prototype);da.isPureReactComponent=!0;var fc=Array.isArray,nd=Object.prototype.hasOwnProperty,ha={current:null},sd={key:!0,ref:!0,__self:!0,__source:!0};function od(t,e,r){var n,s={},o=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)nd.call(e,n)&&!sd.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ps,type:t,key:o,ref:i,props:s,_owner:ha.current}}function sp(t,e){return{$$typeof:ps,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fa(t){return typeof t=="object"&&t!==null&&t.$$typeof===ps}function op(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var pc=/\/+/g;function pi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?op(""+t.key):e.toString(36)}function Qs(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case ps:case Kf:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+pi(i,0):n,fc(s)?(r="",t!=null&&(r=t.replace(pc,"$&/")+"/"),Qs(s,e,r,"",function(d){return d})):s!=null&&(fa(s)&&(s=sp(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(pc,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",fc(t))for(var l=0;l<t.length;l++){o=t[l];var c=n+pi(o,l);i+=Qs(o,e,r,c,s)}else if(c=np(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=n+pi(o,l++),i+=Qs(o,e,r,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function js(t,e,r){if(t==null)return t;var n=[],s=0;return Qs(t,n,"","",function(o){return e.call(r,o,s++)}),n}function ip(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var De={current:null},Ys={transition:null},lp={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:Ys,ReactCurrentOwner:ha};function id(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:js,forEach:function(t,e,r){js(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return js(t,function(){e++}),e},toArray:function(t){return js(t,function(e){return e})||[]},only:function(t){if(!fa(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=vn;G.Fragment=Jf;G.Profiler=Qf;G.PureComponent=ua;G.StrictMode=Gf;G.Suspense=ep;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lp;G.act=id;G.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=ed({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=ha.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)nd.call(e,c)&&!sd.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:ps,type:t.type,key:s,ref:o,props:n,_owner:i}};G.createContext=function(t){return t={$$typeof:Xf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Yf,_context:t},t.Consumer=t};G.createElement=od;G.createFactory=function(t){var e=od.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:Zf,render:t}};G.isValidElement=fa;G.lazy=function(t){return{$$typeof:rp,_payload:{_status:-1,_result:t},_init:ip}};G.memo=function(t,e){return{$$typeof:tp,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=Ys.transition;Ys.transition={};try{t()}finally{Ys.transition=e}};G.unstable_act=id;G.useCallback=function(t,e){return De.current.useCallback(t,e)};G.useContext=function(t){return De.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return De.current.useDeferredValue(t)};G.useEffect=function(t,e){return De.current.useEffect(t,e)};G.useId=function(){return De.current.useId()};G.useImperativeHandle=function(t,e,r){return De.current.useImperativeHandle(t,e,r)};G.useInsertionEffect=function(t,e){return De.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return De.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return De.current.useMemo(t,e)};G.useReducer=function(t,e,r){return De.current.useReducer(t,e,r)};G.useRef=function(t){return De.current.useRef(t)};G.useState=function(t){return De.current.useState(t)};G.useSyncExternalStore=function(t,e,r){return De.current.useSyncExternalStore(t,e,r)};G.useTransition=function(){return De.current.useTransition()};G.version="18.3.1";Xu.exports=G;var $=Xu.exports;const ld=Wf($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap=$,cp=Symbol.for("react.element"),up=Symbol.for("react.fragment"),dp=Object.prototype.hasOwnProperty,hp=ap.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fp={key:!0,ref:!0,__self:!0,__source:!0};function ad(t,e,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)dp.call(e,n)&&!fp.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:cp,type:t,key:o,ref:i,props:s,_owner:hp.current}}Uo.Fragment=up;Uo.jsx=ad;Uo.jsxs=ad;Yu.exports=Uo;var a=Yu.exports,cd={exports:{}},Je={},ud={exports:{}},dd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,U){var H=O.length;O.push(U);e:for(;0<H;){var te=H-1>>>1,z=O[te];if(0<s(z,U))O[te]=U,O[H]=z,H=te;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var U=O[0],H=O.pop();if(H!==U){O[0]=H;e:for(var te=0,z=O.length,we=z>>>1;te<we;){var Qe=2*(te+1)-1,Ut=O[Qe],it=Qe+1,Ye=O[it];if(0>s(Ut,H))it<z&&0>s(Ye,Ut)?(O[te]=Ye,O[it]=H,te=it):(O[te]=Ut,O[Qe]=H,te=Qe);else if(it<z&&0>s(Ye,H))O[te]=Ye,O[it]=H,te=it;else break e}}return U}function s(O,U){var H=O.sortIndex-U.sortIndex;return H!==0?H:O.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,f=null,p=3,w=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(O){for(var U=r(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=O)n(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=r(d)}}function x(O){if(v=!1,m(O),!g)if(r(c)!==null)g=!0,he(k);else{var U=r(d);U!==null&&oe(x,U.startTime-O)}}function k(O,U){g=!1,v&&(v=!1,y(C),C=-1),w=!0;var H=p;try{for(m(U),f=r(c);f!==null&&(!(f.expirationTime>U)||O&&!T());){var te=f.callback;if(typeof te=="function"){f.callback=null,p=f.priorityLevel;var z=te(f.expirationTime<=U);U=t.unstable_now(),typeof z=="function"?f.callback=z:f===r(c)&&n(c),m(U)}else n(c);f=r(c)}if(f!==null)var we=!0;else{var Qe=r(d);Qe!==null&&oe(x,Qe.startTime-U),we=!1}return we}finally{f=null,p=H,w=!1}}var b=!1,S=null,C=-1,R=5,D=-1;function T(){return!(t.unstable_now()-D<R)}function E(){if(S!==null){var O=t.unstable_now();D=O;var U=!0;try{U=S(!0,O)}finally{U?B():(b=!1,S=null)}}else b=!1}var B;if(typeof h=="function")B=function(){h(E)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,re=I.port2;I.port1.onmessage=E,B=function(){re.postMessage(null)}}else B=function(){_(E,0)};function he(O){S=O,b||(b=!0,B())}function oe(O,U){C=_(function(){O(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){g||w||(g=!0,he(k))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var H=p;p=U;try{return O()}finally{p=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var H=p;p=O;try{return U()}finally{p=H}},t.unstable_scheduleCallback=function(O,U,H){var te=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?te+H:te):H=te,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=H+z,O={id:u++,callback:U,priorityLevel:O,startTime:H,expirationTime:z,sortIndex:-1},H>te?(O.sortIndex=H,e(d,O),r(c)===null&&O===r(d)&&(v?(y(C),C=-1):v=!0,oe(x,H-te))):(O.sortIndex=z,e(c,O),g||w||(g=!0,he(k))),O},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(O){var U=p;return function(){var H=p;p=U;try{return O.apply(this,arguments)}finally{p=H}}}})(dd);ud.exports=dd;var pp=ud.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp=$,Ke=pp;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hd=new Set,Qn={};function Rr(t,e){un(t,e),un(t+"Capture",e)}function un(t,e){for(Qn[t]=e,t=0;t<e.length;t++)hd.add(e[t])}var Dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yi=Object.prototype.hasOwnProperty,gp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mc={},gc={};function yp(t){return Yi.call(gc,t)?!0:Yi.call(mc,t)?!1:gp.test(t)?gc[t]=!0:(mc[t]=!0,!1)}function vp(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wp(t,e,r,n){if(e===null||typeof e>"u"||vp(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Oe(t,e,r,n,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){je[t]=new Oe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];je[e]=new Oe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){je[t]=new Oe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){je[t]=new Oe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){je[t]=new Oe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){je[t]=new Oe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){je[t]=new Oe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){je[t]=new Oe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){je[t]=new Oe(t,5,!1,t.toLowerCase(),null,!1,!1)});var pa=/[\-:]([a-z])/g;function ma(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pa,ma);je[e]=new Oe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pa,ma);je[e]=new Oe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pa,ma);je[e]=new Oe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){je[t]=new Oe(t,1,!1,t.toLowerCase(),null,!1,!1)});je.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){je[t]=new Oe(t,1,!1,t.toLowerCase(),null,!0,!0)});function ga(t,e,r,n){var s=je.hasOwnProperty(e)?je[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wp(e,r,s,n)&&(r=null),n||s===null?yp(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var It=mp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ns=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),Vr=Symbol.for("react.fragment"),ya=Symbol.for("react.strict_mode"),Xi=Symbol.for("react.profiler"),fd=Symbol.for("react.provider"),pd=Symbol.for("react.context"),va=Symbol.for("react.forward_ref"),Zi=Symbol.for("react.suspense"),el=Symbol.for("react.suspense_list"),wa=Symbol.for("react.memo"),Wt=Symbol.for("react.lazy"),md=Symbol.for("react.offscreen"),yc=Symbol.iterator;function kn(t){return t===null||typeof t!="object"?null:(t=yc&&t[yc]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,mi;function Pn(t){if(mi===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);mi=e&&e[1]||""}return`
`+mi+t}var gi=!1;function yi(t,e){if(!t||gi)return"";gi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{gi=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Pn(t):""}function xp(t){switch(t.tag){case 5:return Pn(t.type);case 16:return Pn("Lazy");case 13:return Pn("Suspense");case 19:return Pn("SuspenseList");case 0:case 2:case 15:return t=yi(t.type,!1),t;case 11:return t=yi(t.type.render,!1),t;case 1:return t=yi(t.type,!0),t;default:return""}}function tl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vr:return"Fragment";case Wr:return"Portal";case Xi:return"Profiler";case ya:return"StrictMode";case Zi:return"Suspense";case el:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pd:return(t.displayName||"Context")+".Consumer";case fd:return(t._context.displayName||"Context")+".Provider";case va:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wa:return e=t.displayName||null,e!==null?e:tl(t.type)||"Memo";case Wt:e=t._payload,t=t._init;try{return tl(t(e))}catch{}}return null}function _p(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tl(e);case 8:return e===ya?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bp(t){var e=gd(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cs(t){t._valueTracker||(t._valueTracker=bp(t))}function yd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=gd(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function co(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rl(t,e){var r=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function vc(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ar(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vd(t,e){e=e.checked,e!=null&&ga(t,"checked",e,!1)}function nl(t,e){vd(t,e);var r=ar(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sl(t,e.type,r):e.hasOwnProperty("defaultValue")&&sl(t,e.type,ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wc(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function sl(t,e,r){(e!=="number"||co(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var An=Array.isArray;function nn(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ar(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ol(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xc(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(P(92));if(An(r)){if(1<r.length)throw Error(P(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ar(r)}}function wd(t,e){var r=ar(e.value),n=ar(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function _c(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function il(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $s,_d=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($s=$s||document.createElement("div"),$s.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$s.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kp=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(t){kp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),In[e]=In[t]})});function bd(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||In.hasOwnProperty(t)&&In[t]?(""+e).trim():e+"px"}function kd(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=bd(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Sp=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ll(t,e){if(e){if(Sp[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function al(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cl=null;function xa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ul=null,sn=null,on=null;function bc(t){if(t=ys(t)){if(typeof ul!="function")throw Error(P(280));var e=t.stateNode;e&&(e=qo(e),ul(t.stateNode,t.type,e))}}function Sd(t){sn?on?on.push(t):on=[t]:sn=t}function jd(){if(sn){var t=sn,e=on;if(on=sn=null,bc(t),e)for(t=0;t<e.length;t++)bc(e[t])}}function Nd(t,e){return t(e)}function Cd(){}var vi=!1;function $d(t,e,r){if(vi)return t(e,r);vi=!0;try{return Nd(t,e,r)}finally{vi=!1,(sn!==null||on!==null)&&(Cd(),jd())}}function Xn(t,e){var r=t.stateNode;if(r===null)return null;var n=qo(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(P(231,e,typeof r));return r}var dl=!1;if(Dt)try{var Sn={};Object.defineProperty(Sn,"passive",{get:function(){dl=!0}}),window.addEventListener("test",Sn,Sn),window.removeEventListener("test",Sn,Sn)}catch{dl=!1}function jp(t,e,r,n,s,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var Un=!1,uo=null,ho=!1,hl=null,Np={onError:function(t){Un=!0,uo=t}};function Cp(t,e,r,n,s,o,i,l,c){Un=!1,uo=null,jp.apply(Np,arguments)}function $p(t,e,r,n,s,o,i,l,c){if(Cp.apply(this,arguments),Un){if(Un){var d=uo;Un=!1,uo=null}else throw Error(P(198));ho||(ho=!0,hl=d)}}function Pr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Ed(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kc(t){if(Pr(t)!==t)throw Error(P(188))}function Ep(t){var e=t.alternate;if(!e){if(e=Pr(t),e===null)throw Error(P(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return kc(s),t;if(o===n)return kc(s),e;o=o.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=o;break}if(l===n){i=!0,n=s,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=s;break}if(l===n){i=!0,n=o,r=s;break}l=l.sibling}if(!i)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?t:e}function Td(t){return t=Ep(t),t!==null?Rd(t):null}function Rd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Rd(t);if(e!==null)return e;t=t.sibling}return null}var Pd=Ke.unstable_scheduleCallback,Sc=Ke.unstable_cancelCallback,Tp=Ke.unstable_shouldYield,Rp=Ke.unstable_requestPaint,pe=Ke.unstable_now,Pp=Ke.unstable_getCurrentPriorityLevel,_a=Ke.unstable_ImmediatePriority,Ad=Ke.unstable_UserBlockingPriority,fo=Ke.unstable_NormalPriority,Ap=Ke.unstable_LowPriority,Dd=Ke.unstable_IdlePriority,zo=null,St=null;function Dp(t){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(zo,t,void 0,(t.current.flags&128)===128)}catch{}}var mt=Math.clz32?Math.clz32:Lp,Op=Math.log,Mp=Math.LN2;function Lp(t){return t>>>=0,t===0?32:31-(Op(t)/Mp|0)|0}var Es=64,Ts=4194304;function Dn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function po(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,o=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=Dn(l):(o&=i,o!==0&&(n=Dn(o)))}else i=r&~s,i!==0?n=Dn(i):o!==0&&(n=Dn(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-mt(e),s=1<<r,n|=t[r],e&=~s;return n}function Ip(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Up(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-mt(o),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=Ip(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function fl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Od(){var t=Es;return Es<<=1,!(Es&4194240)&&(Es=64),t}function wi(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ms(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mt(e),t[e]=r}function zp(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-mt(r),o=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~o}}function ba(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-mt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var ee=0;function Md(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ld,ka,Id,Ud,zd,pl=!1,Rs=[],Zt=null,er=null,tr=null,Zn=new Map,es=new Map,Kt=[],Fp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jc(t,e){switch(t){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Zn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(e.pointerId)}}function jn(t,e,r,n,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},e!==null&&(e=ys(e),e!==null&&ka(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Bp(t,e,r,n,s){switch(e){case"focusin":return Zt=jn(Zt,t,e,r,n,s),!0;case"dragenter":return er=jn(er,t,e,r,n,s),!0;case"mouseover":return tr=jn(tr,t,e,r,n,s),!0;case"pointerover":var o=s.pointerId;return Zn.set(o,jn(Zn.get(o)||null,t,e,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,es.set(o,jn(es.get(o)||null,t,e,r,n,s)),!0}return!1}function Fd(t){var e=_r(t.target);if(e!==null){var r=Pr(e);if(r!==null){if(e=r.tag,e===13){if(e=Ed(r),e!==null){t.blockedOn=e,zd(t.priority,function(){Id(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=ml(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);cl=n,r.target.dispatchEvent(n),cl=null}else return e=ys(r),e!==null&&ka(e),t.blockedOn=r,!1;e.shift()}return!0}function Nc(t,e,r){Xs(t)&&r.delete(e)}function Hp(){pl=!1,Zt!==null&&Xs(Zt)&&(Zt=null),er!==null&&Xs(er)&&(er=null),tr!==null&&Xs(tr)&&(tr=null),Zn.forEach(Nc),es.forEach(Nc)}function Nn(t,e){t.blockedOn===e&&(t.blockedOn=null,pl||(pl=!0,Ke.unstable_scheduleCallback(Ke.unstable_NormalPriority,Hp)))}function ts(t){function e(s){return Nn(s,t)}if(0<Rs.length){Nn(Rs[0],t);for(var r=1;r<Rs.length;r++){var n=Rs[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Zt!==null&&Nn(Zt,t),er!==null&&Nn(er,t),tr!==null&&Nn(tr,t),Zn.forEach(e),es.forEach(e),r=0;r<Kt.length;r++)n=Kt[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Kt.length&&(r=Kt[0],r.blockedOn===null);)Fd(r),r.blockedOn===null&&Kt.shift()}var ln=It.ReactCurrentBatchConfig,mo=!0;function qp(t,e,r,n){var s=ee,o=ln.transition;ln.transition=null;try{ee=1,Sa(t,e,r,n)}finally{ee=s,ln.transition=o}}function Wp(t,e,r,n){var s=ee,o=ln.transition;ln.transition=null;try{ee=4,Sa(t,e,r,n)}finally{ee=s,ln.transition=o}}function Sa(t,e,r,n){if(mo){var s=ml(t,e,r,n);if(s===null)Ei(t,e,n,go,r),jc(t,n);else if(Bp(s,t,e,r,n))n.stopPropagation();else if(jc(t,n),e&4&&-1<Fp.indexOf(t)){for(;s!==null;){var o=ys(s);if(o!==null&&Ld(o),o=ml(t,e,r,n),o===null&&Ei(t,e,n,go,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Ei(t,e,n,null,r)}}var go=null;function ml(t,e,r,n){if(go=null,t=xa(n),t=_r(t),t!==null)if(e=Pr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Ed(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return go=t,null}function Bd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pp()){case _a:return 1;case Ad:return 4;case fo:case Ap:return 16;case Dd:return 536870912;default:return 16}default:return 16}}var Qt=null,ja=null,Zs=null;function Hd(){if(Zs)return Zs;var t,e=ja,r=e.length,n,s="value"in Qt?Qt.value:Qt.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[o-n];n++);return Zs=s.slice(t,1<n?1-n:void 0)}function eo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ps(){return!0}function Cc(){return!1}function Ge(t){function e(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ps:Cc,this.isPropagationStopped=Cc,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),e}var wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Ge(wn),gs=de({},wn,{view:0,detail:0}),Vp=Ge(gs),xi,_i,Cn,Fo=de({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cn&&(Cn&&t.type==="mousemove"?(xi=t.screenX-Cn.screenX,_i=t.screenY-Cn.screenY):_i=xi=0,Cn=t),xi)},movementY:function(t){return"movementY"in t?t.movementY:_i}}),$c=Ge(Fo),Kp=de({},Fo,{dataTransfer:0}),Jp=Ge(Kp),Gp=de({},gs,{relatedTarget:0}),bi=Ge(Gp),Qp=de({},wn,{animationName:0,elapsedTime:0,pseudoElement:0}),Yp=Ge(Qp),Xp=de({},wn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zp=Ge(Xp),em=de({},wn,{data:0}),Ec=Ge(em),tm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nm[t])?!!e[t]:!1}function Ca(){return sm}var om=de({},gs,{key:function(t){if(t.key){var e=tm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=eo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(t){return t.type==="keypress"?eo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?eo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),im=Ge(om),lm=de({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tc=Ge(lm),am=de({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),cm=Ge(am),um=de({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),dm=Ge(um),hm=de({},Fo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fm=Ge(hm),pm=[9,13,27,32],$a=Dt&&"CompositionEvent"in window,zn=null;Dt&&"documentMode"in document&&(zn=document.documentMode);var mm=Dt&&"TextEvent"in window&&!zn,qd=Dt&&(!$a||zn&&8<zn&&11>=zn),Rc=" ",Pc=!1;function Wd(t,e){switch(t){case"keyup":return pm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kr=!1;function gm(t,e){switch(t){case"compositionend":return Vd(e);case"keypress":return e.which!==32?null:(Pc=!0,Rc);case"textInput":return t=e.data,t===Rc&&Pc?null:t;default:return null}}function ym(t,e){if(Kr)return t==="compositionend"||!$a&&Wd(t,e)?(t=Hd(),Zs=ja=Qt=null,Kr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qd&&e.locale!=="ko"?null:e.data;default:return null}}var vm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ac(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vm[t.type]:e==="textarea"}function Kd(t,e,r,n){Sd(n),e=yo(e,"onChange"),0<e.length&&(r=new Na("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Fn=null,rs=null;function wm(t){sh(t,0)}function Bo(t){var e=Qr(t);if(yd(e))return t}function xm(t,e){if(t==="change")return e}var Jd=!1;if(Dt){var ki;if(Dt){var Si="oninput"in document;if(!Si){var Dc=document.createElement("div");Dc.setAttribute("oninput","return;"),Si=typeof Dc.oninput=="function"}ki=Si}else ki=!1;Jd=ki&&(!document.documentMode||9<document.documentMode)}function Oc(){Fn&&(Fn.detachEvent("onpropertychange",Gd),rs=Fn=null)}function Gd(t){if(t.propertyName==="value"&&Bo(rs)){var e=[];Kd(e,rs,t,xa(t)),$d(wm,e)}}function _m(t,e,r){t==="focusin"?(Oc(),Fn=e,rs=r,Fn.attachEvent("onpropertychange",Gd)):t==="focusout"&&Oc()}function bm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bo(rs)}function km(t,e){if(t==="click")return Bo(e)}function Sm(t,e){if(t==="input"||t==="change")return Bo(e)}function jm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yt=typeof Object.is=="function"?Object.is:jm;function ns(t,e){if(yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Yi.call(e,s)||!yt(t[s],e[s]))return!1}return!0}function Mc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lc(t,e){var r=Mc(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mc(r)}}function Qd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yd(){for(var t=window,e=co();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=co(t.document)}return e}function Ea(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Nm(t){var e=Yd(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Qd(r.ownerDocument.documentElement,r)){if(n!==null&&Ea(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!t.extend&&o>n&&(s=n,n=o,o=s),s=Lc(r,o);var i=Lc(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Cm=Dt&&"documentMode"in document&&11>=document.documentMode,Jr=null,gl=null,Bn=null,yl=!1;function Ic(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yl||Jr==null||Jr!==co(n)||(n=Jr,"selectionStart"in n&&Ea(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Bn&&ns(Bn,n)||(Bn=n,n=yo(gl,"onSelect"),0<n.length&&(e=new Na("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Jr)))}function As(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Gr={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionend:As("Transition","TransitionEnd")},ji={},Xd={};Dt&&(Xd=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function Ho(t){if(ji[t])return ji[t];if(!Gr[t])return t;var e=Gr[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Xd)return ji[t]=e[r];return t}var Zd=Ho("animationend"),eh=Ho("animationiteration"),th=Ho("animationstart"),rh=Ho("transitionend"),nh=new Map,Uc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){nh.set(t,e),Rr(e,[t])}for(var Ni=0;Ni<Uc.length;Ni++){var Ci=Uc[Ni],$m=Ci.toLowerCase(),Em=Ci[0].toUpperCase()+Ci.slice(1);ur($m,"on"+Em)}ur(Zd,"onAnimationEnd");ur(eh,"onAnimationIteration");ur(th,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(rh,"onTransitionEnd");un("onMouseEnter",["mouseout","mouseover"]);un("onMouseLeave",["mouseout","mouseover"]);un("onPointerEnter",["pointerout","pointerover"]);un("onPointerLeave",["pointerout","pointerover"]);Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function zc(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,$p(n,e,void 0,t),t.currentTarget=null}function sh(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;zc(s,l,d),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;zc(s,l,d),o=c}}}if(ho)throw t=hl,ho=!1,hl=null,t}function ie(t,e){var r=e[bl];r===void 0&&(r=e[bl]=new Set);var n=t+"__bubble";r.has(n)||(oh(e,t,2,!1),r.add(n))}function $i(t,e,r){var n=0;e&&(n|=4),oh(r,t,n,e)}var Ds="_reactListening"+Math.random().toString(36).slice(2);function ss(t){if(!t[Ds]){t[Ds]=!0,hd.forEach(function(r){r!=="selectionchange"&&(Tm.has(r)||$i(r,!1,t),$i(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ds]||(e[Ds]=!0,$i("selectionchange",!1,e))}}function oh(t,e,r,n){switch(Bd(e)){case 1:var s=qp;break;case 4:s=Wp;break;default:s=Sa}r=s.bind(null,e,r,t),s=void 0,!dl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Ei(t,e,r,n,s){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=_r(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}$d(function(){var d=o,u=xa(r),f=[];e:{var p=nh.get(t);if(p!==void 0){var w=Na,g=t;switch(t){case"keypress":if(eo(r)===0)break e;case"keydown":case"keyup":w=im;break;case"focusin":g="focus",w=bi;break;case"focusout":g="blur",w=bi;break;case"beforeblur":case"afterblur":w=bi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=$c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Jp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=cm;break;case Zd:case eh:case th:w=Yp;break;case rh:w=dm;break;case"scroll":w=Vp;break;case"wheel":w=fm;break;case"copy":case"cut":case"paste":w=Zp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Tc}var v=(e&4)!==0,_=!v&&t==="scroll",y=v?p!==null?p+"Capture":null:p;v=[];for(var h=d,m;h!==null;){m=h;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,y!==null&&(x=Xn(h,y),x!=null&&v.push(os(h,x,m)))),_)break;h=h.return}0<v.length&&(p=new w(p,g,null,r,u),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",p&&r!==cl&&(g=r.relatedTarget||r.fromElement)&&(_r(g)||g[Ot]))break e;if((w||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,w?(g=r.relatedTarget||r.toElement,w=d,g=g?_r(g):null,g!==null&&(_=Pr(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(w=null,g=d),w!==g)){if(v=$c,x="onMouseLeave",y="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(v=Tc,x="onPointerLeave",y="onPointerEnter",h="pointer"),_=w==null?p:Qr(w),m=g==null?p:Qr(g),p=new v(x,h+"leave",w,r,u),p.target=_,p.relatedTarget=m,x=null,_r(u)===d&&(v=new v(y,h+"enter",g,r,u),v.target=m,v.relatedTarget=_,x=v),_=x,w&&g)t:{for(v=w,y=g,h=0,m=v;m;m=Mr(m))h++;for(m=0,x=y;x;x=Mr(x))m++;for(;0<h-m;)v=Mr(v),h--;for(;0<m-h;)y=Mr(y),m--;for(;h--;){if(v===y||y!==null&&v===y.alternate)break t;v=Mr(v),y=Mr(y)}v=null}else v=null;w!==null&&Fc(f,p,w,v,!1),g!==null&&_!==null&&Fc(f,_,g,v,!0)}}e:{if(p=d?Qr(d):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var k=xm;else if(Ac(p))if(Jd)k=Sm;else{k=bm;var b=_m}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=km);if(k&&(k=k(t,d))){Kd(f,k,r,u);break e}b&&b(t,p,d),t==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&sl(p,"number",p.value)}switch(b=d?Qr(d):window,t){case"focusin":(Ac(b)||b.contentEditable==="true")&&(Jr=b,gl=d,Bn=null);break;case"focusout":Bn=gl=Jr=null;break;case"mousedown":yl=!0;break;case"contextmenu":case"mouseup":case"dragend":yl=!1,Ic(f,r,u);break;case"selectionchange":if(Cm)break;case"keydown":case"keyup":Ic(f,r,u)}var S;if($a)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Kr?Wd(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(qd&&r.locale!=="ko"&&(Kr||C!=="onCompositionStart"?C==="onCompositionEnd"&&Kr&&(S=Hd()):(Qt=u,ja="value"in Qt?Qt.value:Qt.textContent,Kr=!0)),b=yo(d,C),0<b.length&&(C=new Ec(C,t,null,r,u),f.push({event:C,listeners:b}),S?C.data=S:(S=Vd(r),S!==null&&(C.data=S)))),(S=mm?gm(t,r):ym(t,r))&&(d=yo(d,"onBeforeInput"),0<d.length&&(u=new Ec("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=S))}sh(f,e)})}function os(t,e,r){return{instance:t,listener:e,currentTarget:r}}function yo(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Xn(t,r),o!=null&&n.unshift(os(t,o,s)),o=Xn(t,e),o!=null&&n.push(os(t,o,s))),t=t.return}return n}function Mr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fc(t,e,r,n,s){for(var o=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=Xn(r,o),c!=null&&i.unshift(os(r,c,l))):s||(c=Xn(r,o),c!=null&&i.push(os(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var Rm=/\r\n?/g,Pm=/\u0000|\uFFFD/g;function Bc(t){return(typeof t=="string"?t:""+t).replace(Rm,`
`).replace(Pm,"")}function Os(t,e,r){if(e=Bc(e),Bc(t)!==e&&r)throw Error(P(425))}function vo(){}var vl=null,wl=null;function xl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _l=typeof setTimeout=="function"?setTimeout:void 0,Am=typeof clearTimeout=="function"?clearTimeout:void 0,Hc=typeof Promise=="function"?Promise:void 0,Dm=typeof queueMicrotask=="function"?queueMicrotask:typeof Hc<"u"?function(t){return Hc.resolve(null).then(t).catch(Om)}:_l;function Om(t){setTimeout(function(){throw t})}function Ti(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),ts(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ts(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var xn=Math.random().toString(36).slice(2),kt="__reactFiber$"+xn,is="__reactProps$"+xn,Ot="__reactContainer$"+xn,bl="__reactEvents$"+xn,Mm="__reactListeners$"+xn,Lm="__reactHandles$"+xn;function _r(t){var e=t[kt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ot]||r[kt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=qc(t);t!==null;){if(r=t[kt])return r;t=qc(t)}return e}t=r,r=t.parentNode}return null}function ys(t){return t=t[kt]||t[Ot],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function qo(t){return t[is]||null}var kl=[],Yr=-1;function dr(t){return{current:t}}function le(t){0>Yr||(t.current=kl[Yr],kl[Yr]=null,Yr--)}function se(t,e){Yr++,kl[Yr]=t.current,t.current=e}var cr={},Ee=dr(cr),ze=dr(!1),Nr=cr;function dn(t,e){var r=t.type.contextTypes;if(!r)return cr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Fe(t){return t=t.childContextTypes,t!=null}function wo(){le(ze),le(Ee)}function Wc(t,e,r){if(Ee.current!==cr)throw Error(P(168));se(Ee,e),se(ze,r)}function ih(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(P(108,_p(t)||"Unknown",s));return de({},r,n)}function xo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cr,Nr=Ee.current,se(Ee,t),se(ze,ze.current),!0}function Vc(t,e,r){var n=t.stateNode;if(!n)throw Error(P(169));r?(t=ih(t,e,Nr),n.__reactInternalMemoizedMergedChildContext=t,le(ze),le(Ee),se(Ee,t)):le(ze),se(ze,r)}var Tt=null,Wo=!1,Ri=!1;function lh(t){Tt===null?Tt=[t]:Tt.push(t)}function Im(t){Wo=!0,lh(t)}function hr(){if(!Ri&&Tt!==null){Ri=!0;var t=0,e=ee;try{var r=Tt;for(ee=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Tt=null,Wo=!1}catch(s){throw Tt!==null&&(Tt=Tt.slice(t+1)),Pd(_a,hr),s}finally{ee=e,Ri=!1}}return null}var Xr=[],Zr=0,_o=null,bo=0,Xe=[],Ze=0,Cr=null,Rt=1,Pt="";function yr(t,e){Xr[Zr++]=bo,Xr[Zr++]=_o,_o=t,bo=e}function ah(t,e,r){Xe[Ze++]=Rt,Xe[Ze++]=Pt,Xe[Ze++]=Cr,Cr=t;var n=Rt;t=Pt;var s=32-mt(n)-1;n&=~(1<<s),r+=1;var o=32-mt(e)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Rt=1<<32-mt(e)+s|r<<s|n,Pt=o+t}else Rt=1<<o|r<<s|n,Pt=t}function Ta(t){t.return!==null&&(yr(t,1),ah(t,1,0))}function Ra(t){for(;t===_o;)_o=Xr[--Zr],Xr[Zr]=null,bo=Xr[--Zr],Xr[Zr]=null;for(;t===Cr;)Cr=Xe[--Ze],Xe[Ze]=null,Pt=Xe[--Ze],Xe[Ze]=null,Rt=Xe[--Ze],Xe[Ze]=null}var Ve=null,We=null,ae=!1,pt=null;function ch(t,e){var r=tt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Kc(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ve=t,We=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ve=t,We=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Cr!==null?{id:Rt,overflow:Pt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=tt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ve=t,We=null,!0):!1;default:return!1}}function Sl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jl(t){if(ae){var e=We;if(e){var r=e;if(!Kc(t,e)){if(Sl(t))throw Error(P(418));e=rr(r.nextSibling);var n=Ve;e&&Kc(t,e)?ch(n,r):(t.flags=t.flags&-4097|2,ae=!1,Ve=t)}}else{if(Sl(t))throw Error(P(418));t.flags=t.flags&-4097|2,ae=!1,Ve=t}}}function Jc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ve=t}function Ms(t){if(t!==Ve)return!1;if(!ae)return Jc(t),ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xl(t.type,t.memoizedProps)),e&&(e=We)){if(Sl(t))throw uh(),Error(P(418));for(;e;)ch(t,e),e=rr(e.nextSibling)}if(Jc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){We=rr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}We=null}}else We=Ve?rr(t.stateNode.nextSibling):null;return!0}function uh(){for(var t=We;t;)t=rr(t.nextSibling)}function hn(){We=Ve=null,ae=!1}function Pa(t){pt===null?pt=[t]:pt.push(t)}var Um=It.ReactCurrentBatchConfig;function $n(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,t));var s=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,t))}return t}function Ls(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gc(t){var e=t._init;return e(t._payload)}function dh(t){function e(y,h){if(t){var m=y.deletions;m===null?(y.deletions=[h],y.flags|=16):m.push(h)}}function r(y,h){if(!t)return null;for(;h!==null;)e(y,h),h=h.sibling;return null}function n(y,h){for(y=new Map;h!==null;)h.key!==null?y.set(h.key,h):y.set(h.index,h),h=h.sibling;return y}function s(y,h){return y=ir(y,h),y.index=0,y.sibling=null,y}function o(y,h,m){return y.index=m,t?(m=y.alternate,m!==null?(m=m.index,m<h?(y.flags|=2,h):m):(y.flags|=2,h)):(y.flags|=1048576,h)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,h,m,x){return h===null||h.tag!==6?(h=Ii(m,y.mode,x),h.return=y,h):(h=s(h,m),h.return=y,h)}function c(y,h,m,x){var k=m.type;return k===Vr?u(y,h,m.props.children,x,m.key):h!==null&&(h.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wt&&Gc(k)===h.type)?(x=s(h,m.props),x.ref=$n(y,h,m),x.return=y,x):(x=lo(m.type,m.key,m.props,null,y.mode,x),x.ref=$n(y,h,m),x.return=y,x)}function d(y,h,m,x){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=Ui(m,y.mode,x),h.return=y,h):(h=s(h,m.children||[]),h.return=y,h)}function u(y,h,m,x,k){return h===null||h.tag!==7?(h=jr(m,y.mode,x,k),h.return=y,h):(h=s(h,m),h.return=y,h)}function f(y,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Ii(""+h,y.mode,m),h.return=y,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ns:return m=lo(h.type,h.key,h.props,null,y.mode,m),m.ref=$n(y,null,h),m.return=y,m;case Wr:return h=Ui(h,y.mode,m),h.return=y,h;case Wt:var x=h._init;return f(y,x(h._payload),m)}if(An(h)||kn(h))return h=jr(h,y.mode,m,null),h.return=y,h;Ls(y,h)}return null}function p(y,h,m,x){var k=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return k!==null?null:l(y,h,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ns:return m.key===k?c(y,h,m,x):null;case Wr:return m.key===k?d(y,h,m,x):null;case Wt:return k=m._init,p(y,h,k(m._payload),x)}if(An(m)||kn(m))return k!==null?null:u(y,h,m,x,null);Ls(y,m)}return null}function w(y,h,m,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(m)||null,l(h,y,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ns:return y=y.get(x.key===null?m:x.key)||null,c(h,y,x,k);case Wr:return y=y.get(x.key===null?m:x.key)||null,d(h,y,x,k);case Wt:var b=x._init;return w(y,h,m,b(x._payload),k)}if(An(x)||kn(x))return y=y.get(m)||null,u(h,y,x,k,null);Ls(h,x)}return null}function g(y,h,m,x){for(var k=null,b=null,S=h,C=h=0,R=null;S!==null&&C<m.length;C++){S.index>C?(R=S,S=null):R=S.sibling;var D=p(y,S,m[C],x);if(D===null){S===null&&(S=R);break}t&&S&&D.alternate===null&&e(y,S),h=o(D,h,C),b===null?k=D:b.sibling=D,b=D,S=R}if(C===m.length)return r(y,S),ae&&yr(y,C),k;if(S===null){for(;C<m.length;C++)S=f(y,m[C],x),S!==null&&(h=o(S,h,C),b===null?k=S:b.sibling=S,b=S);return ae&&yr(y,C),k}for(S=n(y,S);C<m.length;C++)R=w(S,y,C,m[C],x),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?C:R.key),h=o(R,h,C),b===null?k=R:b.sibling=R,b=R);return t&&S.forEach(function(T){return e(y,T)}),ae&&yr(y,C),k}function v(y,h,m,x){var k=kn(m);if(typeof k!="function")throw Error(P(150));if(m=k.call(m),m==null)throw Error(P(151));for(var b=k=null,S=h,C=h=0,R=null,D=m.next();S!==null&&!D.done;C++,D=m.next()){S.index>C?(R=S,S=null):R=S.sibling;var T=p(y,S,D.value,x);if(T===null){S===null&&(S=R);break}t&&S&&T.alternate===null&&e(y,S),h=o(T,h,C),b===null?k=T:b.sibling=T,b=T,S=R}if(D.done)return r(y,S),ae&&yr(y,C),k;if(S===null){for(;!D.done;C++,D=m.next())D=f(y,D.value,x),D!==null&&(h=o(D,h,C),b===null?k=D:b.sibling=D,b=D);return ae&&yr(y,C),k}for(S=n(y,S);!D.done;C++,D=m.next())D=w(S,y,C,D.value,x),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?C:D.key),h=o(D,h,C),b===null?k=D:b.sibling=D,b=D);return t&&S.forEach(function(E){return e(y,E)}),ae&&yr(y,C),k}function _(y,h,m,x){if(typeof m=="object"&&m!==null&&m.type===Vr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ns:e:{for(var k=m.key,b=h;b!==null;){if(b.key===k){if(k=m.type,k===Vr){if(b.tag===7){r(y,b.sibling),h=s(b,m.props.children),h.return=y,y=h;break e}}else if(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wt&&Gc(k)===b.type){r(y,b.sibling),h=s(b,m.props),h.ref=$n(y,b,m),h.return=y,y=h;break e}r(y,b);break}else e(y,b);b=b.sibling}m.type===Vr?(h=jr(m.props.children,y.mode,x,m.key),h.return=y,y=h):(x=lo(m.type,m.key,m.props,null,y.mode,x),x.ref=$n(y,h,m),x.return=y,y=x)}return i(y);case Wr:e:{for(b=m.key;h!==null;){if(h.key===b)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){r(y,h.sibling),h=s(h,m.children||[]),h.return=y,y=h;break e}else{r(y,h);break}else e(y,h);h=h.sibling}h=Ui(m,y.mode,x),h.return=y,y=h}return i(y);case Wt:return b=m._init,_(y,h,b(m._payload),x)}if(An(m))return g(y,h,m,x);if(kn(m))return v(y,h,m,x);Ls(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(r(y,h.sibling),h=s(h,m),h.return=y,y=h):(r(y,h),h=Ii(m,y.mode,x),h.return=y,y=h),i(y)):r(y,h)}return _}var fn=dh(!0),hh=dh(!1),ko=dr(null),So=null,en=null,Aa=null;function Da(){Aa=en=So=null}function Oa(t){var e=ko.current;le(ko),t._currentValue=e}function Nl(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function an(t,e){So=t,Aa=en=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ue=!0),t.firstContext=null)}function st(t){var e=t._currentValue;if(Aa!==t)if(t={context:t,memoizedValue:e,next:null},en===null){if(So===null)throw Error(P(308));en=t,So.dependencies={lanes:0,firstContext:t}}else en=en.next=t;return e}var br=null;function Ma(t){br===null?br=[t]:br.push(t)}function fh(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Ma(e)):(r.next=s.next,s.next=r),e.interleaved=r,Mt(t,n)}function Mt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Vt=!1;function La(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ph(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function At(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Q&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Mt(t,r)}return s=n.interleaved,s===null?(e.next=e,Ma(n)):(e.next=s.next,s.next=e),n.interleaved=e,Mt(t,r)}function to(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ba(t,r)}}function Qc(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function jo(t,e,r,n){var s=t.updateQueue;Vt=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;i=0,u=d=c=null,l=o;do{var p=l.lane,w=l.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,v=l;switch(p=e,w=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(w,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(w,f,p):g,p==null)break e;f=de({},f,p);break e;case 2:Vt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else w={eventTime:w,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=w,c=f):u=u.next=w,i|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Er|=i,t.lanes=i,t.memoizedState=f}}function Yc(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var vs={},jt=dr(vs),ls=dr(vs),as=dr(vs);function kr(t){if(t===vs)throw Error(P(174));return t}function Ia(t,e){switch(se(as,e),se(ls,t),se(jt,vs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:il(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=il(e,t)}le(jt),se(jt,e)}function pn(){le(jt),le(ls),le(as)}function mh(t){kr(as.current);var e=kr(jt.current),r=il(e,t.type);e!==r&&(se(ls,t),se(jt,r))}function Ua(t){ls.current===t&&(le(jt),le(ls))}var ce=dr(0);function No(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pi=[];function za(){for(var t=0;t<Pi.length;t++)Pi[t]._workInProgressVersionPrimary=null;Pi.length=0}var ro=It.ReactCurrentDispatcher,Ai=It.ReactCurrentBatchConfig,$r=0,ue=null,ye=null,_e=null,Co=!1,Hn=!1,cs=0,zm=0;function Ne(){throw Error(P(321))}function Fa(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!yt(t[r],e[r]))return!1;return!0}function Ba(t,e,r,n,s,o){if($r=o,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ro.current=t===null||t.memoizedState===null?qm:Wm,t=r(n,s),Hn){o=0;do{if(Hn=!1,cs=0,25<=o)throw Error(P(301));o+=1,_e=ye=null,e.updateQueue=null,ro.current=Vm,t=r(n,s)}while(Hn)}if(ro.current=$o,e=ye!==null&&ye.next!==null,$r=0,_e=ye=ue=null,Co=!1,e)throw Error(P(300));return t}function Ha(){var t=cs!==0;return cs=0,t}function bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?ue.memoizedState=_e=t:_e=_e.next=t,_e}function ot(){if(ye===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=ye.next;var e=_e===null?ue.memoizedState:_e.next;if(e!==null)_e=e,ye=t;else{if(t===null)throw Error(P(310));ye=t,t={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},_e===null?ue.memoizedState=_e=t:_e=_e.next=t}return _e}function us(t,e){return typeof e=="function"?e(t):e}function Di(t){var e=ot(),r=e.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=t;var n=ye,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if(($r&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,ue.lanes|=u,Er|=u}d=d.next}while(d!==null&&d!==o);c===null?i=n:c.next=l,yt(n,e.memoizedState)||(Ue=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do o=s.lane,ue.lanes|=o,Er|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Oi(t){var e=ot(),r=e.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);yt(o,e.memoizedState)||(Ue=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function gh(){}function yh(t,e){var r=ue,n=ot(),s=e(),o=!yt(n.memoizedState,s);if(o&&(n.memoizedState=s,Ue=!0),n=n.queue,qa(xh.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||_e!==null&&_e.memoizedState.tag&1){if(r.flags|=2048,ds(9,wh.bind(null,r,n,s,e),void 0,null),be===null)throw Error(P(349));$r&30||vh(r,e,s)}return s}function vh(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function wh(t,e,r,n){e.value=r,e.getSnapshot=n,_h(e)&&bh(t)}function xh(t,e,r){return r(function(){_h(e)&&bh(t)})}function _h(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!yt(t,r)}catch{return!0}}function bh(t){var e=Mt(t,1);e!==null&&gt(e,t,1,-1)}function Xc(t){var e=bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:t},e.queue=t,t=t.dispatch=Hm.bind(null,ue,t),[e.memoizedState,t]}function ds(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function kh(){return ot().memoizedState}function no(t,e,r,n){var s=bt();ue.flags|=t,s.memoizedState=ds(1|e,r,void 0,n===void 0?null:n)}function Vo(t,e,r,n){var s=ot();n=n===void 0?null:n;var o=void 0;if(ye!==null){var i=ye.memoizedState;if(o=i.destroy,n!==null&&Fa(n,i.deps)){s.memoizedState=ds(e,r,o,n);return}}ue.flags|=t,s.memoizedState=ds(1|e,r,o,n)}function Zc(t,e){return no(8390656,8,t,e)}function qa(t,e){return Vo(2048,8,t,e)}function Sh(t,e){return Vo(4,2,t,e)}function jh(t,e){return Vo(4,4,t,e)}function Nh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ch(t,e,r){return r=r!=null?r.concat([t]):null,Vo(4,4,Nh.bind(null,e,t),r)}function Wa(){}function $h(t,e){var r=ot();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Fa(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Eh(t,e){var r=ot();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Fa(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Th(t,e,r){return $r&21?(yt(r,e)||(r=Od(),ue.lanes|=r,Er|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ue=!0),t.memoizedState=r)}function Fm(t,e){var r=ee;ee=r!==0&&4>r?r:4,t(!0);var n=Ai.transition;Ai.transition={};try{t(!1),e()}finally{ee=r,Ai.transition=n}}function Rh(){return ot().memoizedState}function Bm(t,e,r){var n=or(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ph(t))Ah(e,r);else if(r=fh(t,e,r,n),r!==null){var s=Ae();gt(r,t,n,s),Dh(r,e,n)}}function Hm(t,e,r){var n=or(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ph(t))Ah(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,l=o(i,r);if(s.hasEagerState=!0,s.eagerState=l,yt(l,i)){var c=e.interleaved;c===null?(s.next=s,Ma(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=fh(t,e,s,n),r!==null&&(s=Ae(),gt(r,t,n,s),Dh(r,e,n))}}function Ph(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function Ah(t,e){Hn=Co=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Dh(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ba(t,r)}}var $o={readContext:st,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},qm={readContext:st,useCallback:function(t,e){return bt().memoizedState=[t,e===void 0?null:e],t},useContext:st,useEffect:Zc,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,no(4194308,4,Nh.bind(null,e,t),r)},useLayoutEffect:function(t,e){return no(4194308,4,t,e)},useInsertionEffect:function(t,e){return no(4,2,t,e)},useMemo:function(t,e){var r=bt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=bt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Bm.bind(null,ue,t),[n.memoizedState,t]},useRef:function(t){var e=bt();return t={current:t},e.memoizedState=t},useState:Xc,useDebugValue:Wa,useDeferredValue:function(t){return bt().memoizedState=t},useTransition:function(){var t=Xc(!1),e=t[0];return t=Fm.bind(null,t[1]),bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ue,s=bt();if(ae){if(r===void 0)throw Error(P(407));r=r()}else{if(r=e(),be===null)throw Error(P(349));$r&30||vh(n,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,Zc(xh.bind(null,n,o,t),[t]),n.flags|=2048,ds(9,wh.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=bt(),e=be.identifierPrefix;if(ae){var r=Pt,n=Rt;r=(n&~(1<<32-mt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=cs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=zm++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Wm={readContext:st,useCallback:$h,useContext:st,useEffect:qa,useImperativeHandle:Ch,useInsertionEffect:Sh,useLayoutEffect:jh,useMemo:Eh,useReducer:Di,useRef:kh,useState:function(){return Di(us)},useDebugValue:Wa,useDeferredValue:function(t){var e=ot();return Th(e,ye.memoizedState,t)},useTransition:function(){var t=Di(us)[0],e=ot().memoizedState;return[t,e]},useMutableSource:gh,useSyncExternalStore:yh,useId:Rh,unstable_isNewReconciler:!1},Vm={readContext:st,useCallback:$h,useContext:st,useEffect:qa,useImperativeHandle:Ch,useInsertionEffect:Sh,useLayoutEffect:jh,useMemo:Eh,useReducer:Oi,useRef:kh,useState:function(){return Oi(us)},useDebugValue:Wa,useDeferredValue:function(t){var e=ot();return ye===null?e.memoizedState=t:Th(e,ye.memoizedState,t)},useTransition:function(){var t=Oi(us)[0],e=ot().memoizedState;return[t,e]},useMutableSource:gh,useSyncExternalStore:yh,useId:Rh,unstable_isNewReconciler:!1};function dt(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Cl(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:de({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ko={isMounted:function(t){return(t=t._reactInternals)?Pr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ae(),s=or(t),o=At(n,s);o.payload=e,r!=null&&(o.callback=r),e=nr(t,o,s),e!==null&&(gt(e,t,s,n),to(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ae(),s=or(t),o=At(n,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=nr(t,o,s),e!==null&&(gt(e,t,s,n),to(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ae(),n=or(t),s=At(r,n);s.tag=2,e!=null&&(s.callback=e),e=nr(t,s,n),e!==null&&(gt(e,t,n,r),to(e,t,n))}};function eu(t,e,r,n,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,i):e.prototype&&e.prototype.isPureReactComponent?!ns(r,n)||!ns(s,o):!0}function Oh(t,e,r){var n=!1,s=cr,o=e.contextType;return typeof o=="object"&&o!==null?o=st(o):(s=Fe(e)?Nr:Ee.current,n=e.contextTypes,o=(n=n!=null)?dn(t,s):cr),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ko,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function tu(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ko.enqueueReplaceState(e,e.state,null)}function $l(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},La(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=st(o):(o=Fe(e)?Nr:Ee.current,s.context=dn(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Cl(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ko.enqueueReplaceState(s,s.state,null),jo(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mn(t,e){try{var r="",n=e;do r+=xp(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Mi(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function El(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Km=typeof WeakMap=="function"?WeakMap:Map;function Mh(t,e,r){r=At(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){To||(To=!0,Ul=n),El(t,e)},r}function Lh(t,e,r){r=At(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){El(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){El(t,e),typeof n!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function ru(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Km;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=lg.bind(null,t,e,r),e.then(t,t))}function nu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function su(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=At(-1,1),e.tag=2,nr(r,e,1))),r.lanes|=1),t)}var Jm=It.ReactCurrentOwner,Ue=!1;function Re(t,e,r,n){e.child=t===null?hh(e,null,r,n):fn(e,t.child,r,n)}function ou(t,e,r,n,s){r=r.render;var o=e.ref;return an(e,s),n=Ba(t,e,r,n,o,s),r=Ha(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lt(t,e,s)):(ae&&r&&Ta(e),e.flags|=1,Re(t,e,n,s),e.child)}function iu(t,e,r,n,s){if(t===null){var o=r.type;return typeof o=="function"&&!Za(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,Ih(t,e,o,n,s)):(t=lo(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:ns,r(i,n)&&t.ref===e.ref)return Lt(t,e,s)}return e.flags|=1,t=ir(o,n),t.ref=e.ref,t.return=e,e.child=t}function Ih(t,e,r,n,s){if(t!==null){var o=t.memoizedProps;if(ns(o,n)&&t.ref===e.ref)if(Ue=!1,e.pendingProps=n=o,(t.lanes&s)!==0)t.flags&131072&&(Ue=!0);else return e.lanes=t.lanes,Lt(t,e,s)}return Tl(t,e,r,n,s)}function Uh(t,e,r){var n=e.pendingProps,s=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(rn,qe),qe|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(rn,qe),qe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,se(rn,qe),qe|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,se(rn,qe),qe|=n;return Re(t,e,s,r),e.child}function zh(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Tl(t,e,r,n,s){var o=Fe(r)?Nr:Ee.current;return o=dn(e,o),an(e,s),r=Ba(t,e,r,n,o,s),n=Ha(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lt(t,e,s)):(ae&&n&&Ta(e),e.flags|=1,Re(t,e,r,s),e.child)}function lu(t,e,r,n,s){if(Fe(r)){var o=!0;xo(e)}else o=!1;if(an(e,s),e.stateNode===null)so(t,e),Oh(e,r,n),$l(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=st(d):(d=Fe(r)?Nr:Ee.current,d=dn(e,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&tu(e,i,n,d),Vt=!1;var p=e.memoizedState;i.state=p,jo(e,n,i,s),c=e.memoizedState,l!==n||p!==c||ze.current||Vt?(typeof u=="function"&&(Cl(e,r,u,n),c=e.memoizedState),(l=Vt||eu(e,r,l,n,p,c,d))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,ph(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:dt(e.type,l),i.props=d,f=e.pendingProps,p=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=st(c):(c=Fe(r)?Nr:Ee.current,c=dn(e,c));var w=r.getDerivedStateFromProps;(u=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||p!==c)&&tu(e,i,n,c),Vt=!1,p=e.memoizedState,i.state=p,jo(e,n,i,s);var g=e.memoizedState;l!==f||p!==g||ze.current||Vt?(typeof w=="function"&&(Cl(e,r,w,n),g=e.memoizedState),(d=Vt||eu(e,r,d,n,p,g,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),i.props=n,i.state=g,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Rl(t,e,r,n,o,s)}function Rl(t,e,r,n,s,o){zh(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&Vc(e,r,!1),Lt(t,e,o);n=e.stateNode,Jm.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=fn(e,t.child,null,o),e.child=fn(e,null,l,o)):Re(t,e,l,o),e.memoizedState=n.state,s&&Vc(e,r,!0),e.child}function Fh(t){var e=t.stateNode;e.pendingContext?Wc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wc(t,e.context,!1),Ia(t,e.containerInfo)}function au(t,e,r,n,s){return hn(),Pa(s),e.flags|=256,Re(t,e,r,n),e.child}var Pl={dehydrated:null,treeContext:null,retryLane:0};function Al(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bh(t,e,r){var n=e.pendingProps,s=ce.current,o=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),se(ce,s&1),t===null)return jl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,o?(n=e.mode,o=e.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Qo(i,n,0,null),t=jr(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Al(r),e.memoizedState=Pl,t):Va(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Gm(t,e,i,n,l,s,r);if(o){o=n.fallback,i=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ir(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=ir(l,o):(o=jr(o,i,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,i=t.child.memoizedState,i=i===null?Al(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~r,e.memoizedState=Pl,n}return o=t.child,t=o.sibling,n=ir(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Va(t,e){return e=Qo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Is(t,e,r,n){return n!==null&&Pa(n),fn(e,t.child,null,r),t=Va(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gm(t,e,r,n,s,o,i){if(r)return e.flags&256?(e.flags&=-257,n=Mi(Error(P(422))),Is(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=Qo({mode:"visible",children:n.children},s,0,null),o=jr(o,s,i,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&fn(e,t.child,null,i),e.child.memoizedState=Al(i),e.memoizedState=Pl,o);if(!(e.mode&1))return Is(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(P(419)),n=Mi(o,n,void 0),Is(t,e,i,n)}if(l=(i&t.childLanes)!==0,Ue||l){if(n=be,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Mt(t,s),gt(n,t,s,-1))}return Xa(),n=Mi(Error(P(421))),Is(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ag.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,We=rr(s.nextSibling),Ve=e,ae=!0,pt=null,t!==null&&(Xe[Ze++]=Rt,Xe[Ze++]=Pt,Xe[Ze++]=Cr,Rt=t.id,Pt=t.overflow,Cr=e),e=Va(e,n.children),e.flags|=4096,e)}function cu(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Nl(t.return,e,r)}function Li(t,e,r,n,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function Hh(t,e,r){var n=e.pendingProps,s=n.revealOrder,o=n.tail;if(Re(t,e,n.children,r),n=ce.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cu(t,r,e);else if(t.tag===19)cu(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(se(ce,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&No(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Li(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&No(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Li(e,!0,r,null,o);break;case"together":Li(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function so(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Er|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,r=ir(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ir(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Qm(t,e,r){switch(e.tag){case 3:Fh(e),hn();break;case 5:mh(e);break;case 1:Fe(e.type)&&xo(e);break;case 4:Ia(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;se(ko,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(se(ce,ce.current&1),e.flags|=128,null):r&e.child.childLanes?Bh(t,e,r):(se(ce,ce.current&1),t=Lt(t,e,r),t!==null?t.sibling:null);se(ce,ce.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Hh(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),se(ce,ce.current),n)break;return null;case 22:case 23:return e.lanes=0,Uh(t,e,r)}return Lt(t,e,r)}var qh,Dl,Wh,Vh;qh=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Dl=function(){};Wh=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,kr(jt.current);var o=null;switch(r){case"input":s=rl(t,s),n=rl(t,n),o=[];break;case"select":s=de({},s,{value:void 0}),n=de({},n,{value:void 0}),o=[];break;case"textarea":s=ol(t,s),n=ol(t,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=vo)}ll(r,n);var i;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qn.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ie("scroll",t),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Vh=function(t,e,r,n){r!==n&&(e.flags|=4)};function En(t,e){if(!ae)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ce(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Ym(t,e,r){var n=e.pendingProps;switch(Ra(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(e),null;case 1:return Fe(e.type)&&wo(),Ce(e),null;case 3:return n=e.stateNode,pn(),le(ze),le(Ee),za(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ms(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pt!==null&&(Bl(pt),pt=null))),Dl(t,e),Ce(e),null;case 5:Ua(e);var s=kr(as.current);if(r=e.type,t!==null&&e.stateNode!=null)Wh(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(P(166));return Ce(e),null}if(t=kr(jt.current),Ms(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[kt]=e,n[is]=o,t=(e.mode&1)!==0,r){case"dialog":ie("cancel",n),ie("close",n);break;case"iframe":case"object":case"embed":ie("load",n);break;case"video":case"audio":for(s=0;s<On.length;s++)ie(On[s],n);break;case"source":ie("error",n);break;case"img":case"image":case"link":ie("error",n),ie("load",n);break;case"details":ie("toggle",n);break;case"input":vc(n,o),ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ie("invalid",n);break;case"textarea":xc(n,o),ie("invalid",n)}ll(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&Os(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Os(n.textContent,l,t),s=["children",""+l]):Qn.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&ie("scroll",n)}switch(r){case"input":Cs(n),wc(n,o,!0);break;case"textarea":Cs(n),_c(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=vo)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xd(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[kt]=e,t[is]=n,qh(t,e,!1,!1),e.stateNode=t;e:{switch(i=al(r,n),r){case"dialog":ie("cancel",t),ie("close",t),s=n;break;case"iframe":case"object":case"embed":ie("load",t),s=n;break;case"video":case"audio":for(s=0;s<On.length;s++)ie(On[s],t);s=n;break;case"source":ie("error",t),s=n;break;case"img":case"image":case"link":ie("error",t),ie("load",t),s=n;break;case"details":ie("toggle",t),s=n;break;case"input":vc(t,n),s=rl(t,n),ie("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=de({},n,{value:void 0}),ie("invalid",t);break;case"textarea":xc(t,n),s=ol(t,n),ie("invalid",t);break;default:s=n}ll(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?kd(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_d(t,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Yn(t,c):typeof c=="number"&&Yn(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Qn.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ie("scroll",t):c!=null&&ga(t,o,c,i))}switch(r){case"input":Cs(t),wc(t,n,!1);break;case"textarea":Cs(t),_c(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ar(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?nn(t,!!n.multiple,o,!1):n.defaultValue!=null&&nn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ce(e),null;case 6:if(t&&e.stateNode!=null)Vh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(P(166));if(r=kr(as.current),kr(jt.current),Ms(e)){if(n=e.stateNode,r=e.memoizedProps,n[kt]=e,(o=n.nodeValue!==r)&&(t=Ve,t!==null))switch(t.tag){case 3:Os(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Os(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[kt]=e,e.stateNode=n}return Ce(e),null;case 13:if(le(ce),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ae&&We!==null&&e.mode&1&&!(e.flags&128))uh(),hn(),e.flags|=98560,o=!1;else if(o=Ms(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(P(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(P(317));o[kt]=e}else hn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ce(e),o=!1}else pt!==null&&(Bl(pt),pt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?ve===0&&(ve=3):Xa())),e.updateQueue!==null&&(e.flags|=4),Ce(e),null);case 4:return pn(),Dl(t,e),t===null&&ss(e.stateNode.containerInfo),Ce(e),null;case 10:return Oa(e.type._context),Ce(e),null;case 17:return Fe(e.type)&&wo(),Ce(e),null;case 19:if(le(ce),o=e.memoizedState,o===null)return Ce(e),null;if(n=(e.flags&128)!==0,i=o.rendering,i===null)if(n)En(o,!1);else{if(ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=No(t),i!==null){for(e.flags|=128,En(o,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return se(ce,ce.current&1|2),e.child}t=t.sibling}o.tail!==null&&pe()>gn&&(e.flags|=128,n=!0,En(o,!1),e.lanes=4194304)}else{if(!n)if(t=No(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),En(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!ae)return Ce(e),null}else 2*pe()-o.renderingStartTime>gn&&r!==1073741824&&(e.flags|=128,n=!0,En(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(r=o.last,r!==null?r.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=pe(),e.sibling=null,r=ce.current,se(ce,n?r&1|2:r&1),e):(Ce(e),null);case 22:case 23:return Ya(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?qe&1073741824&&(Ce(e),e.subtreeFlags&6&&(e.flags|=8192)):Ce(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function Xm(t,e){switch(Ra(e),e.tag){case 1:return Fe(e.type)&&wo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pn(),le(ze),le(Ee),za(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ua(e),null;case 13:if(le(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));hn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(ce),null;case 4:return pn(),null;case 10:return Oa(e.type._context),null;case 22:case 23:return Ya(),null;case 24:return null;default:return null}}var Us=!1,$e=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,L=null;function tn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){fe(t,e,n)}else r.current=null}function Ol(t,e,r){try{r()}catch(n){fe(t,e,n)}}var uu=!1;function eg(t,e){if(vl=mo,t=Yd(),Ea(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,f=t,p=null;t:for(;;){for(var w;f!==r||s!==0&&f.nodeType!==3||(l=i+s),f!==o||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(w=f.firstChild)!==null;)p=f,f=w;for(;;){if(f===t)break t;if(p===r&&++d===s&&(l=i),p===o&&++u===n&&(c=i),(w=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=w}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(wl={focusedElem:t,selectionRange:r},mo=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,y=e.stateNode,h=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:dt(e.type,v),_);y.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(x){fe(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return g=uu,uu=!1,g}function qn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ol(e,r,o)}s=s.next}while(s!==n)}}function Jo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Ml(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Kh(t){var e=t.alternate;e!==null&&(t.alternate=null,Kh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kt],delete e[is],delete e[bl],delete e[Mm],delete e[Lm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jh(t){return t.tag===5||t.tag===3||t.tag===4}function du(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ll(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=vo));else if(n!==4&&(t=t.child,t!==null))for(Ll(t,e,r),t=t.sibling;t!==null;)Ll(t,e,r),t=t.sibling}function Il(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Il(t,e,r),t=t.sibling;t!==null;)Il(t,e,r),t=t.sibling}var ke=null,ht=!1;function Bt(t,e,r){for(r=r.child;r!==null;)Gh(t,e,r),r=r.sibling}function Gh(t,e,r){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(zo,r)}catch{}switch(r.tag){case 5:$e||tn(r,e);case 6:var n=ke,s=ht;ke=null,Bt(t,e,r),ke=n,ht=s,ke!==null&&(ht?(t=ke,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ke.removeChild(r.stateNode));break;case 18:ke!==null&&(ht?(t=ke,r=r.stateNode,t.nodeType===8?Ti(t.parentNode,r):t.nodeType===1&&Ti(t,r),ts(t)):Ti(ke,r.stateNode));break;case 4:n=ke,s=ht,ke=r.stateNode.containerInfo,ht=!0,Bt(t,e,r),ke=n,ht=s;break;case 0:case 11:case 14:case 15:if(!$e&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Ol(r,e,i),s=s.next}while(s!==n)}Bt(t,e,r);break;case 1:if(!$e&&(tn(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){fe(r,e,l)}Bt(t,e,r);break;case 21:Bt(t,e,r);break;case 22:r.mode&1?($e=(n=$e)||r.memoizedState!==null,Bt(t,e,r),$e=n):Bt(t,e,r);break;default:Bt(t,e,r)}}function hu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Zm),e.forEach(function(n){var s=cg.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ct(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:ke=l.stateNode,ht=!1;break e;case 3:ke=l.stateNode.containerInfo,ht=!0;break e;case 4:ke=l.stateNode.containerInfo,ht=!0;break e}l=l.return}if(ke===null)throw Error(P(160));Gh(o,i,s),ke=null,ht=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){fe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qh(e,t),e=e.sibling}function Qh(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ct(e,t),xt(t),n&4){try{qn(3,t,t.return),Jo(3,t)}catch(v){fe(t,t.return,v)}try{qn(5,t,t.return)}catch(v){fe(t,t.return,v)}}break;case 1:ct(e,t),xt(t),n&512&&r!==null&&tn(r,r.return);break;case 5:if(ct(e,t),xt(t),n&512&&r!==null&&tn(r,r.return),t.flags&32){var s=t.stateNode;try{Yn(s,"")}catch(v){fe(t,t.return,v)}}if(n&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=r!==null?r.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&vd(s,o),al(l,i);var d=al(l,o);for(i=0;i<c.length;i+=2){var u=c[i],f=c[i+1];u==="style"?kd(s,f):u==="dangerouslySetInnerHTML"?_d(s,f):u==="children"?Yn(s,f):ga(s,u,f,d)}switch(l){case"input":nl(s,o);break;case"textarea":wd(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?nn(s,!!o.multiple,w,!1):p!==!!o.multiple&&(o.defaultValue!=null?nn(s,!!o.multiple,o.defaultValue,!0):nn(s,!!o.multiple,o.multiple?[]:"",!1))}s[is]=o}catch(v){fe(t,t.return,v)}}break;case 6:if(ct(e,t),xt(t),n&4){if(t.stateNode===null)throw Error(P(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(v){fe(t,t.return,v)}}break;case 3:if(ct(e,t),xt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ts(e.containerInfo)}catch(v){fe(t,t.return,v)}break;case 4:ct(e,t),xt(t);break;case 13:ct(e,t),xt(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Ga=pe())),n&4&&hu(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?($e=(d=$e)||u,ct(e,t),$e=d):ct(e,t),xt(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(L=t,u=t.child;u!==null;){for(f=L=u;L!==null;){switch(p=L,w=p.child,p.tag){case 0:case 11:case 14:case 15:qn(4,p,p.return);break;case 1:tn(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){fe(n,r,v)}}break;case 5:tn(p,p.return);break;case 22:if(p.memoizedState!==null){pu(f);continue}}w!==null?(w.return=p,L=w):pu(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=bd("display",i))}catch(v){fe(t,t.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){fe(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ct(e,t),xt(t),n&4&&hu(t);break;case 21:break;default:ct(e,t),xt(t)}}function xt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Jh(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Yn(s,""),n.flags&=-33);var o=du(t);Il(t,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=du(t);Ll(t,l,i);break;default:throw Error(P(161))}}catch(c){fe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tg(t,e,r){L=t,Yh(t)}function Yh(t,e,r){for(var n=(t.mode&1)!==0;L!==null;){var s=L,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Us;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||$e;l=Us;var d=$e;if(Us=i,($e=c)&&!d)for(L=s;L!==null;)i=L,c=i.child,i.tag===22&&i.memoizedState!==null?mu(s):c!==null?(c.return=i,L=c):mu(s);for(;o!==null;)L=o,Yh(o),o=o.sibling;L=s,Us=l,$e=d}fu(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,L=o):fu(t)}}function fu(t){for(;L!==null;){var e=L;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$e||Jo(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!$e)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:dt(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Yc(e,o,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Yc(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&ts(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}$e||e.flags&512&&Ml(e)}catch(p){fe(e,e.return,p)}}if(e===t){L=null;break}if(r=e.sibling,r!==null){r.return=e.return,L=r;break}L=e.return}}function pu(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var r=e.sibling;if(r!==null){r.return=e.return,L=r;break}L=e.return}}function mu(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Jo(4,e)}catch(c){fe(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){fe(e,s,c)}}var o=e.return;try{Ml(e)}catch(c){fe(e,o,c)}break;case 5:var i=e.return;try{Ml(e)}catch(c){fe(e,i,c)}}}catch(c){fe(e,e.return,c)}if(e===t){L=null;break}var l=e.sibling;if(l!==null){l.return=e.return,L=l;break}L=e.return}}var rg=Math.ceil,Eo=It.ReactCurrentDispatcher,Ka=It.ReactCurrentOwner,rt=It.ReactCurrentBatchConfig,Q=0,be=null,me=null,Se=0,qe=0,rn=dr(0),ve=0,hs=null,Er=0,Go=0,Ja=0,Wn=null,Le=null,Ga=0,gn=1/0,Ct=null,To=!1,Ul=null,sr=null,zs=!1,Yt=null,Ro=0,Vn=0,zl=null,oo=-1,io=0;function Ae(){return Q&6?pe():oo!==-1?oo:oo=pe()}function or(t){return t.mode&1?Q&2&&Se!==0?Se&-Se:Um.transition!==null?(io===0&&(io=Od()),io):(t=ee,t!==0||(t=window.event,t=t===void 0?16:Bd(t.type)),t):1}function gt(t,e,r,n){if(50<Vn)throw Vn=0,zl=null,Error(P(185));ms(t,r,n),(!(Q&2)||t!==be)&&(t===be&&(!(Q&2)&&(Go|=r),ve===4&&Jt(t,Se)),Be(t,n),r===1&&Q===0&&!(e.mode&1)&&(gn=pe()+500,Wo&&hr()))}function Be(t,e){var r=t.callbackNode;Up(t,e);var n=po(t,t===be?Se:0);if(n===0)r!==null&&Sc(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Sc(r),e===1)t.tag===0?Im(gu.bind(null,t)):lh(gu.bind(null,t)),Dm(function(){!(Q&6)&&hr()}),r=null;else{switch(Md(n)){case 1:r=_a;break;case 4:r=Ad;break;case 16:r=fo;break;case 536870912:r=Dd;break;default:r=fo}r=of(r,Xh.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Xh(t,e){if(oo=-1,io=0,Q&6)throw Error(P(327));var r=t.callbackNode;if(cn()&&t.callbackNode!==r)return null;var n=po(t,t===be?Se:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Po(t,n);else{e=n;var s=Q;Q|=2;var o=ef();(be!==t||Se!==e)&&(Ct=null,gn=pe()+500,Sr(t,e));do try{og();break}catch(l){Zh(t,l)}while(!0);Da(),Eo.current=o,Q=s,me!==null?e=0:(be=null,Se=0,e=ve)}if(e!==0){if(e===2&&(s=fl(t),s!==0&&(n=s,e=Fl(t,s))),e===1)throw r=hs,Sr(t,0),Jt(t,n),Be(t,pe()),r;if(e===6)Jt(t,n);else{if(s=t.current.alternate,!(n&30)&&!ng(s)&&(e=Po(t,n),e===2&&(o=fl(t),o!==0&&(n=o,e=Fl(t,o))),e===1))throw r=hs,Sr(t,0),Jt(t,n),Be(t,pe()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(P(345));case 2:vr(t,Le,Ct);break;case 3:if(Jt(t,n),(n&130023424)===n&&(e=Ga+500-pe(),10<e)){if(po(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Ae(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_l(vr.bind(null,t,Le,Ct),e);break}vr(t,Le,Ct);break;case 4:if(Jt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-mt(n);o=1<<i,i=e[i],i>s&&(s=i),n&=~o}if(n=s,n=pe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rg(n/1960))-n,10<n){t.timeoutHandle=_l(vr.bind(null,t,Le,Ct),n);break}vr(t,Le,Ct);break;case 5:vr(t,Le,Ct);break;default:throw Error(P(329))}}}return Be(t,pe()),t.callbackNode===r?Xh.bind(null,t):null}function Fl(t,e){var r=Wn;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=Po(t,e),t!==2&&(e=Le,Le=r,e!==null&&Bl(e)),t}function Bl(t){Le===null?Le=t:Le.push.apply(Le,t)}function ng(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!yt(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jt(t,e){for(e&=~Ja,e&=~Go,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-mt(e),n=1<<r;t[r]=-1,e&=~n}}function gu(t){if(Q&6)throw Error(P(327));cn();var e=po(t,0);if(!(e&1))return Be(t,pe()),null;var r=Po(t,e);if(t.tag!==0&&r===2){var n=fl(t);n!==0&&(e=n,r=Fl(t,n))}if(r===1)throw r=hs,Sr(t,0),Jt(t,e),Be(t,pe()),r;if(r===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vr(t,Le,Ct),Be(t,pe()),null}function Qa(t,e){var r=Q;Q|=1;try{return t(e)}finally{Q=r,Q===0&&(gn=pe()+500,Wo&&hr())}}function Tr(t){Yt!==null&&Yt.tag===0&&!(Q&6)&&cn();var e=Q;Q|=1;var r=rt.transition,n=ee;try{if(rt.transition=null,ee=1,t)return t()}finally{ee=n,rt.transition=r,Q=e,!(Q&6)&&hr()}}function Ya(){qe=rn.current,le(rn)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Am(r)),me!==null)for(r=me.return;r!==null;){var n=r;switch(Ra(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wo();break;case 3:pn(),le(ze),le(Ee),za();break;case 5:Ua(n);break;case 4:pn();break;case 13:le(ce);break;case 19:le(ce);break;case 10:Oa(n.type._context);break;case 22:case 23:Ya()}r=r.return}if(be=t,me=t=ir(t.current,null),Se=qe=e,ve=0,hs=null,Ja=Go=Er=0,Le=Wn=null,br!==null){for(e=0;e<br.length;e++)if(r=br[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}br=null}return t}function Zh(t,e){do{var r=me;try{if(Da(),ro.current=$o,Co){for(var n=ue.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Co=!1}if($r=0,_e=ye=ue=null,Hn=!1,cs=0,Ka.current=null,r===null||r.return===null){ve=1,hs=e,me=null;break}e:{var o=t,i=r.return,l=r,c=e;if(e=Se,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var w=nu(i);if(w!==null){w.flags&=-257,su(w,i,l,o,e),w.mode&1&&ru(o,d,e),e=w,c=d;var g=e.updateQueue;if(g===null){var v=new Set;v.add(c),e.updateQueue=v}else g.add(c);break e}else{if(!(e&1)){ru(o,d,e),Xa();break e}c=Error(P(426))}}else if(ae&&l.mode&1){var _=nu(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),su(_,i,l,o,e),Pa(mn(c,l));break e}}o=c=mn(c,l),ve!==4&&(ve=2),Wn===null?Wn=[o]:Wn.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=Mh(o,c,e);Qc(o,y);break e;case 1:l=c;var h=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(sr===null||!sr.has(m)))){o.flags|=65536,e&=-e,o.lanes|=e;var x=Lh(o,l,e);Qc(o,x);break e}}o=o.return}while(o!==null)}rf(r)}catch(k){e=k,me===r&&r!==null&&(me=r=r.return);continue}break}while(!0)}function ef(){var t=Eo.current;return Eo.current=$o,t===null?$o:t}function Xa(){(ve===0||ve===3||ve===2)&&(ve=4),be===null||!(Er&268435455)&&!(Go&268435455)||Jt(be,Se)}function Po(t,e){var r=Q;Q|=2;var n=ef();(be!==t||Se!==e)&&(Ct=null,Sr(t,e));do try{sg();break}catch(s){Zh(t,s)}while(!0);if(Da(),Q=r,Eo.current=n,me!==null)throw Error(P(261));return be=null,Se=0,ve}function sg(){for(;me!==null;)tf(me)}function og(){for(;me!==null&&!Tp();)tf(me)}function tf(t){var e=sf(t.alternate,t,qe);t.memoizedProps=t.pendingProps,e===null?rf(t):me=e,Ka.current=null}function rf(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Xm(r,e),r!==null){r.flags&=32767,me=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ve=6,me=null;return}}else if(r=Ym(r,e,qe),r!==null){me=r;return}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);ve===0&&(ve=5)}function vr(t,e,r){var n=ee,s=rt.transition;try{rt.transition=null,ee=1,ig(t,e,r,n)}finally{rt.transition=s,ee=n}return null}function ig(t,e,r,n){do cn();while(Yt!==null);if(Q&6)throw Error(P(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(zp(t,o),t===be&&(me=be=null,Se=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zs||(zs=!0,of(fo,function(){return cn(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=rt.transition,rt.transition=null;var i=ee;ee=1;var l=Q;Q|=4,Ka.current=null,eg(t,r),Qh(r,t),Nm(wl),mo=!!vl,wl=vl=null,t.current=r,tg(r),Rp(),Q=l,ee=i,rt.transition=o}else t.current=r;if(zs&&(zs=!1,Yt=t,Ro=s),o=t.pendingLanes,o===0&&(sr=null),Dp(r.stateNode),Be(t,pe()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(To)throw To=!1,t=Ul,Ul=null,t;return Ro&1&&t.tag!==0&&cn(),o=t.pendingLanes,o&1?t===zl?Vn++:(Vn=0,zl=t):Vn=0,hr(),null}function cn(){if(Yt!==null){var t=Md(Ro),e=rt.transition,r=ee;try{if(rt.transition=null,ee=16>t?16:t,Yt===null)var n=!1;else{if(t=Yt,Yt=null,Ro=0,Q&6)throw Error(P(331));var s=Q;for(Q|=4,L=t.current;L!==null;){var o=L,i=o.child;if(L.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(L=d;L!==null;){var u=L;switch(u.tag){case 0:case 11:case 15:qn(8,u,o)}var f=u.child;if(f!==null)f.return=u,L=f;else for(;L!==null;){u=L;var p=u.sibling,w=u.return;if(Kh(u),u===d){L=null;break}if(p!==null){p.return=w,L=p;break}L=w}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}L=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,L=i;else e:for(;L!==null;){if(o=L,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qn(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,L=y;break e}L=o.return}}var h=t.current;for(L=h;L!==null;){i=L;var m=i.child;if(i.subtreeFlags&2064&&m!==null)m.return=i,L=m;else e:for(i=h;L!==null;){if(l=L,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jo(9,l)}}catch(k){fe(l,l.return,k)}if(l===i){L=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,L=x;break e}L=l.return}}if(Q=s,hr(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(zo,t)}catch{}n=!0}return n}finally{ee=r,rt.transition=e}}return!1}function yu(t,e,r){e=mn(r,e),e=Mh(t,e,1),t=nr(t,e,1),e=Ae(),t!==null&&(ms(t,1,e),Be(t,e))}function fe(t,e,r){if(t.tag===3)yu(t,t,r);else for(;e!==null;){if(e.tag===3){yu(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(sr===null||!sr.has(n))){t=mn(r,t),t=Lh(e,t,1),e=nr(e,t,1),t=Ae(),e!==null&&(ms(e,1,t),Be(e,t));break}}e=e.return}}function lg(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ae(),t.pingedLanes|=t.suspendedLanes&r,be===t&&(Se&r)===r&&(ve===4||ve===3&&(Se&130023424)===Se&&500>pe()-Ga?Sr(t,0):Ja|=r),Be(t,e)}function nf(t,e){e===0&&(t.mode&1?(e=Ts,Ts<<=1,!(Ts&130023424)&&(Ts=4194304)):e=1);var r=Ae();t=Mt(t,e),t!==null&&(ms(t,e,r),Be(t,r))}function ag(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),nf(t,r)}function cg(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(e),nf(t,r)}var sf;sf=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ze.current)Ue=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ue=!1,Qm(t,e,r);Ue=!!(t.flags&131072)}else Ue=!1,ae&&e.flags&1048576&&ah(e,bo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;so(t,e),t=e.pendingProps;var s=dn(e,Ee.current);an(e,r),s=Ba(null,e,n,t,s,r);var o=Ha();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fe(n)?(o=!0,xo(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,La(e),s.updater=Ko,e.stateNode=s,s._reactInternals=e,$l(e,n,t,r),e=Rl(null,e,n,!0,o,r)):(e.tag=0,ae&&o&&Ta(e),Re(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(so(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=dg(n),t=dt(n,t),s){case 0:e=Tl(null,e,n,t,r);break e;case 1:e=lu(null,e,n,t,r);break e;case 11:e=ou(null,e,n,t,r);break e;case 14:e=iu(null,e,n,dt(n.type,t),r);break e}throw Error(P(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:dt(n,s),Tl(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:dt(n,s),lu(t,e,n,s,r);case 3:e:{if(Fh(e),t===null)throw Error(P(387));n=e.pendingProps,o=e.memoizedState,s=o.element,ph(t,e),jo(e,n,null,r);var i=e.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=mn(Error(P(423)),e),e=au(t,e,n,r,s);break e}else if(n!==s){s=mn(Error(P(424)),e),e=au(t,e,n,r,s);break e}else for(We=rr(e.stateNode.containerInfo.firstChild),Ve=e,ae=!0,pt=null,r=hh(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hn(),n===s){e=Lt(t,e,r);break e}Re(t,e,n,r)}e=e.child}return e;case 5:return mh(e),t===null&&jl(e),n=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,xl(n,s)?i=null:o!==null&&xl(n,o)&&(e.flags|=32),zh(t,e),Re(t,e,i,r),e.child;case 6:return t===null&&jl(e),null;case 13:return Bh(t,e,r);case 4:return Ia(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=fn(e,null,n,r):Re(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:dt(n,s),ou(t,e,n,s,r);case 7:return Re(t,e,e.pendingProps,r),e.child;case 8:return Re(t,e,e.pendingProps.children,r),e.child;case 12:return Re(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,se(ko,n._currentValue),n._currentValue=i,o!==null)if(yt(o.value,i)){if(o.children===s.children&&!ze.current){e=Lt(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=At(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Nl(o.return,r,e),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(P(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Nl(i,r,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Re(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,an(e,r),s=st(s),n=n(s),e.flags|=1,Re(t,e,n,r),e.child;case 14:return n=e.type,s=dt(n,e.pendingProps),s=dt(n.type,s),iu(t,e,n,s,r);case 15:return Ih(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:dt(n,s),so(t,e),e.tag=1,Fe(n)?(t=!0,xo(e)):t=!1,an(e,r),Oh(e,n,s),$l(e,n,s,r),Rl(null,e,n,!0,t,r);case 19:return Hh(t,e,r);case 22:return Uh(t,e,r)}throw Error(P(156,e.tag))};function of(t,e){return Pd(t,e)}function ug(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tt(t,e,r,n){return new ug(t,e,r,n)}function Za(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dg(t){if(typeof t=="function")return Za(t)?1:0;if(t!=null){if(t=t.$$typeof,t===va)return 11;if(t===wa)return 14}return 2}function ir(t,e){var r=t.alternate;return r===null?(r=tt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function lo(t,e,r,n,s,o){var i=2;if(n=t,typeof t=="function")Za(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Vr:return jr(r.children,s,o,e);case ya:i=8,s|=8;break;case Xi:return t=tt(12,r,e,s|2),t.elementType=Xi,t.lanes=o,t;case Zi:return t=tt(13,r,e,s),t.elementType=Zi,t.lanes=o,t;case el:return t=tt(19,r,e,s),t.elementType=el,t.lanes=o,t;case md:return Qo(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fd:i=10;break e;case pd:i=9;break e;case va:i=11;break e;case wa:i=14;break e;case Wt:i=16,n=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=tt(i,r,e,s),e.elementType=t,e.type=n,e.lanes=o,e}function jr(t,e,r,n){return t=tt(7,t,n,e),t.lanes=r,t}function Qo(t,e,r,n){return t=tt(22,t,n,e),t.elementType=md,t.lanes=r,t.stateNode={isHidden:!1},t}function Ii(t,e,r){return t=tt(6,t,null,e),t.lanes=r,t}function Ui(t,e,r){return e=tt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hg(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wi(0),this.expirationTimes=wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ec(t,e,r,n,s,o,i,l,c){return t=new hg(t,e,r,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=tt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(o),t}function fg(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function lf(t){if(!t)return cr;t=t._reactInternals;e:{if(Pr(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var r=t.type;if(Fe(r))return ih(t,r,e)}return e}function af(t,e,r,n,s,o,i,l,c){return t=ec(r,n,!0,t,s,o,i,l,c),t.context=lf(null),r=t.current,n=Ae(),s=or(r),o=At(n,s),o.callback=e??null,nr(r,o,s),t.current.lanes=s,ms(t,s,n),Be(t,n),t}function Yo(t,e,r,n){var s=e.current,o=Ae(),i=or(s);return r=lf(r),e.context===null?e.context=r:e.pendingContext=r,e=At(o,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=nr(s,e,i),t!==null&&(gt(t,s,i,o),to(t,s,i)),i}function Ao(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function tc(t,e){vu(t,e),(t=t.alternate)&&vu(t,e)}function pg(){return null}var cf=typeof reportError=="function"?reportError:function(t){console.error(t)};function rc(t){this._internalRoot=t}Xo.prototype.render=rc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));Yo(t,e,null,null)};Xo.prototype.unmount=rc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tr(function(){Yo(null,t,null,null)}),e[Ot]=null}};function Xo(t){this._internalRoot=t}Xo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ud();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Kt.length&&e!==0&&e<Kt[r].priority;r++);Kt.splice(r,0,t),r===0&&Fd(t)}};function nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wu(){}function mg(t,e,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var d=Ao(i);o.call(d)}}var i=af(e,n,t,0,null,!1,!1,"",wu);return t._reactRootContainer=i,t[Ot]=i.current,ss(t.nodeType===8?t.parentNode:t),Tr(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=Ao(c);l.call(d)}}var c=ec(t,0,!1,null,null,!1,!1,"",wu);return t._reactRootContainer=c,t[Ot]=c.current,ss(t.nodeType===8?t.parentNode:t),Tr(function(){Yo(e,c,r,n)}),c}function ei(t,e,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=Ao(i);l.call(c)}}Yo(e,i,t,s)}else i=mg(r,e,t,s,n);return Ao(i)}Ld=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Dn(e.pendingLanes);r!==0&&(ba(e,r|1),Be(e,pe()),!(Q&6)&&(gn=pe()+500,hr()))}break;case 13:Tr(function(){var n=Mt(t,1);if(n!==null){var s=Ae();gt(n,t,1,s)}}),tc(t,1)}};ka=function(t){if(t.tag===13){var e=Mt(t,134217728);if(e!==null){var r=Ae();gt(e,t,134217728,r)}tc(t,134217728)}};Id=function(t){if(t.tag===13){var e=or(t),r=Mt(t,e);if(r!==null){var n=Ae();gt(r,t,e,n)}tc(t,e)}};Ud=function(){return ee};zd=function(t,e){var r=ee;try{return ee=t,e()}finally{ee=r}};ul=function(t,e,r){switch(e){case"input":if(nl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=qo(n);if(!s)throw Error(P(90));yd(n),nl(n,s)}}}break;case"textarea":wd(t,r);break;case"select":e=r.value,e!=null&&nn(t,!!r.multiple,e,!1)}};Nd=Qa;Cd=Tr;var gg={usingClientEntryPoint:!1,Events:[ys,Qr,qo,Sd,jd,Qa]},Tn={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yg={bundleType:Tn.bundleType,version:Tn.version,rendererPackageName:Tn.rendererPackageName,rendererConfig:Tn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:It.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Td(t),t===null?null:t.stateNode},findFiberByHostInstance:Tn.findFiberByHostInstance||pg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fs.isDisabled&&Fs.supportsFiber)try{zo=Fs.inject(yg),St=Fs}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gg;Je.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nc(e))throw Error(P(200));return fg(t,e,null,r)};Je.createRoot=function(t,e){if(!nc(t))throw Error(P(299));var r=!1,n="",s=cf;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ec(t,1,!1,null,null,r,!1,n,s),t[Ot]=e.current,ss(t.nodeType===8?t.parentNode:t),new rc(e)};Je.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Td(e),t=t===null?null:t.stateNode,t};Je.flushSync=function(t){return Tr(t)};Je.hydrate=function(t,e,r){if(!Zo(e))throw Error(P(200));return ei(null,t,e,!0,r)};Je.hydrateRoot=function(t,e,r){if(!nc(t))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=cf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=af(e,null,t,1,r??null,s,!1,o,i),t[Ot]=e.current,ss(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Xo(e)};Je.render=function(t,e,r){if(!Zo(e))throw Error(P(200));return ei(null,t,e,!1,r)};Je.unmountComponentAtNode=function(t){if(!Zo(t))throw Error(P(40));return t._reactRootContainer?(Tr(function(){ei(null,null,t,!1,function(){t._reactRootContainer=null,t[Ot]=null})}),!0):!1};Je.unstable_batchedUpdates=Qa;Je.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Zo(r))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return ei(t,e,r,!1,n)};Je.version="18.3.1-next-f1338f8080-20240426";function uf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uf)}catch(t){console.error(t)}}uf(),cd.exports=Je;var vg=cd.exports,df,xu=vg;df=xu.createRoot,xu.hydrateRoot;const j=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,He=(t,e,r=1)=>{const n=j(1,Math.min(r,3)),s=5-n;let o=t,i=e;s===1?(o=Math.max(t,1),i=Math.min(e,9)):s===2?(o=Math.max(t,10),i=Math.min(e,99)):s===3?(o=Math.max(t,100),i=Math.min(e,999)):s===4&&(o=Math.max(t,1e3),i=Math.min(e,9999)),o>i&&(o=1,i=Math.pow(10,s)-1);const l=j(o,i),c=Math.pow(10,n),d=j(1,c-1)/c;return Math.round((l+d)*c)/c},_u=t=>{const e=Math.random().toString(36).substr(2,9);if(t==="basic"){const n=["+","-","×","÷"][j(0,3)];let s,o,i,l,c=!1,d,u;switch(n){case"+":s=j(15,999),o=j(15,999),s%10+o%10<10&&(o+=10-o%10+j(1,9)),i=s+o,l=`${s} + ${o}`;break;case"-":o=j(15,999);const f=j(15,999);s=f+o,s%10>=o%10&&(o=Math.floor(o/10)*10+s%10+j(1,9),o>999&&(o=999),s=f+o),i=s-o,l=`${s} - ${o}`;break;case"×":const p=j(2,9),w=j(10,999);Math.random()<.5?(i=p*w,l=`${p} × ${w}`):(i=w*p,l=`${w} × ${p}`);break;case"÷":const g=j(2,9);d=j(2,99),u=j(0,g-1);const v=d*g+u;c=!0,i=`${d}……${u}`,l=`${v} ÷ ${g}`;break;default:s=10,o=5,i=15,l="10 + 5"}return{id:e,type:"mental",difficulty:t,question:l,answer:i,isDivision:c,quotient:d,remainder:u}}else{const r=["+","-","×","÷"],n=Math.floor(Math.random()*20),s=r[n%4];let o,i,l=!1,c,d,u;const f=Math.random()<.25;switch(s){case"+":if(f){const g=j(2,9)*100,v=j(1,20),_=j(1,20),y=g-v,h=g+_;i=y+h,o=`${y} + ${h}`,u=`可以凑整计算：${y} + ${h} = (${g} - ${v}) + (${g} + ${_}) = ${g*2} + ${_-v} = ${i}`}else{const g=j(100,9999),v=j(100,9999);i=g+v,o=`${g} + ${v}`}break;case"-":if(f){const g=j(3,9)*100,v=j(1,15),_=j(1e3,9999),y=g-v;i=_-y,o=`${_} - ${y}`,u=`可以这样计算：${_} - ${y} = ${_} - ${g} + ${v} = ${_-g} + ${v} = ${i}`}else{const g=j(100,9999),v=j(100,9999),_=v+g;i=v,o=`${_} - ${g}`}break;case"×":if(f){const g=j(2,9)*(Math.random()<.5?10:100),v=j(1,Math.min(10,g/10)),_=j(2,9),y=g+(Math.random()<.5?v:-v);i=y*_,o=`${y} × ${_}`,u=`可以分解计算：${y} × ${_} = (${g} ${y>g?"+":"-"} ${Math.abs(y-g)}) × ${_} = ${g*_} ${y>g?"+":"-"} ${Math.abs(y-g)*_} = ${i}`}else if((Math.random()<.5?"two_tens":"single_multi")==="two_tens"){const v=j(10,99),_=j(10,99);i=v*_,o=`${v} × ${_}`}else{const v=j(2,9),_=j(10,9999);Math.random()<.5?(i=v*_,o=`${v} × ${_}`):(i=_*v,o=`${_} × ${v}`)}break;case"÷":const p=j(3,19);c=j(10,999),d=j(0,p-1);const w=c*p+d;if(w<100||w>9999){c=j(Math.ceil(100/p),Math.floor(9999/p)),d=j(0,p-1);const g=c*p+d;l=!0,i=`${c}……${d}`,o=`${g} ÷ ${p}`}else l=!0,i=`${c}……${d}`,o=`${w} ÷ ${p}`;f&&d===0&&(p===4?u="速算技巧：÷4 = ÷2÷2，先除以2再除以2":p===6?u="速算技巧：÷6 = ÷2÷3，先除以2再除以3":p===8?u="速算技巧：÷8 = ÷2÷2÷2，连续除以2三次":p===9?u="速算技巧：÷9时，可以先看被除数各位数字之和是否为9的倍数":p===12?u="速算技巧：÷12 = ÷3÷4，先除以3再除以4":p===15?u="速算技巧：÷15 = ÷3÷5，先除以3再除以5":p===18&&(u="速算技巧：÷18 = ÷2÷9，先除以2再除以9"));break;default:i=100,o="50 + 50"}return{id:e,type:"mental",difficulty:t,question:o,answer:i,isDivision:l,quotient:c,remainder:d,explanation:u}}},wg=t=>{const e=Math.random().toString(36).substr(2,9);if(t==="basic"){let r,n,s=!1,o,i;if(Math.random()<.3)switch(Math.random()<.5?"addition":"subtraction"){case"addition":const d=He(10,999,2),u=He(10,999,2);n=Math.round((d+u)*100)/100,r=`${d} + ${u}`;break;case"subtraction":const f=He(10,999,2),p=He(10,999,2),w=Math.round((p+f)*100)/100;n=p,r=`${w} - ${f}`;break}else switch(Math.random()<.5?"multiplication":"division"){case"multiplication":const d=j(100,999),u=j(10,99);n=d*u,r=`${d} × ${u}`;break;case"division":const f=j(2,9);o=j(10,999),i=j(0,f-1);const p=o*f+i;s=!0,n=`${o}……${i}`,r=`${p} ÷ ${f}`;break}return{id:e,type:"written",difficulty:t,question:r,answer:n,isDivision:s,quotient:o,remainder:i}}else{const n=["addition","subtraction","multiplication","division"][j(0,3)];let s,o,i=!1,l,c;switch(n){case"addition":if(Math.random()<.5){const g=He(100,9999,3),v=He(100,9999,3);o=Math.round((g+v)*1e3)/1e3,s=`${g} + ${v}`}else{const g=j(100,9999),v=j(100,9999);o=g+v,s=`${g} + ${v}`}break;case"subtraction":if(Math.random()<.5){const g=He(100,9999,3),v=He(100,9999,3),_=Math.round((v+g)*1e3)/1e3;o=v,s=`${_} - ${g}`}else{const g=j(100,9999),v=j(100,9999),_=v+g;o=v,s=`${_} - ${g}`}break;case"multiplication":if(Math.random()<.5){const g=He(10,999,3),v=j(10,999),_=g*v;if(_<=999999)o=Math.round(_*1e3)/1e3,s=Math.random()<.5?`${g} × ${v}`:`${v} × ${g}`;else{const y=He(10,99,3),h=j(10,99);o=Math.round(y*h*1e3)/1e3,s=Math.random()<.5?`${y} × ${h}`:`${h} × ${y}`}}else{const g=j(10,999),v=j(10,999),_=g*v;if(_<=999999)o=_,s=`${g} × ${v}`;else{const y=j(10,99),h=j(10,99);o=y*h,s=`${y} × ${h}`}}break;case"division":const p=j(10,99);l=j(Math.ceil(100/p),Math.floor(9999/p)),c=j(0,p-1);const w=l*p+c;if(w>=100&&w<=9999)i=!0,o=`${l}……${c}`,s=`${w} ÷ ${p}`;else{const g=j(10,99),v=j(0,p-1),_=g*p+v;i=!0,o=`${g}……${v}`,s=`${_} ÷ ${p}`}break;default:o=5e4,s="25000 + 25000"}return{id:e,type:"written",difficulty:t,question:s,answer:o,isDivision:i,quotient:l,remainder:c}}},xg=t=>{const e=Math.random().toString(36).substr(2,9);if(t==="basic"){const r=["two_step_add_sub","two_step_mul_div","bracket_add_sub","bracket_mul_div","distributive_law","operation_order","simple_bracket_change"],n=[.25,.25,.2,.2,.15,.1,.05],s=Math.random();let o=0,i=r[0];for(let u=0;u<r.length;u++)if(o+=n[u],s<=o){i=r[u];break}let l,c,d;switch(i){case"two_step_add_sub":{const u=j(10,100),f=j(10,100),p=j(10,100);Math.random()<.5?(c=u+f-p,l=`${u} + ${f} - ${p}`):(c=u-f+p,l=`${u} - ${f} + ${p}`);break}case"two_step_mul_div":{if(Math.random()<.5){const u=j(10,100),f=j(2,20),p=j(2,9),w=u*f;if(w%p===0)c=w/p,l=`${u} × ${f} ÷ ${p}`;else{const g=j(2,20),v=j(2,9),_=v*j(2,10);c=g*_/v,l=`${g} × ${_} ÷ ${v}`}}else{const u=j(100,1e3),f=j(2,9),p=j(2,20),w=Math.floor(u/f)*f;c=w/f*p,l=`${w} ÷ ${f} × ${p}`}break}case"bracket_add_sub":{const u=j(10,50),f=j(10,50),p=j(2,20);if(Math.random()<.5)c=(u+f)*p,l=`(${u} + ${f}) × ${p}`;else{const w=Math.max(u,f)+j(1,20),g=Math.min(u,f);c=(w-g)*p,l=`(${w} - ${g}) × ${p}`}break}case"bracket_mul_div":{const u=j(50,200),f=j(2,20),p=j(2,10);if(Math.random()<.5)c=u+f*p,l=`${u} + ${f} × ${p}`;else{const w=f*p,g=Math.max(u,w+j(10,50));c=g-w,l=`${g} - ${f} × ${p}`}break}case"distributive_law":{const u=j(2,9),f=j(5,20),p=j(5,20);c=u*f+u*p,l=`${u} × ${f} + ${u} × ${p}`,d=`可以提取公因数 ${u}：${u} × (${f} + ${p}) = ${u} × ${f+p} = ${c}`;break}case"operation_order":{const u=j(10,50),f=j(2,15),p=j(2,10);c=u+f*p,l=`${u} + ${f} × ${p}`,d=`按运算顺序：先算乘法 ${f} × ${p} = ${f*p}，再算加法 ${u} + ${f*p} = ${c}`;break}case"simple_bracket_change":{const u=j(50,100),f=j(10,30),p=j(10,30),w=f+p,g=Math.max(u,w+j(10,30));c=g-w,l=`${g} - (${f} + ${p})`,d=`去括号：${g} - (${f} + ${p}) = ${g} - ${f} - ${p} = ${c}`;break}default:{const u=j(10,50),f=j(10,50);c=u+f,l=`${u} + ${f}`}}return{id:e,type:"mixed",difficulty:t,question:l,answer:c,explanation:d}}else{const r=["complex_brackets","distributive_advanced","trap_question","decimal_mixed","complex_operation_order","advanced_bracket_change","mixed_order_trap"],n=[.2,.25,.25,.1,.1,.05,.05],s=Math.random();let o=0,i=r[0];for(let u=0;u<r.length;u++)if(o+=n[u],s<=o){i=r[u];break}let l,c,d;switch(i){case"complex_brackets":{const u=j(5,30),f=j(5,30),p=j(2,15),w=j(2,10),g=j(2,8),_=(u+f)*p,y=_-w,h=Math.floor(y/g)*g,m=_-h;c=h/g,l=`((${u} + ${f}) × ${p} - ${m}) ÷ ${g}`;break}case"distributive_advanced":{const u=j(3,12),f=j(5,25),p=j(5,25),w=j(2,10);Math.random()<.5?(c=u*(f+p)+w,l=`${u} × ${f} + ${u} × ${p} + ${w}`,d=`先提取公因数：${u} × (${f} + ${p}) + ${w} = ${u} × ${f+p} + ${w} = ${u*(f+p)} + ${w} = ${c}`):(c=u*f+u*p,l=`${u} × ${f} + ${u} × ${p}`,d=`可以提取公因数：${u} × (${f} + ${p}) = ${u} × ${f+p} = ${c}`);break}case"trap_question":{const u=j(10,50),f=j(10,50),p=j(3,8),w=j(3,8);c=u*p+f*w,l=`${u} × ${p} + ${f} × ${w}`,d=`注意：这题不能简便运算，需要分别计算再相加：${u*p} + ${f*w} = ${c}`;break}case"decimal_mixed":{const u=He(5,50,1),f=He(5,50,1),p=j(2,10),w=He(1,20,1);Math.random()<.5?(c=Math.round(((u+f)*p-w)*10)/10,l=`(${u} + ${f}) × ${p} - ${w}`):(c=Math.round((u*p+f-w)*10)/10,l=`${u} × ${p} + ${f} - ${w}`);break}case"complex_operation_order":{const u=j(20,80),f=j(3,15),p=j(2,10),w=j(20,100),g=j(2,10),v=Math.floor(w/g)*g;c=u+f*p-v/g,l=`${u} + ${f} × ${p} - ${v} ÷ ${g}`,d=`按运算顺序：先算 ${f} × ${p} = ${f*p} 和 ${v} ÷ ${g} = ${v/g}，再算 ${u} + ${f*p} - ${v/g} = ${c}`;break}case"advanced_bracket_change":{const u=j(50,120),f=j(30,80),p=j(10,40),w=Math.max(f,p+j(5,20)),g=Math.max(u,w+j(10,30));c=g-w+p,l=`${g} - (${w} - ${p})`,d=`去括号变号：${g} - (${w} - ${p}) = ${g} - ${w} + ${p} = ${c}`;break}case"mixed_order_trap":{const u=j(5,15),f=j(3,12),p=j(4,16),w=j(2,8),g=j(10,50);c=u*f+p*w-g,l=`${u} × ${f} + ${p} × ${w} - ${g}`,d=`按运算顺序：先算乘法 ${u} × ${f} = ${u*f}，${p} × ${w} = ${p*w}，再算 ${u*f} + ${p*w} - ${g} = ${c}`;break}default:{const u=j(10,50),f=j(10,50),p=j(2,10);c=(u+f)*p,l=`(${u} + ${f}) × ${p}`}}return{id:e,type:"mixed",difficulty:t,question:l,answer:c,explanation:d}}},_g=t=>{const e=Math.random().toString(36).substr(2,9);if(t==="basic")switch(["commutative","associative","judgment"][j(0,2)]){case"commutative":{const s=j(5,50),o=j(5,50),i=`${s} + __ = __ + ${s}`;return{id:e,type:"properties",difficulty:t,question:i,answer:o,explanation:"根据加法交换律：a + b = b + a"}}case"associative":{const s=j(5,30),o=j(5,30),i=j(5,30),l=`(${s} + ${o}) + ${i} = ${s} + (__ + ${i})`;return{id:e,type:"properties",difficulty:t,question:l,answer:o,explanation:"根据加法结合律：(a + b) + c = a + (b + c)"}}case"judgment":{const s=j(5,20),o=j(5,20),i=Math.random()<.5,l=i?o+s:o+s+1,c=`判断：${s} + ${o} = ${l} 是否正确？`;return{id:e,type:"properties",difficulty:t,question:c,answer:i?"正确":"错误",isMultipleChoice:!0,choices:["正确","错误"],correctChoice:i?0:1}}default:return{id:e,type:"properties",difficulty:t,question:"5 + 3 = 3 + __",answer:5}}else switch(["distributive","factoring","comparison"][j(0,2)]){case"distributive":{const s=j(3,15),o=j(5,25),i=j(5,25),l=`${s} × (${o} + ${i}) = ${s} × __ + ${s} × __`;return{id:e,type:"properties",difficulty:t,question:l,answer:`${o}, ${i}`,explanation:"根据乘法分配律：a × (b + c) = a × b + a × c"}}case"factoring":{const s=j(3,12),o=j(5,20),i=j(5,20),l=`${s} × ${o} + ${s} × ${i} = __ × (${o} + ${i})`;return{id:e,type:"properties",difficulty:t,question:l,answer:s,explanation:"提取公因数：ab + ac = a(b + c)"}}case"comparison":{const s=j(5,20),o=j(5,20),i=j(5,20),l=`比较：${s} × (${o} + ${i}) __ ${s} × ${o} + ${s} × ${i}`;return{id:e,type:"properties",difficulty:t,question:l,answer:"=",isMultipleChoice:!0,choices:[">","<","="],correctChoice:2,explanation:"根据乘法分配律，两式相等"}}default:return{id:e,type:"properties",difficulty:t,question:"3 × (4 + 5) = 3 × __ + 3 × __",answer:"4, 5"}}},bg=t=>{const e=[],r=["+","-","×","÷"];for(const s of r)for(let o=0;o<5;o++){const i=Math.random().toString(36).substr(2,9);let l,c,d=!1,u,f,p;const w=Math.random()<.25;switch(s){case"+":if(w){const _=j(2,9)*100,y=j(1,20),h=j(1,20),m=_-y,x=_+h;c=m+x,l=`${m} + ${x}`,p=`可以凑整计算：${m} + ${x} = (${_} - ${y}) + (${_} + ${h}) = ${_*2} + ${h-y} = ${c}`}else{const _=j(100,9999),y=j(100,9999);c=_+y,l=`${_} + ${y}`}break;case"-":if(w){const _=j(3,9)*100,y=j(1,15),h=j(1e3,9999),m=_-y;c=h-m,l=`${h} - ${m}`,p=`可以这样计算：${h} - ${m} = ${h} - ${_} + ${y} = ${h-_} + ${y} = ${c}`}else{const _=j(100,9999),y=j(100,9999),h=y+_;c=y,l=`${h} - ${_}`}break;case"×":if(w){const _=j(2,9)*(Math.random()<.5?10:100),y=j(1,Math.min(10,_/10)),h=j(2,9),m=_+(Math.random()<.5?y:-y);c=m*h,l=`${m} × ${h}`,p=`可以分解计算：${m} × ${h} = (${_} ${m>_?"+":"-"} ${Math.abs(m-_)}) × ${h} = ${_*h} ${m>_?"+":"-"} ${Math.abs(m-_)*h} = ${c}`}else if((Math.random()<.5?"two_tens":"single_multi")==="two_tens"){const y=j(10,99),h=j(10,99);c=y*h,l=`${y} × ${h}`}else{const y=j(2,9),h=j(10,9999);Math.random()<.5?(c=y*h,l=`${y} × ${h}`):(c=h*y,l=`${h} × ${y}`)}break;case"÷":const g=j(3,19);u=j(Math.ceil(100/g),Math.floor(9999/g)),f=j(0,g-1);const v=u*g+f;d=!0,c=`${u}……${f}`,l=`${v} ÷ ${g}`,w&&f===0&&(g===4?p="速算技巧：÷4 = ÷2÷2，先除以2再除以2":g===6?p="速算技巧：÷6 = ÷2÷3，先除以2再除以3":g===8?p="速算技巧：÷8 = ÷2÷2÷2，连续除以2三次":g===9?p="速算技巧：÷9时，可以先看被除数各位数字之和是否为9的倍数":g===12?p="速算技巧：÷12 = ÷3÷4，先除以3再除以4":g===15?p="速算技巧：÷15 = ÷3÷5，先除以3再除以5":g===18&&(p="速算技巧：÷18 = ÷2÷9，先除以2再除以9"));break}e.push({id:i,type:"mental",difficulty:t,question:l,answer:c,isDivision:d,quotient:u,remainder:f,explanation:p})}for(let s=e.length-1;s>0;s--){const o=Math.floor(Math.random()*(s+1));[e[s],e[o]]=[e[o],e[s]]}return e},Do=(t,e)=>{const n={mental:20,written:10,mixed:10,properties:5}[t],s=[];if(t==="mental"&&e==="challenge")return bg(e);for(let o=0;o<n;o++){let i;switch(t){case"mental":i=_u(e);break;case"written":i=wg(e);break;case"mixed":i=xg(e);break;case"properties":i=_g(e);break;default:i=_u(e)}s.push(i)}return s};function Oo(t,e){const[r,n]=$.useState(()=>{try{const o=window.localStorage.getItem(t);return o?JSON.parse(o):e}catch(o){return console.error(`Error reading localStorage key "${t}":`,o),e}});return[r,o=>{try{if(o instanceof Function)n(i=>{const l=o(i);try{window.localStorage.setItem(t,JSON.stringify(l))}catch(c){console.error(`Error setting localStorage key "${t}":`,c),c instanceof Error&&c.name==="QuotaExceededError"&&console.warn("localStorage quota exceeded, attempting to free space...")}return l});else{n(o);try{window.localStorage.setItem(t,JSON.stringify(o))}catch(i){console.error(`Error setting localStorage key "${t}":`,i),i instanceof Error&&i.name==="QuotaExceededError"&&console.warn("localStorage quota exceeded, attempting to free space...")}}}catch(i){console.error(`Error in setValue for localStorage key "${t}":`,i)}}]}const bu="whosyourdaddy",kg=()=>{const[t,e]=Oo("userManager",{currentUser:null,users:[]});$.useEffect(()=>{if(!t.users.some(f=>f.name.toLowerCase()===bu.toLowerCase())){const f={id:"dev_"+Date.now().toString(),name:bu,createdAt:Date.now(),lastLoginAt:0,isDeveloper:!0};e(p=>({...p,users:[...p.users,f]}))}},[t.users,e]);const r=$.useRef(!1);$.useEffect(()=>{if(r.current)return;r.current=!0;const u=t.currentUser,f=t.users;if(!u)return;(!f.some(g=>g.id===u.id)||u.isDeveloper===!0)&&e(g=>({...g,currentUser:null}))},[e]);const n=$.useCallback(u=>{if(!u.trim()||t.users.find(w=>w.name.toLowerCase()===u.toLowerCase()))return null;const p={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:u.trim(),createdAt:Date.now(),lastLoginAt:Date.now()};return e(w=>({currentUser:p,users:[...w.users,p]})),p},[t.users,e]),s=$.useCallback(u=>{const f=t.users.find(w=>w.id===u);if(!f)return!1;const p={...f,lastLoginAt:Date.now()};return e(w=>({currentUser:p,users:w.users.map(g=>g.id===u?p:g)})),!0},[t.users,e]),o=$.useCallback(()=>{e(u=>({...u,currentUser:null}))},[e]),i=$.useCallback(u=>{var p;const f=t.users.find(w=>w.id===u);return f!=null&&f.isDeveloper?!1:(((p=t.currentUser)==null?void 0:p.id)===u&&o(),e(w=>({...w,users:w.users.filter(g=>g.id!==u)})),!0)},[t.currentUser,t.users,e,o]),l=$.useCallback(()=>{var u;return((u=t.currentUser)==null?void 0:u.name)||"Guest"},[t.currentUser]),c=$.useCallback(()=>t.currentUser!==null,[t.currentUser]),d=$.useCallback(()=>{var u;return((u=t.currentUser)==null?void 0:u.isDeveloper)===!0},[t.currentUser]);return{currentUser:t.currentUser,users:t.users,createUser:n,loginUser:s,switchUser:o,deleteUser:i,getCurrentUserName:l,isLoggedIn:c,isDeveloper:d}},hf=()=>{const[t,e]=Oo("historyRecords",[]),[r,n]=Oo("incompleteHistoryRecords",[]),[s,o]=$.useState(0);$.useEffect(()=>{if(s>0)try{const g=localStorage.getItem("historyRecords");if(g)try{const _=JSON.parse(g);e(_)}catch(_){console.error("Failed to parse history records:",_),localStorage.removeItem("historyRecords"),e([])}const v=localStorage.getItem("incompleteHistoryRecords");if(v)try{const _=JSON.parse(v);n(_)}catch(_){console.error("Failed to parse incomplete history records:",_),localStorage.removeItem("incompleteHistoryRecords"),n([])}}catch(g){console.error("Failed to refresh records from localStorage:",g)}},[s]);const i=$.useCallback((g,v)=>{if(!g.isCompleted||!v)return"";const _=g.endTime&&g.startTime?Math.round((g.endTime-g.startTime)/1e3):0,y=g.totalProblems>0?Math.round(g.correctAnswers/g.totalProblems*100):0,h=g.totalProblems>0?Math.round(_/g.totalProblems):0,m={id:Date.now().toString()+Math.random().toString(36).substr(2,9),userId:v,date:g.endTime||Date.now(),problemType:g.problemType,difficulty:g.difficulty,totalProblems:g.totalProblems,correctAnswers:g.correctAnswers,accuracy:y,totalTime:_,averageTime:h,problems:g.problems,answers:g.answers,answerTimes:g.answerTimes,score:g.score};return e(x=>[m,...x]),g.sessionId&&n(x=>x.filter(k=>k.sessionId!==g.sessionId)),m.id},[e,n]),l=$.useCallback((g,v)=>{if(!v||g.length===0)return[];const _=[],y=[];return g.forEach(h=>{if(!h.isCompleted)return;const m=h.endTime&&h.startTime?Math.round((h.endTime-h.startTime)/1e3):0,x=h.totalProblems>0?Math.round(h.correctAnswers/h.totalProblems*100):0,k=h.totalProblems>0?Math.round(m/h.totalProblems):0,b=Date.now().toString()+Math.random().toString(36).substr(2,9),S={id:b,userId:v,date:h.endTime||Date.now(),problemType:h.problemType,difficulty:h.difficulty,totalProblems:h.totalProblems,correctAnswers:h.correctAnswers,accuracy:x,totalTime:m,averageTime:k,problems:h.problems,answers:h.answers,answerTimes:h.answerTimes,score:h.score};_.push(S),y.push(b)}),e(h=>[..._,...h]),y},[e]),c=$.useCallback(()=>{o(g=>g+1);try{const g=localStorage.getItem("historyRecords");if(g){const _=JSON.parse(g);console.log("[refreshRecords] 强制更新完成记录状态:",_.length),e([..._])}const v=localStorage.getItem("incompleteHistoryRecords");if(v){const _=JSON.parse(v);console.log("[refreshRecords] 强制更新未完成记录状态:",_.length),n([..._])}}catch(g){console.error("[refreshRecords] 强制刷新失败:",g)}return!0},[e,n]),d=$.useCallback(g=>t.filter(v=>v.userId===g).sort((v,_)=>_.date-v.date),[t]),u=$.useCallback(g=>t.find(v=>v.id===g)||null,[t]),f=$.useCallback(g=>(e(v=>v.filter(_=>_.id!==g)),!0),[e]),p=$.useCallback(g=>(e(v=>v.filter(_=>_.userId!==g)),!0),[e]),w=$.useCallback(g=>{const v=d(g);if(v.length===0)return{totalSessions:0,totalProblems:0,totalCorrectAnswers:0,averageAccuracy:0,totalTimeSpent:0,bestAccuracy:0,recentSessions:[]};const _=v.length,y=v.reduce((S,C)=>S+C.totalProblems,0),h=v.reduce((S,C)=>S+C.correctAnswers,0),m=y>0?Math.round(h/y*100):0,x=v.reduce((S,C)=>S+C.totalTime,0),k=Math.max(...v.map(S=>S.accuracy)),b=v.slice(0,5);return{totalSessions:_,totalProblems:y,totalCorrectAnswers:h,averageAccuracy:m,totalTimeSpent:x,bestAccuracy:k,recentSessions:b}},[d]);return{historyRecords:t,saveRecord:i,saveRecords:l,refreshRecords:c,getUserRecords:d,getRecordById:u,deleteRecord:f,clearUserRecords:p,getUserStats:w,incompleteHistoryRecords:r,upsertIncompleteRecord:(g,v,_)=>{if(!v||!g.isActive||g.isCompleted||!g.problemType||!g.difficulty)return!1;const y=g.answers.filter(C=>C!==void 0).length,h=g.correctAnswers,m=g.totalProblems>0&&y>0?Math.round(h/y*100):0,x=g.answerTimes.filter(C=>typeof C=="number").reduce((C,R)=>C+(R||0),0),k=y>0?Math.round(x/y):0,b=typeof _=="number"?_:Date.now(),S={id:g.sessionId||`${v}_${b}`,sessionId:g.sessionId||`${v}_${b}`,userId:v,date:b,problemType:g.problemType,difficulty:g.difficulty,totalProblems:y,correctAnswers:h,accuracy:m,totalTime:x,averageTime:k,problems:g.problems,answers:g.answers,answerTimes:g.answerTimes,score:g.score,plannedTotalProblems:g.totalProblems,synced:!1,timestamp:b};return n(C=>{const R=C.findIndex(D=>D.sessionId===S.sessionId&&D.userId===v);if(R>=0){const D=C.slice(),T=D[R];return D[R]={...S,synced:T.synced??!1},D}return[S,...C]}),!0},mergeServerRecords:(g,v)=>{if(!Array.isArray(g)||g.length===0)return 0;let _=0;return e(y=>{const h=new Map(y.map(b=>[b.id,b])),m=new Map,x=[];for(const b of g){if(b.user_id!==v)continue;const S=(b.client_id||"").toString();if(!S)continue;let C={id:S,userId:v,date:new Date(b.date).getTime(),problemType:b.problem_type,difficulty:b.difficulty,totalProblems:b.total_problems,correctAnswers:b.correct_answers,accuracy:typeof b.accuracy=="number"?Math.round(b.accuracy):Number(b.accuracy||0),totalTime:b.total_time,averageTime:typeof b.average_time=="number"?Math.round(b.average_time):Number(b.average_time||0),problems:b.problems??[],answers:b.answers??[],answerTimes:b.answer_times??[],score:b.score};const R=h.get(S);if(R)if(R.userId!==v){console.warn(`[mergeServerRecords] 数据冲突: client_id ${S} 在本地属于用户 ${R.userId}, 但服务端属于用户 ${v}`);const D=`conflict_${Date.now()}_${S}`;C={...C,id:D},console.error(`[mergeServerRecords] 创建冲突记录: ${D}, 原始服务端数据:`,b),x.push(C),_+=1}else(R.date!==C.date||R.score!==C.score||R.correctAnswers!==C.correctAnswers||R.totalProblems!==C.totalProblems||R.accuracy!==C.accuracy||R.totalTime!==C.totalTime)&&(C.date>=R.date?(m.set(S,C),_+=1):console.log(`[mergeServerRecords] 保留本地较新数据: ${S}`));else x.push(C),_+=1}if(m.size===0&&x.length===0)return y;const k=y.map(b=>m.get(b.id)??b);return x.length>0&&k.unshift(...x),k}),_},getUserIncompleteRecords:g=>r.filter(v=>v.userId===g).sort((v,_)=>_.date-v.date),removeIncompleteBySession:g=>(n(v=>v.filter(_=>_.sessionId!==g)),!0),clearUserIncompleteRecords:g=>(n(v=>v.filter(_=>_.userId!==g)),!0),cleanupDuplicateIncompleteRecords:g=>{n(v=>{console.log(`[cleanupDuplicateIncompleteRecords] 开始清理用户 ${g} 的重复记录，当前数量: ${v.length}`);const _=new Map,y=v.filter(h=>{if(h.userId!==g)return!0;const m=h.sessionId||h.id,x=_.get(m);return!x||h.date>x.date?(_.set(m,h),!0):!1});return console.log(`[cleanupDuplicateIncompleteRecords] 清理完成，从 ${v.length} 条减少到 ${y.length} 条`),y})},mergeServerIncompleteRecords:(g,v)=>{console.log(`[mergeServerIncompleteRecords] 开始合并 ${g.length} 条服务端未完成记录`),console.log("[mergeServerIncompleteRecords] 服务端记录详情:",g);const _=r;console.log(`[mergeServerIncompleteRecords] 当前本地记录数: ${_.length}`);const y=(()=>{const C=new Map,R=_.filter(I=>{const re=I.sessionId||I.id;return C.has(re)?(console.log(`[mergeServerIncompleteRecords] 发现重复本地记录，跳过: ${re}`),!1):(C.set(re,I),!0)});R.length!==_.length&&console.log(`[mergeServerIncompleteRecords] 发现 ${_.length-R.length} 条重复本地记录，将在合并时一并处理`);const D=new Map(R.map(I=>[I.sessionId||I.id,I])),T=new Map,E=[];let B=0;for(const I of g){const re=I.client_id;if(console.log(`[mergeServerIncompleteRecords] 处理记录 client_id: ${re}`),!re){console.warn("[mergeServerIncompleteRecords] 跳过无client_id记录:",I);continue}const he={id:re,sessionId:re,userId:v,date:new Date(I.date).getTime(),problemType:I.problem_type,difficulty:I.difficulty,totalProblems:I.total_problems,correctAnswers:I.correct_answers,accuracy:I.accuracy,totalTime:I.total_time,averageTime:I.average_time,problems:I.problems,answers:I.answers,answerTimes:I.answer_times,score:I.score,plannedTotalProblems:I.planned_total_problems,synced:!0,timestamp:new Date(I.date).getTime()};console.log("[mergeServerIncompleteRecords] 转换后的记录:",he);const oe=D.get(re);if(oe)if(console.log("[mergeServerIncompleteRecords] 找到本地记录:",oe),oe.userId!==v){console.warn(`[mergeServerIncompleteRecords] 冲突: 本地记录 ${oe.id} 已属于用户 ${oe.userId}, 但服务端记录属于 ${v}`);continue}else{const O=oe.date!==he.date||oe.score!==he.score||oe.correctAnswers!==he.correctAnswers||oe.totalProblems!==he.totalProblems||oe.accuracy!==he.accuracy||oe.totalTime!==he.totalTime||oe.synced!==he.synced;console.log(`[mergeServerIncompleteRecords] 是否需要更新: ${O}`),O?he.date>=oe.date?(T.set(re,he),B+=1,console.log(`[mergeServerIncompleteRecords] 更新本地记录: ${re}`)):console.log(`[mergeServerIncompleteRecords] 保留本地较新数据: ${re}`):console.log(`[mergeServerIncompleteRecords] 记录无需更新: ${re}`)}else console.log(`[mergeServerIncompleteRecords] 添加新记录: ${re}`),E.push(he),B+=1}return console.log(`[mergeServerIncompleteRecords] 待更新: ${T.size}, 待添加: ${E.length}`),{updates:T,toAppend:E,affected:B,dedupedCurrent:R}})(),{updates:h,toAppend:m,affected:x,dedupedCurrent:k}=y,b=k.length!==_.length,S=h.size>0||m.length>0;return!b&&!S?(console.log("[mergeServerIncompleteRecords] 无变化，不更新状态"),0):(n(()=>{const C=k.map(R=>h.get(R.sessionId||R.id)??R);return m.length>0&&C.unshift(...m),console.log(`[mergeServerIncompleteRecords] 最终状态更新: ${_.length} → ${C.length} (去重: ${b?"是":"否"}, 合并: ${x}条)`),C}),console.log(`[mergeServerIncompleteRecords] 合并完成，新增 ${x} 条服务端记录 ${b?"(同时进行了去重)":""}`),x)},markIncompleteRecordAsSynced:g=>(n(v=>v.map(y=>y.sessionId===g?{...y,synced:!0}:y)),!0)}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(t,e)=>{const r=$.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,...d},u)=>$.createElement("svg",{ref:u,...Sg,width:s,height:s,stroke:n,strokeWidth:i?Number(o)*24/Number(s):o,className:["lucide",`lucide-${jg(t)}`,l].join(" "),...d},[...e.map(([f,p])=>$.createElement(f,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=K("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=K("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=K("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=K("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=K("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=K("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=K("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=K("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=K("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=K("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=K("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=K("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=K("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=K("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=K("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=K("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=K("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=K("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=K("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=K("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=K("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=K("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=K("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=K("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Wg=[{type:"mental",name:"口算",description:"心算练习，培养数感",icon:"🧠",color:"bg-blue-500",count:20},{type:"written",name:"笔算",description:"竖式计算，规范书写",icon:"✏️",color:"bg-green-500",count:10},{type:"mixed",name:"多步复合算式",description:"综合运算，逻辑思维",icon:"🔢",color:"bg-purple-500",count:10},{type:"properties",name:"运算律与规则",description:"运算规律，灵活应用",icon:"📐",color:"bg-orange-500",count:5}],Vg=({selectedType:t,onTypeChange:e})=>a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:Wg.map(r=>a.jsxs("button",{onClick:()=>e(r.type),className:`
            p-6 rounded-2xl border-3 transition-all duration-200 transform hover:scale-105 text-left
            ${t===r.type?`${r.color} text-white border-white shadow-lg`:"bg-white text-gray-700 border-gray-200 hover:border-gray-300 hover:shadow-md"}
          `,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:"text-3xl",children:r.icon}),a.jsxs("div",{className:`
              px-3 py-1 rounded-full text-sm font-medium
              ${t===r.type?"bg-white bg-opacity-20 text-white":"bg-gray-100 text-gray-600"}
            `,children:[r.count,"题"]})]}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:r.name}),a.jsx("p",{className:`text-sm ${t===r.type?"text-white text-opacity-90":"text-gray-600"}`,children:r.description})]},r.type))}),Kg=[{level:"basic",label:"基础难度",icon:vf,color:"bg-green-500",description:"适合初学者，循序渐进"},{level:"challenge",label:"挑战难度",icon:qg,color:"bg-red-500",description:"提升能力，挑战自我"}],Jg=({selectedDifficulty:t,onDifficultyChange:e})=>a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:Kg.map(({level:r,label:n,icon:s,color:o,description:i})=>a.jsxs("button",{onClick:()=>e(r),className:`
            p-6 rounded-2xl border-3 transition-all duration-200 transform hover:scale-105 text-left
            ${t===r?`${o} text-white border-white shadow-lg`:"bg-white text-gray-700 border-gray-200 hover:border-gray-300 hover:shadow-md"}
          `,children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(s,{className:"w-8 h-8 mr-3"}),a.jsx("h3",{className:"text-xl font-bold",children:n})]}),a.jsx("p",{className:`text-sm ${t===r?"text-white text-opacity-90":"text-gray-600"}`,children:i})]},r))}),Gg=(t,e)=>({mental:{basic:"数值范围：0-1000，包含进位/借位的两位数加减法和九九乘法表内乘除法",challenge:"数值范围：最高10000，包含简单小数，需要运用凑整、分配律等速算技巧"},written:{basic:"数值范围：不超过100000，三位数乘两位数、四位数加减、三位数除以一位数",challenge:"数值范围：可达1000000，多位数乘除法，可能包含0，或带括号的减法"},mixed:{basic:"3-4个项目，一层括号，25%几率出现可化简题目",challenge:"4-5个项目，两层括号，可能包含小数，25%出现需要化简的题目"},properties:{basic:"着重交换律、结合律，判断对错、简单填空",challenge:"加入分配律、提公因式，比较运算、化简计算"}})[t][e],Qg=({selectedType:t,selectedDifficulty:e,onTypeChange:r,onDifficultyChange:n,onStartGame:s})=>a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"flex items-center justify-center mb-4",children:[a.jsx(Tg,{className:"w-12 h-12 text-blue-500 mr-3"}),a.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"小学数学练习"})]}),a.jsx("p",{className:"text-lg text-gray-600",children:"选择练习类型和难度，开始你的数学之旅"})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"选择练习类型"}),a.jsx(Vg,{selectedType:t,onTypeChange:r}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"选择难度级别"}),a.jsx(Jg,{selectedDifficulty:e,onDifficultyChange:n}),a.jsxs("div",{className:"bg-blue-50 p-6 rounded-2xl mb-8",children:[a.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-3",children:"📋 本次练习内容"}),a.jsx("p",{className:"text-blue-700 leading-relaxed",children:Gg(t,e)})]}),a.jsxs("button",{onClick:s,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white text-2xl font-bold py-6 px-8 rounded-2xl transition-all duration-200 transform hover:scale-105 flex items-center justify-center shadow-lg",children:[a.jsx(yf,{className:"w-8 h-8 mr-3"}),"开始练习"]})]})]}),Yg=({problem:t,problemIndex:e,totalProblems:r,onAnswer:n,onNext:s,showResult:o,isCorrect:i,userAnswer:l})=>{var k,b;const[c,d]=$.useState(""),[u,f]=$.useState(null),[p,w]=$.useState(""),[g,v]=$.useState("");$.useEffect(()=>{d(""),f(null),w(""),v("")},[t.id]);const _=S=>{if(S.preventDefault(),t.isMultipleChoice)u!==null&&n(u);else if(t.isDivision){const C=parseInt(p)||0,R=parseInt(g)||0,D=R===0?C.toString():`${C}……${R}`;n(D)}else c.trim()!==""&&n(c.trim())},y=S=>{f(S),n(S)},h=()=>t.isMultipleChoice?u!==null:t.isDivision?p.trim()!=="":c.trim()!=="",m=S=>{if(t.isDivision&&typeof S=="string")if(S.includes("……")){const[C,R]=S.split("……");return`商: ${C}, 余数: ${R}`}else return`商: ${S}, 余数: 0`;return S},x=()=>{var S;return t.isDivision?t.remainder===0?`商: ${t.quotient}, 余数: 0`:`商: ${t.quotient}, 余数: ${t.remainder}`:t.isMultipleChoice?(S=t.choices)==null?void 0:S[t.correctChoice]:t.answer};return a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["第 ",e+1," 题 / 共 ",r," 题"]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Xt,{className:"w-4 h-4 mr-1"}),"进行中"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(e+1)/r*100}%`}})})]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4 leading-relaxed",children:t.question}),t.type==="written"&&a.jsx("div",{className:"text-sm text-gray-600 bg-yellow-50 p-3 rounded-lg mb-4",children:"💡 提示：这是笔算题，建议在草稿纸上列竖式计算"}),t.isDivision&&a.jsx("div",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg mb-4",children:"📝 提示：请分别填写商和余数。如果能整除，余数填0或留空"})]}),o?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`text-center p-6 rounded-2xl ${i?"bg-green-50":"bg-red-50"}`,children:[a.jsx("div",{className:`text-6xl mb-4 ${i?"text-green-500":"text-red-500"}`,children:i?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(Wl,{className:"w-12 h-12"}),a.jsx("span",{className:"ml-3 text-2xl font-bold",children:"正确！"})]}):a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(lr,{className:"w-12 h-12"}),a.jsx("span",{className:"ml-3 text-2xl font-bold",children:"错误"})]})}),a.jsxs("div",{className:"space-y-2 text-lg",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"你的答案："}),a.jsx("span",{className:`font-bold ml-2 ${i?"text-green-600":"text-red-600"}`,children:t.isMultipleChoice?(b=t.choices)==null?void 0:b[l]:m(l)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"正确答案："}),a.jsx("span",{className:"font-bold text-green-600 ml-2",children:x()})]})]})]}),t.explanation&&a.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[a.jsx("h4",{className:"font-bold text-blue-800 mb-2",children:"💡 解题思路："}),a.jsx("p",{className:"text-blue-700",children:t.explanation})]}),a.jsx("button",{onClick:s,className:"w-full bg-green-500 hover:bg-green-600 text-white text-xl font-bold py-4 px-8 rounded-2xl transition-all duration-200 transform hover:scale-105 flex items-center justify-center",children:e+1<r?a.jsxs(a.Fragment,{children:[a.jsx($g,{className:"w-6 h-6 mr-2"}),"下一题"]}):a.jsxs(a.Fragment,{children:[a.jsx(Wl,{className:"w-6 h-6 mr-2"}),"完成练习"]})})]}):a.jsx("div",{className:"space-y-6",children:t.isMultipleChoice?a.jsx("div",{className:"space-y-3",children:(k=t.choices)==null?void 0:k.map((S,C)=>a.jsx("button",{onClick:()=>y(C),className:`
                    w-full p-4 text-left rounded-xl border-2 transition-all duration-200
                    ${u===C?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}
                  `,children:a.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+C),". ",S]})},C))}):t.isDivision?a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-lg font-medium text-gray-700 mb-2",children:"商"}),a.jsx("input",{type:"number",value:p,onChange:S=>w(S.target.value),className:"w-full text-2xl text-center p-4 border-3 border-gray-300 rounded-2xl focus:border-blue-500 focus:outline-none",placeholder:"商",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-lg font-medium text-gray-700 mb-2",children:"余数"}),a.jsx("input",{type:"number",value:g,onChange:S=>v(S.target.value),className:"w-full text-2xl text-center p-4 border-3 border-gray-300 rounded-2xl focus:border-blue-500 focus:outline-none",placeholder:"余数",min:"0"})]})]}),a.jsx("button",{type:"submit",disabled:!h(),className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white text-xl font-bold py-4 px-8 rounded-2xl transition-all duration-200 transform hover:scale-105 disabled:hover:scale-100",children:"提交答案"})]}):a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsx("input",{type:"text",value:c,onChange:S=>d(S.target.value),className:"w-full text-2xl text-center p-4 border-3 border-gray-300 rounded-2xl focus:border-blue-500 focus:outline-none",placeholder:"请输入答案",autoFocus:!0}),a.jsx("button",{type:"submit",disabled:!h(),className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white text-xl font-bold py-4 px-8 rounded-2xl transition-all duration-200 transform hover:scale-105 disabled:hover:scale-100",children:"提交答案"})]})})]})},Xg=({session:t,onRestart:e,onHome:r})=>{const[n,s]=ld.useState("summary"),o=t.totalProblems>0?Math.round(t.correctAnswers/t.totalProblems*100):0,i=t.endTime&&t.startTime?Math.round((t.endTime-t.startTime)/1e3):0,c=(h=>h>=90?{message:"太棒了！你是数学小天才！",icon:Eg,color:"text-yellow-500"}:h>=80?{message:"很好！继续保持！",icon:vf,color:"text-green-500"}:h>=70?{message:"不错！还有进步空间！",icon:Ig,color:"text-blue-500"}:{message:"没关系，多练习就会进步！",icon:Ug,color:"text-orange-500"})(o),d=h=>{const m=new Date(h);return{date:m.toLocaleDateString("zh-CN"),time:m.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}},u=h=>({mental:"口算",written:"笔算",mixed:"多步复合算式",properties:"运算律与规则"})[h]||h,f=h=>({basic:"基础难度",challenge:"挑战难度"})[h]||h,p=d(t.startTime),w=t.endTime?d(t.endTime):null,g=(h,m)=>{var b;if(h.isMultipleChoice)return m===h.correctChoice;const x=m.toString().toLowerCase().trim(),k=h.answer.toString().toLowerCase().trim();if(h.isDivision&&h.remainder===0){const S=(b=h.quotient)==null?void 0:b.toString();return x===k||x===S}return x===k},v=(h,m)=>{var x;return h.isMultipleChoice?((x=h.choices)==null?void 0:x[m])||"未选择":h.isDivision&&typeof m=="string"?m.includes("……")?`商: ${m.split("……")[0]}, 余: ${m.split("……")[1]}`:`商: ${m}, 余: 0`:m.toString()},_=h=>{var m;return h.isDivision?`商: ${h.quotient}, 余: ${h.remainder}`:h.isMultipleChoice?(m=h.choices)==null?void 0:m[h.correctChoice]:h.answer},y=c.icon;return a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 sm:p-8 text-center",children:[a.jsxs("div",{className:`flex items-center justify-center mb-2 ${c.color}`,children:[a.jsx(y,{className:"w-8 h-8 mr-3"}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"练习完成！"})]}),a.jsx("p",{className:`text-lg font-medium mb-6 ${c.color}`,children:c.message}),a.jsxs("div",{className:"flex bg-gray-100 rounded-2xl p-1 mb-6",children:[a.jsxs("button",{onClick:()=>s("summary"),className:`flex-1 py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center ${n==="summary"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:[a.jsx(Hl,{className:"w-5 h-5 mr-2"})," 成绩总结"]}),a.jsxs("button",{onClick:()=>s("details"),className:`flex-1 py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center ${n==="details"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:[a.jsx(mf,{className:"w-5 h-5 mr-2"})," 答题详情"]})]}),n==="summary"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-indigo-50 p-4 rounded-2xl mb-6 text-left",children:[a.jsxs("h3",{className:"text-base font-bold text-indigo-800 mb-3 flex items-center",children:[a.jsx(Dg,{className:"w-5 h-5 mr-2"}),"本次练习信息"]}),a.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm text-indigo-700",children:[{icon:ff,label:"练习日期",value:p.date},{icon:Xt,label:"开始时间",value:p.time},{icon:null,label:"📚 题型",value:u(t.problemType||"")},{icon:null,label:"⭐ 难度",value:f(t.difficulty||"")},...w?[{icon:Xt,label:"完成时间",value:w.time}]:[]].map((h,m)=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"flex items-center",children:[h.icon&&a.jsx(h.icon,{className:"w-4 h-4 mr-1.5"}),h.label]}),a.jsx("span",{className:"font-medium text-indigo-800",children:h.value})]},m))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl",children:[a.jsx(Gl,{className:"w-8 h-8 text-blue-500 mx-auto mb-1"}),a.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[t.correctAnswers,"/",t.totalProblems]}),a.jsx("div",{className:"text-sm text-blue-600",children:"答对题数"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-2xl",children:[a.jsx(Jl,{className:"w-8 h-8 text-green-500 mx-auto mb-1"}),a.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[o,"%"]}),a.jsx("div",{className:"text-sm text-green-600",children:"正确率"})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl",children:[a.jsx(Xt,{className:"w-8 h-8 text-purple-500 mx-auto mb-1"}),a.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[Math.floor(i/60),":",(i%60).toString().padStart(2,"0")]}),a.jsx("div",{className:"text-sm text-purple-600",children:"用时"})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl text-left",children:[a.jsx("h3",{className:"text-base font-bold text-gray-800 mb-3",children:"📊 本次练习分析"}),a.jsxs("div",{className:"space-y-1.5 text-sm text-gray-700",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"总题数："}),a.jsxs("span",{className:"font-medium",children:[t.totalProblems," 题"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"正确题数："}),a.jsxs("span",{className:"font-medium text-green-600",children:[t.correctAnswers," 题"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"错误题数："}),a.jsxs("span",{className:"font-medium text-red-600",children:[t.totalProblems-t.correctAnswers," 题"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"平均用时："}),a.jsxs("span",{className:"font-medium",children:[t.totalProblems>0?(i/t.totalProblems).toFixed(1):0," 秒/题"]})]})]})]})]}):a.jsx("div",{className:"space-y-2 mb-4 max-h-[50vh] overflow-y-auto pr-2",children:t.problems.map((h,m)=>{const x=t.answers[m],k=x!==void 0?g(h,x):!1,b=t.answerTimes[m]||0;return a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-left text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("div",{className:"flex items-center font-bold text-gray-700",children:[a.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-0.5 rounded mr-2",children:["第",m+1,"题"]}),a.jsx("span",{className:"truncate max-w-[120px] sm:max-w-xs",children:h.question})]}),a.jsxs("div",{className:"flex items-center text-xs ml-2 flex-shrink-0",children:[a.jsxs("div",{className:`flex items-center ${k?"text-green-600":"text-red-600"} mr-2`,children:[k?a.jsx(Wl,{className:"w-3 h-3 mr-0.5"}):a.jsx(lr,{className:"w-3 h-3 mr-0.5"}),a.jsx("span",{className:"font-medium",children:k?"正确":"错误"})]}),a.jsxs("div",{className:"flex items-center text-gray-500",children:[a.jsx(Xt,{className:"w-3 h-3 mr-0.5"}),b,"s"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-xs bg-white p-2 rounded",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"你的答案:"}),a.jsx("div",{className:`font-semibold break-all ${k?"text-green-600":"text-red-600"}`,children:x!==void 0?v(h,x):"未作答"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"正确答案:"}),a.jsx("div",{className:"font-semibold text-green-600 break-all",children:_(h)})]})]})]},h.id)})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-6",children:[a.jsxs("button",{onClick:e,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-all duration-200 flex items-center justify-center",children:[a.jsx(Lg,{className:"w-5 h-5 mr-2"}),"再练一次"]}),a.jsxs("button",{onClick:r,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-xl transition-all duration-200 flex items-center justify-center",children:[a.jsx(gf,{className:"w-5 h-5 mr-2"}),"返回首页"]})]})]})})},Zg="modulepreload",e0=function(t,e){return new URL(t,e).href},Nu={},ws=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){const i=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(d=>{if(d=e0(d,n),d in Nu)return;Nu[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!n)for(let g=i.length-1;g>=0;g--){const v=i[g];if(v.href===d&&(!u||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${f}`))return;const w=document.createElement("link");if(w.rel=u?"stylesheet":Zg,u||(w.as="script"),w.crossOrigin="",w.href=d,c&&w.setAttribute("nonce",c),document.head.appendChild(w),u)return new Promise((g,v)=>{w.addEventListener("load",g),w.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},t0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ws(async()=>{const{default:n}=await Promise.resolve().then(()=>_n);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class oc extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class r0 extends oc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cu extends oc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $u extends oc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Xl||(Xl={}));var n0=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(f){i(f)}}function c(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class s0{constructor(e,{headers:r={},customFetch:n,region:s=Xl.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=t0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return n0(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(l["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(l["Content-Type"]="application/json",u=JSON.stringify(i)));const f=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(v=>{throw new r0(v)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new Cu(f);if(!f.ok)throw new $u(f);let w=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return w==="application/json"?g=yield f.json():w==="application/octet-stream"?g=yield f.blob():w==="text/event-stream"?g=f:w==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof $u||s instanceof Cu?s.context:void 0}}})}}var Ie={},ic={},ti={},xs={},ri={},ni={},o0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yn=o0();const i0=yn.fetch,wf=yn.fetch.bind(yn),xf=yn.Headers,l0=yn.Request,a0=yn.Response,_n=Object.freeze(Object.defineProperty({__proto__:null,Headers:xf,Request:l0,Response:a0,default:wf,fetch:i0},Symbol.toStringTag,{value:"Module"})),c0=Vf(_n);var si={};Object.defineProperty(si,"__esModule",{value:!0});let u0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};si.default=u0;var _f=nt&&nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ni,"__esModule",{value:!0});const d0=_f(c0),h0=_f(si);let f0=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=d0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c;let d=null,u=null,f=null,p=o.status,w=o.statusText;if(o.ok){if(this.method!=="HEAD"){const y=await o.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const v=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),_=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&_&&_.length>1&&(f=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,p=406,w="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await o.text();try{d=JSON.parse(v),Array.isArray(d)&&o.status===404&&(u=[],d=null,p=200,w="OK")}catch{o.status===404&&v===""?(p=204,w="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,p=200,w="OK"),d&&this.shouldThrowOnError)throw new h0.default(d)}return{error:d,data:u,count:f,status:p,statusText:w}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};ni.default=f0;var p0=nt&&nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ri,"__esModule",{value:!0});const m0=p0(ni);let g0=class extends m0.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ri.default=g0;var y0=nt&&nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xs,"__esModule",{value:!0});const v0=y0(ri);let w0=class extends v0.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${i}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};xs.default=w0;var x0=nt&&nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ti,"__esModule",{value:!0});const Rn=x0(xs);let _0=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new Rn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Rn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Rn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Rn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Rn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ti.default=_0;var oi={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.version=void 0;ii.version="0.0.0-automated";Object.defineProperty(oi,"__esModule",{value:!0});oi.DEFAULT_HEADERS=void 0;const b0=ii;oi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${b0.version}`};var bf=nt&&nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ic,"__esModule",{value:!0});const k0=bf(ti),S0=bf(xs),j0=oi;let N0=class kf{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},j0.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new k0.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new kf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{l.searchParams.append(u,f)})):(i="POST",c=r);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new S0.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};ic.default=N0;var bn=nt&&nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.PostgrestError=Ie.PostgrestBuilder=Ie.PostgrestTransformBuilder=Ie.PostgrestFilterBuilder=Ie.PostgrestQueryBuilder=Ie.PostgrestClient=void 0;const Sf=bn(ic);Ie.PostgrestClient=Sf.default;const jf=bn(ti);Ie.PostgrestQueryBuilder=jf.default;const Nf=bn(xs);Ie.PostgrestFilterBuilder=Nf.default;const Cf=bn(ri);Ie.PostgrestTransformBuilder=Cf.default;const $f=bn(ni);Ie.PostgrestBuilder=$f.default;const Ef=bn(si);Ie.PostgrestError=Ef.default;var C0=Ie.default={PostgrestClient:Sf.default,PostgrestQueryBuilder:jf.default,PostgrestFilterBuilder:Nf.default,PostgrestTransformBuilder:Cf.default,PostgrestBuilder:$f.default,PostgrestError:Ef.default};const{PostgrestClient:$0,PostgrestQueryBuilder:Qv,PostgrestFilterBuilder:Yv,PostgrestTransformBuilder:Xv,PostgrestBuilder:Zv,PostgrestError:ew}=C0;class E0{static dynamicRequire(e){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(e):null}catch{return null}}static detectEnvironment(){var e,r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);if(n>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const s=this.dynamicRequire("undici");if(s&&s.WebSocket)return{type:"native",constructor:s.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const s=this.dynamicRequire("ws");if(s)return{type:"ws",constructor:(r=s.WebSocket)!==null&&r!==void 0?r:s};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${n} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const T0="2.15.0",R0=`realtime-js/${T0}`,P0="1.0.0",Zl=1e4,A0=1e3,D0=100;var Kn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Kn||(Kn={}));var ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ge||(ge={}));var ft;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ft||(ft={}));var ea;(function(t){t.websocket="websocket"})(ea||(ea={}));var xr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xr||(xr={}));class O0{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(e.slice(i,i+s));i=i+s;const c=n.decode(e.slice(i,i+o));i=i+o;const d=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Tf{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ne||(ne={}));const Eu=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((o,i)=>(o[i]=M0(i,t,e,s),o),{})},M0=(t,e,r,n)=>{const s=e.find(l=>l.name===t),o=s==null?void 0:s.type,i=r[t];return o&&!n.includes(o)?Rf(o,i):ta(i)},Rf=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return z0(e,r)}switch(t){case ne.bool:return L0(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return I0(e);case ne.json:case ne.jsonb:return U0(e);case ne.timestamp:return F0(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return ta(e);default:return ta(e)}},ta=t=>t,L0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},I0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},U0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},z0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const i=t.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>Rf(e,l))}return t},F0=t=>typeof t=="string"?t.replace(" ","T"):t,Pf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class zi{constructor(e,r,n={},s=Zl){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Tu||(Tu={}));class Jn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jn.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=Jn.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Jn.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const o=this.cloneDeep(e),i=this.transformState(r),l={},c={};return this.map(o,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const f=o[d];if(f){const p=u.map(_=>_.presence_ref),w=f.map(_=>_.presence_ref),g=u.filter(_=>w.indexOf(_.presence_ref)<0),v=f.filter(_=>p.indexOf(_.presence_ref)<0);g.length>0&&(l[d]=g),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const f=e[l].map(w=>w.presence_ref),p=u.filter(w=>f.indexOf(w.presence_ref)<0);e[l].unshift(...p)}n(l,u,c)}),this.map(i,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=d,s(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ru;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ru||(Ru={}));var Gn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Gn||(Gn={}));var $t;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})($t||($t={}));class lc{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new zi(this,ft.join,this.params,this.timeout),this.rejoinTimer=new Tf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ge.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ft.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Jn(this),this.broadcastEndpointURL=Pf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ge.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Gn.PRESENCE]&&this.bindings[Gn.PRESENCE].length>0,u={},f={broadcast:o,presence:Object.assign(Object.assign({},i),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e($t.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e($t.CLOSED)),this.updateJoinPayload(Object.assign({config:f},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var w;if(this.socket.setAuth(),p===void 0){e==null||e($t.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(w=g==null?void 0:g.length)!==null&&w!==void 0?w:0,_=[];for(let y=0;y<v;y++){const h=g[y],{filter:{event:m,schema:x,table:k,filter:b}}=h,S=p&&p[y];if(S&&S.event===m&&S.schema===x&&S.table===k&&S.filter===b)_.push(Object.assign(Object.assign({},h),{id:S.id}));else{this.unsubscribe(),this.state=ge.errored,e==null||e($t.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e($t.SUBSCRIBED);return}}).receive("error",p=>{this.state=ge.errored,e==null||e($t.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e($t.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===ge.joined&&e===Gn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ge.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ft.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new zi(this,ft.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ge.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new zi(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>D0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,o;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=ft;if(n&&[l,c,d,u].indexOf(i)>=0&&n!==this._joinRef())return;let p=this._onMessage(i,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var g,v,_;return((g=w.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(v=w.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(w=>w.callback(p,n)):(o=this.bindings[i])===null||o===void 0||o.filter(w=>{var g,v,_,y,h,m;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in w){const x=w.id,k=(g=w.filter)===null||g===void 0?void 0:g.event;return x&&((v=r.ids)===null||v===void 0?void 0:v.includes(x))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const x=(h=(y=w==null?void 0:w.filter)===null||y===void 0?void 0:y.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return x==="*"||x===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===i}).map(w=>{if(typeof p=="object"&&"ids"in p){const g=p.data,{schema:v,table:_,commit_timestamp:y,type:h,errors:m}=g;p=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:y,eventType:h,new:{},old:{},errors:m}),this._getPayloadRecords(g))}w.callback(p,n)})}_isClosed(){return this.state===ge.closed}_isJoined(){return this.state===ge.joined}_isJoining(){return this.state===ge.joining}_isLeaving(){return this.state===ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&lc.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ft.close,{},e)}_onError(e){this._on(ft.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Eu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Eu(e.columns,e.old_record)),r}}const Pu=()=>{},Hs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},B0=[1e3,2e3,5e3,1e4],H0=1e4,q0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class W0{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zl,this.transport=null,this.heartbeatIntervalMs=Hs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pu,this.ref=0,this.reconnectTimer=null,this.logger=Pu,this.conn=null,this.sendBuffer=[],this.serializer=new O0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>ws(async()=>{const{default:l}=await Promise.resolve().then(()=>_n);return{default:l}},void 0,import.meta.url).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${ea.websocket}`,this.httpEndpoint=Pf(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=E0.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:P0}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Kn.connecting:return xr.Connecting;case Kn.open:return xr.Open;case Kn.closing:return xr.Closing;default:return xr.Closed}}isConnected(){return this.connectionState()===xr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new lc(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:s,ref:o}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(A0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Hs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:i}=r,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ft.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([q0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:R0};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ft.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Tf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Hs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,o,i,l,c,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Zl,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Hs.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:u=>B0[u-1]||H0,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(u,f)=>f(JSON.stringify(u)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ac extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class V0 extends ac{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ra extends ac{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var K0=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(f){i(f)}}function c(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Af=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ws(async()=>{const{default:n}=await Promise.resolve().then(()=>_n);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},J0=()=>K0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ws(()=>Promise.resolve().then(()=>_n),void 0,import.meta.url)).Response:Response}),na=t=>{if(Array.isArray(t))return t.map(r=>na(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=na(n)}),e},G0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ar=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(f){i(f)}}function c(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Fi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Q0=(t,e,r)=>Ar(void 0,void 0,void 0,function*(){const n=yield J0();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const o=t.status||500,i=(s==null?void 0:s.statusCode)||o+"";e(new V0(Fi(s),o,i))}).catch(s=>{e(new ra(Fi(s),s))}):e(new ra(Fi(t),t))}),Y0=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(G0(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function _s(t,e,r,n,s,o){return Ar(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,Y0(e,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Q0(c,l,n))})})}function Mo(t,e,r,n){return Ar(this,void 0,void 0,function*(){return _s(t,"GET",e,r,n)})}function Et(t,e,r,n,s){return Ar(this,void 0,void 0,function*(){return _s(t,"POST",e,n,s,r)})}function sa(t,e,r,n,s){return Ar(this,void 0,void 0,function*(){return _s(t,"PUT",e,n,s,r)})}function X0(t,e,r,n){return Ar(this,void 0,void 0,function*(){return _s(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Df(t,e,r,n,s){return Ar(this,void 0,void 0,function*(){return _s(t,"DELETE",e,n,s,r)})}var Me=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(f){i(f)}}function c(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Z0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Au={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ey{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Af(s)}uploadOrUpdate(e,r,n,s){return Me(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},Au),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),f=yield(e=="PUT"?sa:Et)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(xe(o))return{data:null,error:o};throw o}})}upload(e,r,n){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Me(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Au.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield sa(this.fetch,l.toString(),c,{headers:u});return{data:{path:o,fullPath:f.Key},error:null}}catch(c){if(xe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Me(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield Et(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new ac("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}update(e,r,n){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Me(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Me(this,void 0,void 0,function*(){try{return{data:{path:(yield Et(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Me(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield Et(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Me(this,void 0,void 0,function*(){try{const s=yield Et(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}download(e,r){return Me(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Mo(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}})}info(e){return Me(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Mo(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:na(n),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}exists(e){return Me(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield X0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(xe(n)&&n instanceof ra){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return Me(this,void 0,void 0,function*(){try{return{data:yield Df(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}list(e,r,n){return Me(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Z0),r),{prefix:e||""});return{data:yield Et(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const ty="2.10.4",ry={"X-Client-Info":`storage-js/${ty}`};var Lr=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(f){i(f)}}function c(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class ny{constructor(e,r={},n,s){const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},ry),r),this.fetch=Af(n)}listBuckets(){return Lr(this,void 0,void 0,function*(){try{return{data:yield Mo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return Lr(this,void 0,void 0,function*(){try{return{data:yield Mo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Lr(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Lr(this,void 0,void 0,function*(){try{return{data:yield sa(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Lr(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Lr(this,void 0,void 0,function*(){try{return{data:yield Df(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}}class sy extends ny{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new ey(this.url,this.headers,e,this.fetch)}}const oy="2.54.0";let Mn="";typeof Deno<"u"?Mn="deno":typeof document<"u"?Mn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mn="react-native":Mn="node";const iy={"X-Client-Info":`supabase-js-${Mn}/${oy}`},ly={headers:iy},ay={schema:"public"},cy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uy={};var dy=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(f){i(f)}}function c(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const hy=t=>{let e;return t?e=t:typeof fetch>"u"?e=wf:e=fetch,(...r)=>e(...r)},fy=()=>typeof Headers>"u"?xf:Headers,py=(t,e,r)=>{const n=hy(r),s=fy();return(o,i)=>dy(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new s(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:d}))})};var my=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(f){i(f)}}function c(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function gy(t){return t.endsWith("/")?t:t+"/"}function yy(t,e){var r,n;const{db:s,auth:o,realtime:i,global:l}=t,{db:c,auth:d,realtime:u,global:f}=e,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>my(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const Of="2.71.1",Hr=30*1e3,oa=3,Bi=oa*Hr,vy="http://localhost:9999",wy="supabase.auth.token",xy={"X-Client-Info":`gotrue-js/${Of}`},ia="X-Supabase-Api-Version",Mf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_y=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,by=10*60*1e3;class cc extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function V(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ky extends cc{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Sy(t){return V(t)&&t.name==="AuthApiError"}class Lf extends cc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class fr extends cc{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class qt extends fr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jy(t){return V(t)&&t.name==="AuthSessionMissingError"}class qs extends fr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ws extends fr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vs extends fr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ny(t){return V(t)&&t.name==="AuthImplicitGrantRedirectError"}class Du extends fr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class la extends fr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Hi(t){return V(t)&&t.name==="AuthRetryableFetchError"}class Ou extends fr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class aa extends fr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mu=` 	
\r=`.split(""),Cy=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Mu.length;e+=1)t[Mu[e].charCodeAt(0)]=-2;for(let e=0;e<Lo.length;e+=1)t[Lo[e].charCodeAt(0)]=e;return t})();function Lu(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Lo[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Lo[n]),e.queuedBits-=6}}function If(t,e,r){const n=Cy[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Iu(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{Ty(i,n,r)};for(let i=0;i<t.length;i+=1)If(t.charCodeAt(i),s,o);return e.join("")}function $y(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ey(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}$y(n,e)}}function Ty(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Ry(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)If(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Py(t){const e=[];return Ey(t,r=>e.push(r)),new Uint8Array(e)}function Ay(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Lu(s,r,n)),Lu(null,r,n),e.join("")}function Dy(t){return Math.round(Date.now()/1e3)+t}function Oy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ut=()=>typeof window<"u"&&typeof document<"u",mr={tested:!1,writable:!1},Uf=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mr.tested)return mr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),mr.tested=!0,mr.writable=!0}catch{mr.tested=!0,mr.writable=!1}return mr.writable};function My(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const zf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ws(async()=>{const{default:n}=await Promise.resolve().then(()=>_n);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Ly=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},gr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ht=async(t,e)=>{await t.removeItem(e)};class li{constructor(){this.promise=new li.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}li.promiseConstructor=Promise;function qi(t){const e=t.split(".");if(e.length!==3)throw new aa("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!_y.test(e[n]))throw new aa("JWT not in base64url format");return{header:JSON.parse(Iu(e[0])),payload:JSON.parse(Iu(e[1])),signature:Ry(e[2]),raw:{header:e[0],payload:e[1]}}}async function Iy(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Uy(t,e){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){n(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function zy(t){return("0"+t.toString(16)).substr(-2)}function Fy(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,zy).join("")}async function By(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function Hy(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await By(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ir(t,e,r=!1){const n=Fy();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await qr(t,`${e}-code-verifier`,s);const o=await Hy(n);return[o,n===o?"plain":"s256"]}const qy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wy(t){const e=t.headers.get(ia);if(!e||!e.match(qy))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Vy(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ky(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ur(t){if(!Jy.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wi(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Uu(t){return JSON.parse(JSON.stringify(t))}var Gy=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const wr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qy=[502,503,504];async function zu(t){var e;if(!Ly(t))throw new la(wr(t),0);if(Qy.includes(t.status))throw new la(wr(t),t.status);let r;try{r=await t.json()}catch(o){throw new Lf(wr(o),o)}let n;const s=Wy(t);if(s&&s.getTime()>=Mf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ou(wr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new qt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Ou(wr(r),t.status,r.weak_password.reasons);throw new ky(wr(r),t.status||500,n)}const Yy=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function J(t,e,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[ia]||(o[ia]=Mf["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Xy(t,e,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Xy(t,e,r,n,s,o){const i=Yy(e,n,s,o);let l;try{l=await t(r,Object.assign({},i))}catch(c){throw console.error(c),new la(wr(c),0)}if(l.ok||await zu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await zu(c)}}function Nt(t){var e;let r=null;rv(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Dy(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Fu(t){const e=Nt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Gt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Zy(t){return{data:t,error:null}}function ev(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=t,i=Gy(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function tv(t){return t}function rv(t){return t.access_token&&t.refresh_token&&t.expires_in}const Vi=["global","local","others"];var nv=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class sv{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=zf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Vi[0]){if(Vi.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vi.join(", ")}`);try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Gt})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=nv(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ev,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(V(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Gt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:tv});if(u.error)throw u.error;const f=await u.json(),p=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,w=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return w.length>0&&(w.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);d[`${_}Page`]=v}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(V(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Ur(e);try{return await J(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Gt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Ur(e);try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Gt})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Ur(e);try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Gt})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ur(e.userId);try{const{data:r,error:n}=await J(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(V(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Ur(e.userId),Ur(e.id);try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}}function Bu(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function ov(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zr={debug:!!(globalThis&&Uf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ff extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class iv extends Ff{}async function lv(t,e,r){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new iv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}ov();const av={url:vy,storageKey:wy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Hu(t,e,r){return await r()}const Fr={};class fs{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fs.nextInstanceID,fs.nextInstanceID+=1,this.instanceID>0&&ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},av),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new sv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=zf(s.fetch),this.lock=s.lock||Hu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ut()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=lv:this.lock=Hu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Uf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Bu(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Fr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Fr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Of}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=My(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ut()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Ny(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return V(r)?{error:r}:{error:new Lf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const o=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Nt}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(V(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var r,n,s;try{let o;if("email"in e){const{email:u,password:f,options:p}=e;let w=null,g=null;this.flowType==="pkce"&&([w,g]=await Ir(this.storage,this.storageKey)),o=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:w,code_challenge_method:g},xform:Nt})}else if("phone"in e){const{phone:u,password:f,options:p}=e;o=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Nt})}else throw new Ws("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(V(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:i,options:l}=e;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Fu})}else if("phone"in e){const{phone:o,password:i,options:l}=e;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Fu})}else throw new Ws("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new qs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,o,i,l,c,d,u,f,p,w;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:_,wallet:y,statement:h,options:m}=e;let x;if(ut())if(typeof y=="object")x=y;else{const b=window;if("solana"in b&&typeof b.solana=="object"&&("signIn"in b.solana&&typeof b.solana.signIn=="function"||"signMessage"in b.solana&&typeof b.solana.signMessage=="function"))x=b.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=y}const k=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const b=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),h?{statement:h}:null));let S;if(Array.isArray(b)&&b[0]&&typeof b[0]=="object")S=b[0];else if(b&&typeof b=="object"&&"signedMessage"in b&&"signature"in b)S=b;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((d=m==null?void 0:m.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((f=(u=m==null?void 0:m.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...m.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const b=await x.signMessage(new TextEncoder().encode(g),"utf8");if(!b||!(b instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=b}}try{const{data:_,error:y}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Ay(v)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Nt});if(y)throw y;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new qs}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:y})}catch(_){if(V(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const r=await gr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Nt});if(await Ht(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new qs}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(V(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=e,l=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Nt}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new qs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,o,i;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ir(this.storage,this.storageKey));const{error:f}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ws("You must provide either an email or phone number.")}catch(l){if(V(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Nt});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(V(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Ir(this.storage,this.storageKey)),await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Zy})}catch(o){if(V(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new qt;const{error:s}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(V(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:o}=e,{error:i}=await J(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:s,options:o}=e,{data:i,error:l}=await J(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Ws("You must provide either an email or phone number and a type")}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Bi:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const i=await gr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Wi()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Gt}):await this._useSession(async r=>{var n,s,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qt}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Gt})})}catch(r){if(V(r))return jy(r)&&(await this._removeSession(),await Ht(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new qt;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ir(this.storage,this.storageKey));const{data:d,error:u}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Gt});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qt;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=qi(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(V(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:l}=r;if(l)throw l;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new qt;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!ut())throw new Vs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Du("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Du("No code detected.");const{data:h,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=e;if(!o||!l||!i||!d)throw new Vs("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let p=u+f;c&&(p=parseInt(c));const w=p-u;w*1e3<=Hr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${f}s`);const g=p-f;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,p,u);const{data:v,error:_}=await this._getUser(o);if(_)throw _;const y={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:p,refresh_token:i,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(V(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await gr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Sy(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ht(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Oy(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ir(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(V(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,l,c,d,u;const{data:f,error:p}=o;if(p)throw p;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",w,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ut()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(V(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Uy(async s=>(s>0&&await Iy(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Nt})),(s,o)=>{const i=200*Math.pow(2,s);return o&&Hi(o)&&Date.now()+i-n<Hr})}catch(n){if(this._debug(r,"error",n),V(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ut()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await gr(this.storage,this.storageKey);if(s&&this.userStorage){let i=await gr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await qr(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Wi()}else if(s&&!s.user&&!s.user){const i=await gr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Ht(this.storage,this.storageKey+"-user"),await qr(this.storage,this.storageKey,s)):s.user=Wi()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Bi;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Bi}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Hi(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new li;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new qt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),V(o)){const i={session:null,error:o};return Hi(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await qr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=Uu(s);await qr(this.storage,this.storageKey,o)}else{const s=Uu(r);await qr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Ht(this.storage,this.storageKey),await Ht(this.storage,this.storageKey+"-code-verifier"),await Ht(this.storage,this.storageKey+"-user"),this.userStorage&&await Ht(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Hr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Hr}ms, refresh threshold is ${oa} ticks`),s<=oa&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ff)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await Ir(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await J(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await J(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:l}=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(V(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(V(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=qi(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+by>s)return n;const{data:o,error:i}=await J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:w,error:g}=await this.getSession();if(g||!w.session)return{data:null,error:g};n=w.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:c}}=qi(n);r!=null&&r.allowExpired||Vy(o.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:w}=await this.getUser(n);if(w)throw w;return{data:{claims:o,header:s,signature:i},error:null}}const u=Ky(s.alg),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,i,Py(`${l}.${c}`)))throw new aa("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}}}fs.nextInstanceID=0;const cv=fs;class uv extends cv{constructor(e){super(e)}}var dv=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(f){i(f)}}function c(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class hv{constructor(e,r,n){var s,o,i;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=gy(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:ay,realtime:uy,auth:Object.assign(Object.assign({},cy),{storageKey:d}),global:ly},f=yy(n??{},u);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=py(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new $0(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new sy(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new s0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return dv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:i,lock:l,debug:c},d,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uv({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new W0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fv=(t,e,r)=>new hv(t,e,r);function pv(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}pv()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mv="https://gbfrkothgwyaudrgdatq.supabase.co",gv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdiZnJrb3RoZ3d5YXVkcmdkYXRxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MjMzMzUsImV4cCI6MjA3MDE5OTMzNX0.c6UZ9buJAkkrLFhRDzdvcl8nttofPCclXnM0EHBMhDw",Pe=fv(mv,gv);async function ca(t){const{data:e,error:r}=await Pe.from("profiles").select("*").eq("user_id",t).maybeSingle();if(r)throw r;return e??null}async function qu(t,e,r){const{data:n,error:s}=await Pe.from("profiles").select("*").eq("user_id",t).maybeSingle();if(s)throw s;if(n){const c={};if(typeof r=="boolean"&&n.is_developer!==r&&(c.is_developer=r),typeof e=="string"&&e&&n.name!==e&&(c.name=e),Object.keys(c).length===0)return n;const{data:d,error:u}=await Pe.from("profiles").update(c).eq("user_id",t).select("*").single();if(u)throw u;return d}const o={user_id:t,name:e||"Anonymous"};typeof r=="boolean"&&(o.is_developer=r);const{data:i,error:l}=await Pe.from("profiles").insert(o).select("*").single();if(l)throw l;return i}async function yv(t,e){const{data:r,error:n}=await Pe.from("profiles").update({name:e}).eq("user_id",t).select("*").single();if(n)throw n;return r}function uc(){const[t,e]=$.useState({session:null,user:null,loading:!0,error:null,isDeveloper:!1,recentEmails:[]});$.useEffect(()=>{let o=!0;Pe.auth.getSession().then(({data:l,error:c})=>{var f,p;if(!o)return;const d=((p=(f=l.session)==null?void 0:f.user)==null?void 0:p.email)||"",u=!!d&&d.toLowerCase().endsWith("@whosyour.daddy");e(w=>{var g;return{...w,session:l.session??null,user:((g=l.session)==null?void 0:g.user)??null,loading:!1,error:c?c.message:null,isDeveloper:u,recentEmails:Ln()}})});const{data:i}=Pe.auth.onAuthStateChange((l,c)=>{var f;const d=((f=c==null?void 0:c.user)==null?void 0:f.email)||"",u=!!d&&d.toLowerCase().endsWith("@whosyour.daddy");d&&!u&&Ki(d),e(p=>({...p,session:c??null,user:(c==null?void 0:c.user)??null,isDeveloper:u,recentEmails:Ln()}))});return()=>{o=!1,i.subscription.unsubscribe()}},[]);const r=$.useCallback(async(o,i,l)=>{var f;e(p=>({...p,loading:!0,error:null}));const{data:c,error:d}=await Pe.auth.signUp({email:o,password:i,options:{data:l?{name:l}:void 0}});if(d)return e(p=>({...p,loading:!1,error:d.message})),{ok:!1,needsVerification:!1};const u=c.user??((f=c.session)==null?void 0:f.user)??null;if(u){const p=!!u.email&&u.email.toLowerCase().endsWith("@whosyour.daddy");await qu(u.id,l||u.email||"Anonymous",p),u.email&&!p&&Ki(u.email)}return e(p=>({...p,session:c.session??p.session,user:u,loading:!1,error:null,isDeveloper:!!(u!=null&&u.email)&&u.email.toLowerCase().endsWith("@whosyour.daddy"),recentEmails:Ln()})),{ok:!0,needsVerification:!c.session}},[]),n=$.useCallback(async(o,i)=>{var d;e(u=>({...u,loading:!0,error:null}));const{data:l,error:c}=await Pe.auth.signInWithPassword({email:o,password:i});if(c)return e(u=>({...u,loading:!1,error:c.message})),{ok:!1};if(l.user){const u=!!l.user.email&&l.user.email.toLowerCase().endsWith("@whosyour.daddy"),f=(d=l.user.user_metadata)==null?void 0:d.name;await qu(l.user.id,f,u),l.user.email&&!u&&Ki(l.user.email)}return e(u=>{var f;return{...u,session:l.session??null,user:l.user??null,loading:!1,isDeveloper:!!((f=l.user)!=null&&f.email)&&l.user.email.toLowerCase().endsWith("@whosyour.daddy"),recentEmails:Ln()}}),{ok:!0}},[]),s=$.useCallback(async()=>{e(i=>({...i,loading:!0,error:null}));const{error:o}=await Pe.auth.signOut();return o?(e(i=>({...i,loading:!1,error:o.message})),{ok:!1}):(e(i=>({...i,session:null,user:null,loading:!1,isDeveloper:!1})),{ok:!0})},[]);return{...t,signUp:r,signIn:n,signOut:s}}const Bf="recent_logins";function Ln(){try{const t=localStorage.getItem(Bf),e=t?JSON.parse(t):[];return Array.isArray(e)?e.filter(r=>typeof r=="string"&&!r.toLowerCase().endsWith("@whosyour.daddy")).slice(0,5):[]}catch{return[]}}function Ki(t){const e=(t||"").toLowerCase();if(!e||e.endsWith("@whosyour.daddy"))return;const r=Ln(),n=[e,...r.filter(s=>s!==e)].slice(0,5);localStorage.setItem(Bf,JSON.stringify(n))}const vv=({userName:t,isLoggedIn:e,isDeveloper:r,onUserAction:n,onGenerateTestData:s,onShowOnlineAuth:o,onSyncNow:i,onShowTestPanel:l,onShowSimplifiedTestPanel:c})=>{const[d,u]=$.useState(!1),[f,p]=$.useState(null),w=uc(),g=w.isDeveloper||r,v=w.user&&(typeof navigator<"u"?navigator.onLine:!0);ld.useEffect(()=>{if(e&&w.user)if(!t||t==="Online User"){let h=!0;return ca(w.user.id).then(m=>{h&&p((m==null?void 0:m.name)??null)}).catch(()=>{}),()=>{h=!1}}else p(t);else p(null)},[w.user,t,e]);const _=h=>{u(!1),n(h)},y=()=>{u(!d)};return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center bg-white rounded-lg px-3 py-2 shadow-sm border border-gray-200 relative",children:[a.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${v?"bg-green-500":"bg-red-500"}`}),a.jsx("span",{className:`text-sm font-medium text-gray-700 ${g?"underline":""}`,children:w.user?f||"未命名":t})]}),a.jsxs("button",{onClick:y,className:"flex items-center bg-white hover:bg-gray-50 rounded-lg px-3 py-2 shadow-sm border border-gray-200 transition-colors duration-200",children:[a.jsx(Kl,{className:"w-4 h-4 text-gray-600 mr-1"}),a.jsx(Vl,{className:`w-4 h-4 text-gray-600 transition-transform duration-200 ${d?"rotate-180":""}`})]})]}),d&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>u(!1)}),a.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:a.jsxs("div",{className:"py-1",children:[w.user?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>_("viewHistory"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"📊"}),"查看记录"]}),a.jsxs("button",{onClick:()=>{u(!1),i==null||i()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"🔄"}),"手动同步"]}),a.jsxs("button",{onClick:async()=>{const h=window.prompt("请输入新的显示昵称（2-20个字符）",f||"");if(h==null)return;const m=h.trim();if(m)try{await yv(w.user.id,m),p(m),u(!1);try{await ca(w.user.id)}catch{}}catch{}},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"✏️"}),"修改昵称"]}),a.jsxs("button",{onClick:()=>{u(!1),o==null||o()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"🔄"}),"切换账号"]}),a.jsxs("button",{onClick:()=>{u(!1),w.signOut()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"🔐"}),"退出登录"]}),g&&s&&a.jsxs("button",{onClick:()=>{u(!1),s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"🛠️"}),"测试在线数据"]})]}):a.jsxs("button",{onClick:()=>{u(!1),o?o():_("login")},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"🔐"}),"在线登录/注册"]}),!w.user&&e&&a.jsxs("button",{onClick:()=>_("viewHistory"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"📊"}),"查看记录"]}),!w.user&&a.jsxs("button",{onClick:()=>_("switch"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"👥"}),"选择旧本地用户"]}),!w.user&&g&&s&&a.jsxs("button",{onClick:()=>{u(!1),s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"🛠️"}),"生成测试数据"]}),g&&l&&a.jsxs("button",{onClick:()=>{u(!1),l()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"🐛"}),"测试面板"]}),g&&w.user&&c&&a.jsxs("button",{onClick:()=>{u(!1),c()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center",children:[a.jsx("span",{className:"mr-3",children:"🔄"}),"同步测试"]})]})})]})]})},wv=({isOpen:t,onClose:e,action:r,users:n,onCreateUser:s,onLoginUser:o,currentUser:i})=>{const[l,c]=$.useState(""),[d,u]=$.useState(""),[f,p]=$.useState(!1),[w,g]=$.useState(!1),[v,_]=$.useState(""),y=()=>{c(""),u(""),p(!1),g(!1),_("")},h=()=>{y(),e()},m=R=>{o(R)?h():u("登录失败，请重试")},x=()=>{g(!0),_(""),u("")},k=()=>{if(v.trim()==="whosyourdaddy"){const R=n.find(D=>D.isDeveloper);R?o(R.id)?h():u("开发者账号登录失败"):u("开发者账号不存在")}else u("访问密钥错误"),_("")},b=R=>{R.key==="Enter"?k():R.key==="Escape"&&(g(!1),_(""),u(""))},S=()=>"选择旧本地用户",C=()=>a.jsx(Fg,{className:"w-6 h-6"});return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:h}),a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl p-6 w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center text-gray-800",children:[C(),a.jsx("h2",{className:"text-xl font-bold ml-3",children:S()})]}),a.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(lr,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"space-y-4",children:(r==="login"||r==="switch")&&a.jsxs("div",{className:"space-y-3 relative",children:[w&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"开发者访问密钥"}),a.jsx("input",{type:"password",value:v,onChange:R=>_(R.target.value),onKeyDown:b,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm",placeholder:"请输入访问密钥",autoFocus:!0}),a.jsxs("div",{className:"flex justify-end mt-2 space-x-2",children:[a.jsx("button",{onClick:()=>{g(!1),_(""),u("")},className:"px-3 py-1 text-xs text-gray-600 hover:text-gray-800",children:"取消"}),a.jsx("button",{onClick:k,className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"确认"})]})]}),n.filter(R=>!R.isDeveloper).length===0?a.jsxs("div",{className:"text-center text-gray-500 py-8",children:[a.jsx(Ql,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{className:"text-sm",children:"暂无用户"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"请先创建一个用户"})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:r==="login"?"选择要登录的用户：":"选择要切换到的用户："}),a.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:n.filter(R=>!R.isDeveloper).map(R=>a.jsx("button",{onClick:()=>m(R.id),disabled:(i==null?void 0:i.id)===R.id,className:`w-full text-left p-3 rounded-lg border transition-all duration-200 ${(i==null?void 0:i.id)===R.id?"bg-blue-50 border-blue-200 text-blue-700 cursor-not-allowed":"bg-gray-50 border-gray-200 hover:bg-gray-100 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-800",children:[R.name,R.isDeveloper&&a.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"开发者"}),(i==null?void 0:i.id)===R.id&&a.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"当前用户"})]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["创建于 ",new Date(R.createdAt).toLocaleDateString("zh-CN")]})]}),a.jsx(Ql,{className:"w-5 h-5 text-gray-400"})]})},R.id))})]}),d&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:d}),a.jsx("div",{className:"flex space-x-3 pt-2 relative",children:a.jsx("button",{onClick:h,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200",children:"取消"})})]})}),!w&&a.jsx("div",{onClick:x,className:"absolute bottom-2 right-2 w-5 h-5 cursor-pointer opacity-0 hover:opacity-10 transition-opacity duration-200",style:{background:"transparent"}})]})]}):null},xv=({user:t,records:e,incompleteRecords:r,onBack:n,onViewRecord:s})=>{const[o,i]=$.useState("all"),[l,c]=$.useState("all"),[d,u]=$.useState(new Set),[f,p]=$.useState(""),[w,g]=$.useState(!1),[v,_]=$.useState(new Date().getFullYear()),[y,h]=$.useState(new Date().getMonth()),[m,x]=$.useState(""),[k,b]=$.useState(""),[S,C]=$.useState(!1),R=$.useRef(!1),D=$.useRef(!1);$.useEffect(()=>{!D.current&&!R.current&&!S&&e.length===0&&r.length>0&&(C(!0),D.current=!0)},[e.length,r.length,S]);const T=$.useMemo(()=>r.filter(N=>N&&N.id&&N.sessionId).map((N,M)=>({id:`incomplete_${N.sessionId}_${M}`,userId:N.userId,date:N.date||N.timestamp||Date.now(),problemType:N.problemType,difficulty:N.difficulty,totalProblems:N.totalProblems||0,correctAnswers:N.correctAnswers||0,accuracy:N.accuracy||0,totalTime:N.totalTime||0,averageTime:N.averageTime||0,problems:N.problems||[],answers:N.answers||[],answerTimes:N.answerTimes||[],score:N.score||0})),[r]),E=S?T:e,B=N=>({mental:"口算",written:"笔算",mixed:"多步复合算式",properties:"运算律与规则"})[N]||N,I=N=>({basic:"基础",challenge:"挑战"})[N]||N,re=N=>N==="challenge"?"text-red-600 bg-red-50":"text-green-600 bg-green-50",he=N=>N>=90?"text-green-600":N>=80?"text-blue-600":N>=70?"text-yellow-600":"text-red-600",oe=N=>{const M=Math.floor(N/60),Z=N%60;return M>0?`${M}分${Z}秒`:`${Z}秒`},O=N=>{const M=new Date(N),A=Math.floor((new Date().getTime()-M.getTime())/(1e3*60*60*24));return A===0?"今天":A===1?"昨天":A<7?`${A}天前`:M.toLocaleDateString("zh-CN")},U=N=>new Date(`${N}T00:00:00`).getTime(),H=N=>new Date(`${N}T23:59:59.999`).getTime(),te=()=>{x(""),b(""),p("")},z=N=>{const M=N.getFullYear(),Z=String(N.getMonth()+1).padStart(2,"0"),A=String(N.getDate()).padStart(2,"0");return`${M}-${Z}-${A}`},we=$.useMemo(()=>z(new Date),[]),Qe=(N,M)=>{const A=new Date(N,M,1).getDay(),F=new Date(N,M+1,0).getDate(),q=[];for(let W=0;W<A;W+=1){const Y=new Date(N,M,1-(A-W));q.push({date:Y,ymd:z(Y)})}for(let W=1;W<=F;W+=1){const Y=new Date(N,M,W);q.push({date:Y,ymd:z(Y)})}for(;q.length%7!==0||q.length<42;){const W=q[q.length-1].date,Y=new Date(W);Y.setDate(W.getDate()+1),q.push({date:Y,ymd:z(Y)})}return q},Ut=(N,M)=>N&&M&&N===M,it=(N,M,Z)=>!M||!Z?!1:U(N)>=U(M)&&H(N)<=H(Z),Ye=$.useMemo(()=>E.filter(N=>{const M=o==="all"||N.problemType===o,Z=l==="all"||N.difficulty===l;return M&&Z}),[E,o,l]),ai=$.useMemo(()=>{const N=new Set;return Ye.forEach(M=>{N.add(z(new Date(M.date)))}),N},[Ye]);$.useEffect(()=>{const N=parseInt(f,10);if(!isNaN(N)&&N>0){const M=new Date,Z=new Date(M.getFullYear(),M.getMonth(),M.getDate()),A=new Date(Z);A.setDate(A.getDate()-(N-1));const F=z(A),q=z(Z);(m!==F||k!==q)&&(x(F),b(q),_(A.getFullYear()),h(A.getMonth()));return}if(m&&k){const M=new Date(m);_(M.getFullYear()),h(M.getMonth())}},[f,m,k]),$.useEffect(()=>{if(!w)return;const N=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=N}},[w]);const vt=$.useMemo(()=>Ye.filter(N=>{let M=!0;const Z=parseInt(f,10);if(!isNaN(Z)&&Z>0){const A=new Date,F=new Date(A.getFullYear(),A.getMonth(),A.getDate(),23,59,59,999).getTime(),q=new Date(A.getFullYear(),A.getMonth(),A.getDate());q.setDate(q.getDate()-(Z-1));const W=q.getTime();M=N.date>=W&&N.date<=F}if(m&&!k){const A=U(m),F=H(m);M=M&&N.date>=A&&N.date<=F}else if(m&&k){const A=U(m),F=H(k);M=M&&N.date>=A&&N.date<=F}return M}),[Ye,f,m,k]),pr=$.useMemo(()=>d.size===0?vt:vt.filter(N=>d.has(N.id)),[vt,d]),Dr=$.useMemo(()=>{if(pr.length===0)return{totalSessions:0,averageAccuracy:0,averageTime:0,totalAccuracy:0};const N=pr.length,M=pr.reduce((q,W)=>q+W.accuracy,0),Z=Math.round(M/N),A=pr.reduce((q,W)=>q+W.totalTime,0),F=Math.round(A/N);return{totalSessions:N,averageAccuracy:Z,averageTime:F,totalAccuracy:Z}},[pr]),ci=[{value:"all",label:"全部题型"},{value:"mental",label:"口算"},{value:"written",label:"笔算"},{value:"mixed",label:"多步复合算式"},{value:"properties",label:"运算律与规则"}],ui=[{value:"all",label:"全部难度"},{value:"basic",label:"基础难度"},{value:"challenge",label:"挑战难度"}],di=(N,M)=>{const Z=new Set(d);M?Z.add(N):Z.delete(N),u(Z)},hi=()=>{u(new Set)},bs=()=>{const N=new Set(vt.map(M=>M.id));u(N)},ks=(N,M)=>{M.target.closest('input[type="checkbox"]')||s(N)};return a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 sm:p-8",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:n,className:"mr-4 p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:a.jsx(Cg,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ql,{className:"w-6 h-6 text-blue-500 mr-3"}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[t.name," 的练习记录"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"查看你的学习历程"})]})]})]})}),a.jsx("div",{className:"mb-4 flex items-center justify-end",children:a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:S,onChange:N=>{R.current=!0,u(new Set),C(N.target.checked)},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),"显示未完成记录"]})}),E.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Hl,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:S?"当前没有未完成的答题记录":r.length>0?"当前没有已完成的答题记录":"暂无练习记录"}),a.jsx("div",{className:"text-gray-500",children:S?a.jsx("p",{children:"答题时会自动保存未完成进度"}):r.length>0?a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("p",{children:"你目前有未完成记录，可切换查看。"}),a.jsx("button",{onClick:()=>C(!0),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors duration-200",children:"查看未完成记录"})]}):a.jsx("p",{children:"开始你的第一次练习吧！"})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-center",children:[a.jsx(Gl,{className:"w-6 h-6 text-blue-500 mx-auto mb-2"}),a.jsx("div",{className:"text-xl font-bold text-blue-700",children:Dr.totalSessions}),a.jsx("div",{className:"text-sm text-blue-600",children:"练习次数"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-xl text-center",children:[a.jsx(Jl,{className:"w-6 h-6 text-green-500 mx-auto mb-2"}),a.jsxs("div",{className:"text-xl font-bold text-green-700",children:[Dr.averageAccuracy,"%"]}),a.jsx("div",{className:"text-sm text-green-600",children:"平均正确率"})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl text-center",children:[a.jsx(Xt,{className:"w-6 h-6 text-purple-500 mx-auto mb-2"}),a.jsx("div",{className:"text-xl font-bold text-purple-700",children:oe(Dr.averageTime)}),a.jsx("div",{className:"text-sm text-purple-600",children:"平均用时"})]}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl text-center",children:[a.jsx(Hl,{className:"w-6 h-6 text-yellow-500 mx-auto mb-2"}),a.jsxs("div",{className:"text-xl font-bold text-yellow-700",children:[Dr.totalAccuracy,"%"]}),a.jsx("div",{className:"text-sm text-yellow-600",children:"平均正确率"})]})]}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:o,onChange:N=>i(N.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 text-sm font-medium text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",children:ci.map(N=>a.jsx("option",{value:N.value,children:N.label},N.value))}),a.jsx(Vl,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:l,onChange:N=>c(N.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 text-sm font-medium text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",children:ui.map(N=>a.jsx("option",{value:N.value,children:N.label},N.value))}),a.jsx(Vl,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),a.jsx("button",{onClick:()=>g(N=>!N),className:"px-4 py-2 text-sm font-medium bg-white border border-gray-300 rounded-lg text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:"按日期筛选"}),a.jsxs("button",{onClick:te,className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg transition-colors duration-200 flex items-center",children:[a.jsx(lr,{className:"w-4 h-4 mr-1"}),"重置日期"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["共 ",vt.length," 条记录"]})]}),w&&a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-start justify-center overflow-y-auto p-4 sm:p-6",children:a.jsxs("div",{role:"dialog","aria-modal":"true",className:"relative z-10 w-[95%] sm:w-[90%] max-w-5xl bg-white rounded-2xl shadow-2xl border border-gray-200 p-4 sm:p-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-base font-semibold text-gray-800",children:"按日期筛选"}),a.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100","aria-label":"关闭",children:a.jsx(lr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("input",{type:"date",value:m,onChange:N=>{x(N.target.value),p("")},className:"bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"至"}),a.jsx("input",{type:"date",value:k,onChange:N=>{b(N.target.value),p("")},className:"bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:1,placeholder:"过去N天",value:f,onChange:N=>p(N.target.value.replace(/[^0-9]/g,"")),className:"w-24 bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"天（含今天）"})]}),a.jsx("button",{onClick:()=>{x(""),b(""),p("")},className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",children:"清除选择"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{className:"px-3 py-1.5 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",onClick:()=>{const N=new Date(v,y,1);N.setMonth(N.getMonth()-1),_(N.getFullYear()),h(N.getMonth())},children:"上个月"}),a.jsxs("div",{className:"text-sm text-gray-700 font-medium",children:[v," 年 ",y+1," 月"]}),a.jsx("button",{className:"px-3 py-1.5 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",onClick:()=>{const N=new Date(v,y,1);N.setMonth(N.getMonth()+1),_(N.getFullYear()),h(N.getMonth())},children:"下个月"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-gray-500",children:["日","一","二","三","四","五","六"].map(N=>a.jsxs("div",{className:"py-1",children:["周",N]},N))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:Qe(v,y).map(({date:N,ymd:M},Z)=>{const A=N.getMonth()===y,F=ai.has(M),q=Ut(M,m),W=Ut(M,k),Y=it(M,m,k),X=M===we,lt=`text-sm rounded-lg py-2 text-center select-none ${A?"":"opacity-40"}`,zt=F?"text-gray-800":"text-gray-400",wt=q||W?"bg-blue-500 text-white":Y?"bg-blue-100 text-blue-700":"";return a.jsx("button",{disabled:!1,onClick:()=>{f&&p(""),!m||m&&k?(x(M),b("")):m&&!k&&(U(M)<U(m)?x(M):U(M)===U(m)?b(""):b(M))},className:`${lt} ${zt} ${wt} hover:bg-gray-100`,title:M,children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:`${X&&!(q||W||Y)?"w-7 h-7 flex items-center justify-center rounded-full border-2 border-blue-500":""}`,children:N.getDate()}),F&&a.jsx("span",{className:"mt-1 h-1 w-5 rounded-full bg-blue-200"})]})},M+Z)})})]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:bs,className:"px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors duration-200",disabled:vt.length===0,children:"全选"}),a.jsxs("button",{onClick:hi,className:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg transition-colors duration-200 flex items-center",disabled:d.size===0,children:[a.jsx(lr,{className:"w-4 h-4 mr-1"}),"取消勾选"]}),d.size>0&&a.jsxs("div",{className:"text-sm text-blue-600 font-medium",children:["已选择 ",d.size," 条记录"]})]})]}),a.jsx("div",{className:"space-y-3",children:vt.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"没有找到符合条件的记录"})}):vt.map(N=>a.jsx("div",{onClick:M=>{S||ks(N,M)},className:"bg-gray-50 hover:bg-gray-100 p-4 rounded-xl cursor-pointer transition-all duration-200 border border-transparent hover:border-gray-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"mr-3 flex-shrink-0",children:a.jsx("input",{type:"checkbox",checked:d.has(N.id),onChange:M=>di(N.id,M.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2",onClick:M=>M.stopPropagation()})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("span",{className:"font-medium text-gray-800",children:B(N.problemType)}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${re(N.difficulty)}`,children:I(N.difficulty)}),S&&a.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-orange-100 text-orange-700",children:"未完成"}),a.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[a.jsx(ff,{className:"w-3 h-3 mr-1"}),O(N.date)]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(Gl,{className:"w-4 h-4 mr-1"}),N.correctAnswers,"/",N.totalProblems,"题"]}),a.jsxs("span",{className:`flex items-center font-medium ${he(N.accuracy)}`,children:[a.jsx(Jl,{className:"w-4 h-4 mr-1"}),N.accuracy,"%"]}),a.jsxs("span",{className:"flex items-center",children:[a.jsx(Xt,{className:"w-4 h-4 mr-1"}),oe(N.totalTime)]})]})]}),!S&&a.jsx("div",{className:"text-gray-400 ml-4 flex-shrink-0",children:a.jsx("span",{className:"text-xs",children:"点击查看详情 →"})})]})},N.id))})]})]})})},Wu={problemTypes:["mental","written","mixed","properties"],difficulties:["basic","challenge"],recordType:"completed",recordsPerCombination:5,dateRange:{startDate:new Date(Date.now()-30*24*60*60*1e3),endDate:new Date},performanceRange:{minAccuracy:60,maxAccuracy:95,minAvgTime:15,maxAvgTime:45},distributionPattern:"daily"},Vu=t=>({mental:"口算",written:"笔算",mixed:"多步复合算式",properties:"运算律与规则"})[t],Ku=t=>t==="basic"?"基础":"挑战",Ju=(t,e)=>{const r=t.getTime(),n=e.getTime(),s=r+Math.random()*(n-r);return new Date(s)},Gu=(t,e,r)=>{const n=[],s=Math.ceil((e.getTime()-t.getTime())/864e5),o=Math.ceil(r/s);for(let i=0;i<r;i++){const l=Math.floor(i/o),c=new Date(t);c.setDate(c.getDate()+l);const d=8+Math.random()*12,u=Math.random()*60;c.setHours(Math.floor(d),Math.floor(u)),n.push(c)}return n.sort((i,l)=>l.getTime()-i.getTime())},_v=(t,e,r,n)=>{const s=Do(t,e),o=s.length,i=(n.minAccuracy+Math.random()*(n.maxAccuracy-n.minAccuracy))/100,l=Math.round(o*i),c=n.minAvgTime+Math.random()*(n.maxAvgTime-n.minAvgTime),d=o*c,u=[],f=[],p=[];s.forEach((v,_)=>{var k;if(_<l)v.isMultipleChoice?u.push(v.correctChoice):v.isDivision?v.remainder===0?u.push(v.quotient.toString()):u.push(`${v.quotient}……${v.remainder}`):u.push(v.answer);else if(v.isMultipleChoice){const b=(v.correctChoice+1)%(((k=v.choices)==null?void 0:k.length)||4);u.push(b)}else if(v.isDivision)u.push(`${v.quotient+1}……${v.remainder}`);else{const b=typeof v.answer=="number"?v.answer:parseInt(v.answer.toString());u.push(b+(Math.random()<.5?1:-1))}const h=c*.3,m=Math.max(1,Math.round(c+(Math.random()*h*2-h)));f.push(m);const x=r.getTime()-(o-_)*c*1e3;p.push(x)});const w=r.getTime(),g=w-d*1e3;return{problems:s,currentProblem:null,currentIndex:o-1,answers:u,answerTimes:f,score:l*10,totalProblems:o,correctAnswers:l,isActive:!1,isCompleted:!0,startTime:g,endTime:w,problemType:t,difficulty:e,problemStartTimes:p,sessionId:`${t}_${e}_${r.getTime()}_${Math.random().toString(36).slice(2,8)}`}},bv=(t,e,r,n)=>{var _;const s=Do(t,e),o=s.length,i=Math.max(1,Math.min(o-1,Math.floor(o*(.3+Math.random()*.5)))),l=(n.minAccuracy+Math.random()*(n.maxAccuracy-n.minAccuracy))/100,c=n.minAvgTime+Math.random()*(n.maxAvgTime-n.minAvgTime),d=new Array(o),u=new Array(o),f=[],p=i*c,w=r.getTime()-p*1e3;let g=0;for(let y=0;y<i;y++){const h=s[y];if(Math.random()<l)h.isMultipleChoice?d[y]=h.correctChoice:h.isDivision?h.remainder===0?d[y]=h.quotient.toString():d[y]=`${h.quotient}……${h.remainder}`:d[y]=h.answer,g+=1;else if(h.isMultipleChoice){const S=(h.correctChoice+1)%(((_=h.choices)==null?void 0:_.length)||4);d[y]=S}else if(h.isDivision)d[y]=`${(h.quotient||0)+1}……${h.remainder||0}`;else{const S=typeof h.answer=="number"?h.answer:parseInt(h.answer.toString());d[y]=S+(Math.random()<.5?1:-1)}const x=c*.3,k=Math.max(1,Math.round(c+(Math.random()*x*2-x)));u[y]=k;const b=w+y*c*1e3;f.push(b)}const v=`${t}_${e}_${r.getTime()}_${Math.random().toString(36).slice(2,8)}`;return{problems:s,currentProblem:s[Math.max(0,i-1)]||null,currentIndex:Math.max(0,i-1),answers:d,answerTimes:u,score:g*10,totalProblems:o,correctAnswers:g,isActive:!0,isCompleted:!1,sessionId:v,startTime:w,problemType:t,difficulty:e,problemStartTimes:f}},kv=async(t,e,r,n,s,o)=>{const i={success:!1,completedRecords:[],incompleteRecords:[],errors:[],totalGenerated:0};try{const l=e.problemTypes.length*e.difficulties.length;let c=0;(e.recordType==="completed"||e.recordType==="both")&&(c+=l*e.recordsPerCombination),(e.recordType==="incomplete"||e.recordType==="both")&&(c+=l*e.recordsPerCombination);let d=0;if(e.recordType==="completed"||e.recordType==="both"){o==null||o({current:d,total:c,stage:"生成已完成记录",details:"正在准备...",percentage:0});const u=[];for(const f of e.problemTypes)for(const p of e.difficulties){const w=Vu(f),g=Ku(p),v=e.distributionPattern==="daily"?Gu(e.dateRange.startDate,e.dateRange.endDate,e.recordsPerCombination):Array.from({length:e.recordsPerCombination},()=>Ju(e.dateRange.startDate,e.dateRange.endDate));for(let _=0;_<e.recordsPerCombination;_++){o==null||o({current:d,total:c,stage:"生成已完成记录",details:`${w} - ${g} (${_+1}/${e.recordsPerCombination})`,percentage:Math.round(d/c*100)});const y=_v(f,p,v[_],e.performanceRange);u.push(y),d++,await new Promise(h=>setTimeout(h,10))}}o==null||o({current:d,total:c,stage:"保存已完成记录",details:"正在保存到本地存储...",percentage:Math.round(d/c*100)});try{i.completedRecords=r(u,t)}catch(f){i.errors.push(`保存已完成记录失败: ${f}`)}}if(e.recordType==="incomplete"||e.recordType==="both"){o==null||o({current:d,total:c,stage:"生成未完成记录",details:"正在准备...",percentage:Math.round(d/c*100)});for(const u of e.problemTypes)for(const f of e.difficulties){const p=Vu(u),w=Ku(f),g=e.distributionPattern==="daily"?Gu(e.dateRange.startDate,e.dateRange.endDate,e.recordsPerCombination):Array.from({length:e.recordsPerCombination},()=>Ju(e.dateRange.startDate,e.dateRange.endDate));for(let v=0;v<e.recordsPerCombination;v++){o==null||o({current:d,total:c,stage:"生成未完成记录",details:`${p} - ${w} (${v+1}/${e.recordsPerCombination})`,percentage:Math.round(d/c*100)});const _=bv(u,f,g[v],e.performanceRange);try{n(_,t,g[v].getTime())?i.incompleteRecords.push(_.sessionId):i.errors.push(`保存未完成记录失败: ${_.sessionId}`)}catch(y){i.errors.push(`保存未完成记录失败: ${y}`)}d++,await new Promise(y=>setTimeout(y,10))}}}if(i.totalGenerated=d,s){o==null||o({current:c,total:c,stage:"同步到云端",details:"正在同步数据...",percentage:100});try{i.syncResult=await s()}catch(u){i.syncResult={success:!1,message:`同步失败: ${u}`}}}i.success=i.errors.length===0,o==null||o({current:c,total:c,stage:"完成",details:i.success?"生成完成":"生成完成，但有部分错误",percentage:100})}catch(l){i.errors.push(`生成过程出错: ${l}`),i.success=!1}return i},Sv=async(t,e,r,n,s,o)=>{const i={success:!1,clearedCompletedCount:0,clearedIncompleteCount:0,errors:[]};try{if(e==="completed"||e==="both"){o==null||o({current:0,total:100,stage:"清空已完成记录",details:"正在清空...",percentage:25});try{r(t)?i.clearedCompletedCount=1:i.errors.push("清空已完成记录失败")}catch(l){i.errors.push(`清空已完成记录失败: ${l}`)}}if(e==="incomplete"||e==="both"){o==null||o({current:0,total:100,stage:"清空未完成记录",details:"正在清空...",percentage:50});try{n(t)?i.clearedIncompleteCount=1:i.errors.push("清空未完成记录失败")}catch(l){i.errors.push(`清空未完成记录失败: ${l}`)}}if(s){o==null||o({current:0,total:100,stage:"同步到云端",details:"正在同步清空操作...",percentage:75});try{i.syncResult=await s()}catch(l){i.syncResult={success:!1,message:`同步失败: ${l}`}}}i.success=i.errors.length===0,o==null||o({current:100,total:100,stage:"完成",details:i.success?"清空完成":"清空完成，但有部分错误",percentage:100})}catch(l){i.errors.push(`清空过程出错: ${l}`),i.success=!1}return i},jv=({isOpen:t,onClose:e,currentUserId:r,saveRecords:n,refreshRecords:s,clearUserRecords:o,upsertIncompleteRecord:i,clearUserIncompleteRecords:l,onSyncNow:c})=>{const[d,u]=$.useState(Wu),[f,p]=$.useState(!1),[w,g]=$.useState(!1),[v,_]=$.useState(!1),[y,h]=$.useState(null),[m,x]=$.useState(null),k=(E,B)=>{u(I=>({...I,[E]:B}))},b=(E,B,I)=>{u(re=>{const he=re[E];return I?{...re,[E]:[...he,B]}:{...re,[E]:he.filter(oe=>oe!==B)}})},S=async()=>{if(!r){alert("请先登录用户");return}if(d.problemTypes.length===0||d.difficulties.length===0){alert("请至少选择一种题型和难度");return}g(!0),h(null),x(null);try{const E=await kv(r,d,n,i,c,h);x(E),E.success&&s()}catch(E){console.error("生成测试数据失败:",E),x({success:!1,completedRecords:[],incompleteRecords:[],errors:[`生成失败: ${E}`],totalGenerated:0})}finally{g(!1),h(null)}},C=async E=>{if(!r){alert("请先登录用户");return}const B={completed:"确定要清空所有已完成记录吗？",incomplete:"确定要清空所有未完成记录吗？",both:"确定要清空所有记录吗？"}[E];if(confirm(B)){_(!0),h(null),x(null);try{const I=await Sv(r,E,o,l,c,h);x(I),I.success&&s()}catch(I){console.error("清空数据失败:",I),x({success:!1,clearedCompletedCount:0,clearedIncompleteCount:0,errors:[`清空失败: ${I}`]})}finally{_(!1),h(null)}}},R=()=>{u(Wu)};if(!t)return null;const D=[{value:"mental",label:"口算"},{value:"written",label:"笔算"},{value:"mixed",label:"多步复合算式"},{value:"properties",label:"运算律与规则"}],T=[{value:"basic",label:"基础"},{value:"challenge",label:"挑战"}];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Pg,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"测试数据生成器"})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(lr,{className:"w-5 h-5 text-gray-500"})})]}),a.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[a.jsx(Kl,{className:"w-5 h-5 mr-2"}),"基础配置"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"题型"}),a.jsx("div",{className:"space-y-2",children:D.map(E=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:d.problemTypes.includes(E.value),onChange:B=>b("problemTypes",E.value,B.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-900",children:E.label})]},E.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"难度"}),a.jsx("div",{className:"space-y-2",children:T.map(E=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:d.difficulties.includes(E.value),onChange:B=>b("difficulties",E.value,B.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-900",children:E.label})]},E.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"记录类型"}),a.jsxs("select",{value:d.recordType,onChange:E=>k("recordType",E.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[a.jsx("option",{value:"completed",children:"仅已完成记录"}),a.jsx("option",{value:"incomplete",children:"仅未完成记录"}),a.jsx("option",{value:"both",children:"已完成 + 未完成记录"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["每个组合的记录数",a.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(总计: ",d.problemTypes.length*d.difficulties.length*d.recordsPerCombination*(d.recordType==="both"?2:1)," 条)"]})]}),a.jsx("input",{type:"number",min:"1",max:"50",value:d.recordsPerCombination,onChange:E=>k("recordsPerCombination",parseInt(E.target.value)||1),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:()=>p(!f),className:"flex items-center text-sm font-medium text-blue-600 hover:text-blue-700",children:[a.jsx(Kl,{className:"w-4 h-4 mr-1"}),"高级配置 ",f?"▲":"▼"]}),f&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"开始日期"}),a.jsx("input",{type:"date",value:d.dateRange.startDate.toISOString().split("T")[0],onChange:E=>k("dateRange",{...d.dateRange,startDate:new Date(E.target.value)}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"结束日期"}),a.jsx("input",{type:"date",value:d.dateRange.endDate.toISOString().split("T")[0],onChange:E=>k("dateRange",{...d.dateRange,endDate:new Date(E.target.value)}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"正确率范围 (%)"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"number",min:"0",max:"100",value:d.performanceRange.minAccuracy,onChange:E=>k("performanceRange",{...d.performanceRange,minAccuracy:parseInt(E.target.value)||0}),placeholder:"最低",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),a.jsx("span",{className:"self-center",children:"-"}),a.jsx("input",{type:"number",min:"0",max:"100",value:d.performanceRange.maxAccuracy,onChange:E=>k("performanceRange",{...d.performanceRange,maxAccuracy:parseInt(E.target.value)||100}),placeholder:"最高",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"平均答题时间范围 (秒)"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"number",min:"1",max:"300",value:d.performanceRange.minAvgTime,onChange:E=>k("performanceRange",{...d.performanceRange,minAvgTime:parseInt(E.target.value)||1}),placeholder:"最短",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),a.jsx("span",{className:"self-center",children:"-"}),a.jsx("input",{type:"number",min:"1",max:"300",value:d.performanceRange.maxAvgTime,onChange:E=>k("performanceRange",{...d.performanceRange,maxAvgTime:parseInt(E.target.value)||60}),placeholder:"最长",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"分布模式"}),a.jsxs("select",{value:d.distributionPattern,onChange:E=>k("distributionPattern",E.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[a.jsx("option",{value:"daily",children:"按天分布"}),a.jsx("option",{value:"random",children:"随机分布"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:R,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"重置为默认"})})]})]}),y&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"font-medium text-gray-700",children:y.stage}),a.jsxs("span",{className:"text-gray-500",children:[y.percentage,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${y.percentage}%`}})}),a.jsx("p",{className:"text-sm text-gray-600",children:y.details})]}),m&&a.jsxs("div",{className:`p-4 rounded-lg ${m.success?"bg-green-50":"bg-red-50"}`,children:[a.jsxs("div",{className:"flex items-center",children:[m.success?a.jsx(ql,{className:"w-5 h-5 text-green-600 mr-2"}):a.jsx(Yl,{className:"w-5 h-5 text-red-600 mr-2"}),a.jsxs("h4",{className:`font-medium ${m.success?"text-green-800":"text-red-800"}`,children:["操作",m.success?"成功":"失败"]})]}),"totalGenerated"in m&&a.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[a.jsxs("p",{children:["总计生成: ",m.totalGenerated," 条记录"]}),m.completedRecords.length>0&&a.jsxs("p",{children:["已完成记录: ",m.completedRecords.length," 条"]}),m.incompleteRecords.length>0&&a.jsxs("p",{children:["未完成记录: ",m.incompleteRecords.length," 条"]})]}),"clearedCompletedCount"in m&&a.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[m.clearedCompletedCount>0&&a.jsxs("p",{children:["已清空完成记录: ",m.clearedCompletedCount," 类"]}),m.clearedIncompleteCount>0&&a.jsxs("p",{children:["已清空未完成记录: ",m.clearedIncompleteCount," 类"]})]}),m.syncResult&&a.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[m.syncResult.success?a.jsx(ql,{className:"w-4 h-4 text-green-600 mr-1"}):a.jsx(Yl,{className:"w-4 h-4 text-red-600 mr-1"}),a.jsxs("span",{children:["云端同步: ",m.syncResult.message]})]}),m.errors.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"错误详情:"}),a.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:m.errors.map((E,B)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx(Ng,{className:"w-4 h-4 text-red-600 mr-1 mt-0.5 flex-shrink-0"}),E]},B))})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-gray-200",children:[a.jsxs("button",{onClick:S,disabled:w||v,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[w?a.jsx(Bs,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(yf,{className:"w-4 h-4 mr-2"}),"生成测试数据"]}),a.jsxs("button",{onClick:()=>C("completed"),disabled:w||v,className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[v?a.jsx(Bs,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(ao,{className:"w-4 h-4 mr-2"}),"清空已完成"]}),a.jsxs("button",{onClick:()=>C("incomplete"),disabled:w||v,className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[v?a.jsx(Bs,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(ao,{className:"w-4 h-4 mr-2"}),"清空未完成"]}),a.jsxs("button",{onClick:()=>C("both"),disabled:w||v,className:"flex items-center px-4 py-2 bg-red-800 text-white rounded-md hover:bg-red-900 disabled:opacity-50 disabled:cursor-not-allowed",children:[v?a.jsx(Bs,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(ao,{className:"w-4 h-4 mr-2"}),"清空所有记录"]}),c&&a.jsxs("button",{onClick:c,disabled:w||v,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(sc,{className:"w-4 h-4 mr-2"}),"手动同步"]})]})]})})]})})},Nv=({isOpen:t,onClose:e})=>{const{user:r,loading:n,error:s,signIn:o,signUp:i,signOut:l,recentEmails:c}=uc(),[d,u]=$.useState("login"),[f,p]=$.useState(""),[w,g]=$.useState(""),[v,_]=$.useState(""),[y,h]=$.useState(!1);if($.useEffect(()=>{t&&(u("login"),p(""),g(""),_(""))},[t]),$.useEffect(()=>{d==="register"&&/@whosyour\.daddy$/i.test(f)&&p("")},[d,f]),!t)return null;const m=async()=>{(await o(f.trim(),w)).ok&&e()},x=async()=>{const b=await i(f.trim(),w,v.trim());b.ok&&!b.needsVerification&&e()},k=async()=>{(await l()).ok&&e()};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:e}),a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"在线账户"}),a.jsx("button",{className:"text-gray-400 hover:text-gray-600",onClick:e,children:a.jsx(lr,{className:"w-5 h-5"})})]}),r?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-sm text-gray-700",children:["已登录：",r.email]}),c.length>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"切换到其他账号"}),a.jsx("button",{className:"text-xs text-blue-600",onClick:()=>h(b=>!b),children:y?"收起":"展开"})]}),y&&a.jsxs("div",{className:"mt-2 space-y-2",children:[c.map(b=>a.jsx("button",{className:"w-full text-left px-3 py-2 rounded border hover:bg-gray-100 text-sm",onClick:async()=>{await l(),u("login"),p(b),h(!1)},children:b},b)),c.length===0&&a.jsx("div",{className:"text-xs text-gray-500",children:"暂无最近登录账号"})]})]}),a.jsxs("button",{onClick:k,disabled:n,className:"w-full bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded-lg flex items-center justify-center",children:[a.jsx(Mg,{className:"w-4 h-4 mr-2"})," 退出登录"]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex space-x-2 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{className:`flex-1 py-2 rounded-lg ${d==="login"?"bg-white shadow-sm":""}`,onClick:()=>u("login"),children:"登录"}),a.jsx("button",{className:`flex-1 py-2 rounded-lg ${d==="register"?"bg-white shadow-sm":""}`,onClick:()=>u("register"),children:"注册"})]}),d==="register"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"昵称（可选）"}),a.jsx("input",{value:v,onChange:b=>_(b.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"例如：小明"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"邮箱"}),a.jsx("input",{type:"text",name:"fake-user",autoComplete:"username",className:"hidden",value:"",onChange:()=>{}}),a.jsx("input",{type:"password",name:"fake-pass",autoComplete:"new-password",className:"hidden",value:"",onChange:()=>{}}),a.jsx("input",{type:"email",value:f,onChange:b=>p(b.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"you@example.com",autoComplete:"off",name:d==="register"?"reg-email":"login-email",inputMode:"email",autoCorrect:"off",autoCapitalize:"none",spellCheck:!1,onFocus:()=>{/@whosyour\\.daddy$/i.test(f)&&p("")}}),d==="login"&&c&&c.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"最近登录："}),a.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(b=>a.jsx("button",{type:"button",onClick:()=>{p(b),u("login")},className:"text-xs px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 border border-gray-200",children:b},b))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"密码"}),a.jsx("input",{type:"password",value:w,onChange:b=>g(b.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"不少于 6 位",autoComplete:"new-password"})]}),s&&a.jsx("div",{className:"text-sm text-red-600 bg-red-50 rounded-lg p-2",children:s}),d==="login"?a.jsxs("button",{onClick:m,disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center justify-center",children:[a.jsx(Og,{className:"w-4 h-4 mr-2"})," 登录"]}):a.jsxs("button",{onClick:x,disabled:n,className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center justify-center",children:[a.jsx(zg,{className:"w-4 h-4 mr-2"})," 注册"]})]})]})]})};class Cv{constructor(){at(this,"logs",[]);at(this,"networkRequests",[]);at(this,"maxLogs",500);at(this,"sessionId");at(this,"listeners",[]);this.sessionId=`test_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,this.setupNetworkMonitoring(),this.setupConsoleMonitoring()}log(e){const r={...e,timestamp:Date.now(),sessionId:this.sessionId};this.logs.push(r),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.listeners.forEach(n=>n(r)),this.outputToConsole(r)}addListener(e){this.listeners.push(e)}removeListener(e){const r=this.listeners.indexOf(e);r>-1&&this.listeners.splice(r,1)}logNetworkRequest(e){console.log("[testLogger] logNetworkRequest called:",{method:e.method,url:e.url,hasResponse:!!e.response,hasError:!!e.error});const r={...e,timestamp:Date.now()};this.networkRequests.push(r),console.log("[testLogger] Added to networkRequests, total count:",this.networkRequests.length),this.networkRequests.length>100&&(this.networkRequests=this.networkRequests.slice(-100)),this.log({type:"network",level:e.error?"error":"info",message:`${e.method} ${e.url}${e.error?" - ERROR":""}`,data:{request:{method:e.method,url:e.url,headers:e.headers,body:e.body},response:e.response,duration:e.duration,error:e.error}}),console.log("[testLogger] logNetworkRequest completed successfully")}logStateChange(e,r,n,s){this.log({type:"state",level:"debug",message:`${e} 状态变化`,data:{component:e,oldState:r,newState:n,changes:this.getStateChanges(r,n)},userId:s})}logUserAction(e,r,n){this.log({type:"user",level:"info",message:`用户操作: ${e}`,data:{action:e,details:r,userAgent:navigator.userAgent,timestamp:Date.now()},userId:n})}logStorageOperation(e,r,n,s){this.log({type:"storage",level:"debug",message:`存储操作: ${e} ${r}`,data:{operation:e,key:r,value:e==="get"?n:typeof n=="object"?"[Object]":n,storageSize:this.getStorageSize()},userId:s})}logSyncProcess(e,r,n){this.log({type:"sync",level:"info",message:`同步阶段: ${e}`,data:{phase:e,details:r,onlineStatus:navigator.onLine,timestamp:Date.now()},userId:n})}getAllLogs(){return[...this.logs]}getNetworkRequests(){return console.log("[testLogger] getNetworkRequests called, returning",this.networkRequests.length,"requests"),[...this.networkRequests]}getLogsByType(e){return this.logs.filter(r=>r.type===e)}getLogsByTimeRange(e,r){return this.logs.filter(n=>n.timestamp>=e&&n.timestamp<=r)}exportLogs(){const e={sessionId:this.sessionId,timestamp:Date.now(),userAgent:navigator.userAgent,url:window.location.href,logs:this.logs,networkRequests:this.networkRequests,summary:this.generateSummary()};return JSON.stringify(e,null,2)}clearLogs(){this.logs=[],this.networkRequests=[],this.log({type:"sync",level:"info",message:"测试日志已清空",data:{sessionId:this.sessionId}})}generateSummary(){const e=this.getLogsByType("sync"),r=this.getLogsByType("network"),n=this.logs.filter(s=>s.level==="error");return{totalLogs:this.logs.length,logsByType:{sync:e.length,network:r.length,state:this.getLogsByType("state").length,user:this.getLogsByType("user").length,storage:this.getLogsByType("storage").length,error:this.getLogsByType("error").length},errorCount:n.length,networkRequests:{total:this.networkRequests.length,successful:this.networkRequests.filter(s=>{var o;return!s.error&&((o=s.response)==null?void 0:o.status)<400}).length,failed:this.networkRequests.filter(s=>{var o;return s.error||((o=s.response)==null?void 0:o.status)>=400}).length},timeRange:{start:this.logs.length>0?Math.min(...this.logs.map(s=>s.timestamp)):0,end:this.logs.length>0?Math.max(...this.logs.map(s=>s.timestamp)):0}}}setupNetworkMonitoring(){const e=window.fetch;if(window.__testLoggerNetworkMonitored){console.warn("[testLogger] Network monitoring already setup");return}window.__testLoggerNetworkMonitored=!0,console.log("[testLogger] Setting up comprehensive network monitoring (fetch + XHR)"),this.setupXHRMonitoring(),window.fetch=async(...r)=>{const[n,s={}]=r,o=Date.now(),i=typeof n=="string"?n:n.toString();console.log("[testLogger] Intercepted fetch:",{url:i,method:s.method||"GET",hasBody:!!s.body});const l={method:s.method||"GET",url:i,headers:s.headers?this.sanitizeHeaders(s.headers):void 0,body:s.body?this.sanitizeBody(s.body):void 0};try{const c=await e(...r),d=Date.now()-o;console.log("[testLogger] Fetch response:",{url:i,status:c.status,duration:d});let u;try{console.log("[testLogger] Processing response data for:",i);const p=await c.clone().text();console.log("[testLogger] Response text length:",p.length),p.startsWith("{")||p.startsWith("[")?(u=JSON.parse(p),typeof u=="object"&&JSON.stringify(u).length>1e3&&(u="[Large response data - truncated]")):u=p.length>200?`${p.slice(0,200)}...`:p,console.log("[testLogger] Response data processed successfully")}catch(f){console.error("[testLogger] Error processing response data:",f),u="[Response data unavailable]"}console.log("[testLogger] About to log network request:",{url:i,status:c.status,duration:d});try{this.logNetworkRequest({...l,response:{status:c.status,statusText:c.statusText,data:u},duration:d}),console.log("[testLogger] Network request logged successfully")}catch(f){console.error("[testLogger] Failed to log network request:",f)}return c}catch(c){const d=Date.now()-o,u=c instanceof Error?c.message:"Unknown error";console.error("[testLogger] Fetch error:",{url:i,error:u,duration:d}),console.log("[testLogger] About to log network error:",{url:i,error:u,duration:d});try{this.logNetworkRequest({...l,duration:d,error:u}),console.log("[testLogger] Network error logged successfully")}catch(f){console.error("[testLogger] Failed to log network error:",f)}throw c}}}setupXHRMonitoring(){const e=window.XMLHttpRequest,r=this;console.log("[testLogger] Setting up XMLHttpRequest monitoring"),window.XMLHttpRequest=function(){const n=new e,s=n.open,o=n.send;let i={};return n.open=function(l,c,...d){return i={method:l.toUpperCase(),url:c.toString(),startTime:Date.now()},console.log("[testLogger] XHR Open:",i),s.apply(this,[l,c,...d])},n.send=function(l){return i.body=l,console.log("[testLogger] XHR Send:",{url:i.url,method:i.method,hasBody:!!l}),n.addEventListener("loadend",()=>{const c=Date.now()-i.startTime;console.log("[testLogger] XHR Response:",{url:i.url,status:n.status,duration:c});let d;try{if(n.responseType===""||n.responseType==="text"){const u=n.responseText;u&&(u.startsWith("{")||u.startsWith("["))?(d=JSON.parse(u),typeof d=="object"&&JSON.stringify(d).length>1e3&&(d="[Large response data - truncated]")):d=(u==null?void 0:u.length)>200?`${u.slice(0,200)}...`:u}else d="[Non-text response]"}catch{d="[Response parsing failed]"}r.logNetworkRequest({method:i.method,url:i.url,headers:r.getXHRHeaders(n),body:i.body,response:{status:n.status,statusText:n.statusText,data:d},duration:c,error:n.status>=400?`HTTP ${n.status}`:void 0})}),o.apply(this,[l])},n}}getXHRHeaders(e){const r={};try{const n=e.getAllResponseHeaders();n&&n.split(`\r
`).forEach(s=>{const[o,i]=s.split(": ");o&&i&&(r[o]=i)})}catch{}return r}sanitizeHeaders(e){if(!e)return{};const r={};return e instanceof Headers?e.forEach((n,s)=>{s.toLowerCase().includes("authorization")?r[s]="Bearer [REDACTED]":r[s]=n}):typeof e=="object"&&Object.entries(e).forEach(([n,s])=>{n.toLowerCase().includes("authorization")?r[n]="Bearer [REDACTED]":r[n]=String(s)}),r}sanitizeBody(e){if(e)try{if(typeof e=="string"){const r=JSON.parse(e);return r.password&&(r.password="[REDACTED]"),r}else{if(e instanceof FormData)return"[FormData]";if(e instanceof Blob)return"[Blob]";{const r={...e};return r.password&&(r.password="[REDACTED]"),r}}}catch{return"[Unable to parse body]"}}setupConsoleMonitoring(){const e={log:console.log,warn:console.warn,error:console.error,info:console.info};console.error=(...r)=>{e.error(...r),this.log({type:"error",level:"error",message:"Console Error: "+r.map(n=>typeof n=="object"?JSON.stringify(n):String(n)).join(" "),data:r,stackTrace:new Error().stack})},console.warn=(...r)=>{e.warn(...r),this.log({type:"error",level:"warn",message:"Console Warning: "+r.map(n=>typeof n=="object"?JSON.stringify(n):String(n)).join(" "),data:r})}}outputToConsole(e){if(typeof window<"u"&&window.location.hostname==="localhost"&&(e.level==="error"||e.level==="warn")){const r=new Date(e.timestamp).toLocaleTimeString(),n=`[TEST-${e.type.toUpperCase()}] ${r}`;switch(e.level){case"error":console.error(`%c${n}%c ${e.message}`,"color: red; font-weight: bold","color: red",e.data);break;case"warn":console.warn(`%c${n}%c ${e.message}`,"color: orange; font-weight: bold","color: orange",e.data);break}}}getStateChanges(e,r){if(typeof e!="object"||typeof r!="object")return{old:e,new:r};const n={},s=new Set([...Object.keys(e||{}),...Object.keys(r||{})]);for(const o of s)e[o]!==r[o]&&(n[o]={old:e[o],new:r[o]});return n}getStorageSize(){let e=0;for(const r in localStorage)localStorage.hasOwnProperty(r)&&(e+=localStorage[r].length);return e}}const Te=new Cv,_t=(t,e,r)=>{Te.logSyncProcess(t,e,r)},$v=(t,e,r,n)=>{Te.logStorageOperation(t,e,r,n)},Ev=({isOpen:t,onClose:e})=>{const[r,n]=$.useState([]),[s,o]=$.useState([]),[i,l]=$.useState("logs"),[c,d]=$.useState(!0),[u,f]=$.useState("all"),[p,w]=$.useState("all"),[g,v]=$.useState(!1),_=$.useRef(null);if($.useEffect(()=>{if(!t)return;n(Te.getAllLogs()),o(Te.getNetworkRequests());const T=B=>{n(I=>[...I.slice(-499),B])};Te.addListener(T);const E=setInterval(()=>{o(Te.getNetworkRequests())},1e3);return()=>{Te.removeListener(T),clearInterval(E)}},[t]),$.useEffect(()=>{c&&_.current&&_.current.scrollIntoView({behavior:"smooth"})},[r,c]),!t)return null;const y=r.filter(T=>!(u!=="all"&&T.type!==u||p!=="all"&&T.level!==p)),h=()=>{const T=Te.exportLogs(),E=new Blob([T],{type:"application/json"}),B=URL.createObjectURL(E),I=document.createElement("a");I.href=B,I.download=`test-logs-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,I.click(),URL.revokeObjectURL(B)},m=()=>{const T=Te.exportLogs();navigator.clipboard.writeText(T).then(()=>{alert("日志已复制到剪贴板")})},x=()=>{confirm("确定要清空所有测试日志吗？")&&(Te.clearLogs(),n([]),o([]))},k=T=>new Date(T).toLocaleTimeString(),b=T=>{switch(T){case"error":return"text-red-600 bg-red-50";case"warn":return"text-yellow-600 bg-yellow-50";case"info":return"text-blue-600 bg-blue-50";case"debug":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},S=T=>{switch(T){case"sync":return"text-green-600 bg-green-100";case"network":return"text-purple-600 bg-purple-100";case"state":return"text-indigo-600 bg-indigo-100";case"user":return"text-blue-600 bg-blue-100";case"storage":return"text-orange-600 bg-orange-100";case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},C=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-100 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ag,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"过滤:"})]}),a.jsxs("select",{value:u,onChange:T=>f(T.target.value),className:"px-2 py-1 text-sm border rounded",children:[a.jsx("option",{value:"all",children:"所有类型"}),a.jsx("option",{value:"sync",children:"同步"}),a.jsx("option",{value:"network",children:"网络"}),a.jsx("option",{value:"state",children:"状态"}),a.jsx("option",{value:"user",children:"用户"}),a.jsx("option",{value:"storage",children:"存储"}),a.jsx("option",{value:"error",children:"错误"})]}),a.jsxs("select",{value:p,onChange:T=>w(T.target.value),className:"px-2 py-1 text-sm border rounded",children:[a.jsx("option",{value:"all",children:"所有级别"}),a.jsx("option",{value:"debug",children:"调试"}),a.jsx("option",{value:"info",children:"信息"}),a.jsx("option",{value:"warn",children:"警告"}),a.jsx("option",{value:"error",children:"错误"})]}),a.jsxs("button",{onClick:()=>d(!c),className:`flex items-center gap-1 px-2 py-1 text-sm rounded ${c?"bg-blue-100 text-blue-700":"bg-gray-200 text-gray-600"}`,children:[c?a.jsx(ju,{className:"w-3 h-3"}):a.jsx(Su,{className:"w-3 h-3"}),"自动滚动"]})]}),a.jsxs("div",{className:"bg-black text-green-400 p-4 rounded-lg max-h-96 overflow-y-auto font-mono text-xs",children:[y.map((T,E)=>a.jsxs("div",{className:"mb-2 border-b border-gray-700 pb-2",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-gray-500",children:k(T.timestamp)}),a.jsx("span",{className:`px-1 rounded text-xs ${b(T.level)}`,children:T.level.toUpperCase()}),a.jsx("span",{className:`px-1 rounded text-xs ${S(T.type)}`,children:T.type}),a.jsx("span",{className:"flex-1",children:T.message})]}),T.data&&a.jsx("pre",{className:"text-xs text-gray-400 mt-1 ml-16 overflow-x-auto",children:JSON.stringify(T.data,null,2)}),T.userId&&a.jsxs("div",{className:"text-xs text-blue-400 mt-1 ml-16",children:["User: ",T.userId]})]},E)),a.jsx("div",{ref:_})]})]}),R=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[a.jsx("h4",{className:"font-medium mb-2",children:"网络请求统计"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:["总请求: ",s.length]}),a.jsxs("div",{className:"text-green-600",children:["成功: ",s.filter(T=>{var E;return!T.error&&(((E=T.response)==null?void 0:E.status)||0)<400}).length]}),a.jsxs("div",{className:"text-red-600",children:["失败: ",s.filter(T=>{var E;return T.error||(((E=T.response)==null?void 0:E.status)||0)>=400}).length]})]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:s.map((T,E)=>{var B,I;return a.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${T.error||(((B=T.response)==null?void 0:B.status)||0)>=400?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:T.method}),a.jsx("span",{className:"text-sm font-medium",children:T.url})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[k(T.timestamp),T.duration&&` (${T.duration}ms)`]})]}),T.response&&a.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["状态: ",T.response.status," ",T.response.statusText]}),T.error&&a.jsxs("div",{className:"text-sm text-red-600 mb-1",children:["错误: ",T.error]}),T.body&&a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"请求体"}),a.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-1 overflow-x-auto",children:typeof T.body=="string"?T.body:JSON.stringify(T.body,null,2)})]}),((I=T.response)==null?void 0:I.data)&&a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"响应数据"}),a.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-1 overflow-x-auto",children:typeof T.response.data=="string"?T.response.data:JSON.stringify(T.response.data,null,2)})]})]},E)})})]}),D=()=>{const T=Te.generateSummary();return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"日志统计"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{children:["总日志数: ",T.totalLogs]}),a.jsxs("div",{children:["错误数: ",T.errorCount]}),a.jsxs("div",{children:["同步日志: ",T.logsByType.sync]}),a.jsxs("div",{children:["网络日志: ",T.logsByType.network]})]})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"网络统计"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{children:["总请求: ",T.networkRequests.total]}),a.jsxs("div",{children:["成功: ",T.networkRequests.successful]}),a.jsxs("div",{children:["失败: ",T.networkRequests.failed]}),a.jsxs("div",{children:["成功率: ",T.networkRequests.total>0?Math.round(T.networkRequests.successful/T.networkRequests.total*100):0,"%"]})]})]})]}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"测试会话信息"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{children:["会话ID: ",Te.sessionId]}),a.jsxs("div",{children:["开始时间: ",T.timeRange.start?new Date(T.timeRange.start).toLocaleString():"N/A"]}),a.jsxs("div",{children:["结束时间: ",T.timeRange.end?new Date(T.timeRange.end).toLocaleString():"N/A"]}),a.jsxs("div",{children:["用户代理: ",navigator.userAgent]})]})]})]})};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:e}),a.jsxs("div",{className:`relative bg-white rounded-2xl shadow-2xl mx-4 transition-all duration-300 ${g?"w-80 h-20":"w-full max-w-6xl h-[80vh]"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ku,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"测试面板"}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",y.length," 条日志)"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>v(!g),className:"p-1 hover:bg-gray-100 rounded",title:g?"展开":"最小化",children:g?a.jsx(ju,{className:"w-4 h-4"}):a.jsx(Su,{className:"w-4 h-4"})}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:"✕"})]})]}),!g&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex border-b",children:[{id:"logs",label:"日志",icon:mf},{id:"network",label:"网络",icon:sc},{id:"summary",label:"摘要",icon:ku}].map(({id:T,label:E,icon:B})=>a.jsxs("button",{onClick:()=>l(T),className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${i===T?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-600 hover:text-gray-800"}`,children:[a.jsx(B,{className:"w-4 h-4"}),E]},T))}),a.jsxs("div",{className:"p-4 overflow-hidden",children:[i==="logs"&&C(),i==="network"&&R(),i==="summary"&&D()]}),a.jsxs("div",{className:"absolute bottom-4 right-4 flex gap-2",children:[a.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",title:"复制日志到剪贴板",children:[a.jsx(Rg,{className:"w-4 h-4"}),"复制"]}),a.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:[a.jsx(pf,{className:"w-4 h-4"}),"导出"]}),a.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:[a.jsx(ao,{className:"w-4 h-4"}),"清空"]})]})]})]})]})},Tv=({isOpen:t,onClose:e,isOnline:r,onlineUserId:n})=>{const[s,o]=$.useState([{id:"online-sync",name:"TC-S01: 在线记录同步",description:"测试完成/未完成题目的实时同步",status:"pending",logs:[]},{id:"multi-device",name:"TC-S02: 多设备同步",description:"测试不同设备间的数据同步",status:"pending",logs:[]},{id:"offline-sync",name:"TC-S03: 离线状态同步",description:"测试离线记录的自动同步",status:"pending",logs:[]},{id:"clear-records",name:"TC-S04: 清除记录同步",description:"测试本机清除对云端的影响",status:"pending",logs:[]}]),[i,l]=$.useState("online-sync"),[c,d]=$.useState(!0);$.useEffect(()=>{if(!c)return;const h=setInterval(()=>{u()},1e3);return()=>clearInterval(h)},[c]);const u=()=>{const m=Te.getAllLogs().filter(x=>Date.now()-x.timestamp<3e5);o(x=>x.map(k=>{const b=f(k.id,m);let S=k.status;if(b.length>0){const C=b.some(D=>D.level==="error"),R=b.some(D=>D.message.includes("flush_success")||D.message.includes("sync_complete")||D.message.includes("合并服务端记录完成"));C?S="failed":R?S="passed":b.some(D=>D.message.includes("开始")||D.message.includes("start"))&&(S="running")}return{...k,status:S,logs:b.map(C=>p(C)),lastRun:b.length>0?Math.max(...b.map(C=>C.timestamp)):k.lastRun}}))},f=(h,m)=>{switch(h){case"online-sync":return m.filter(x=>x.type==="sync"&&(x.message.includes("enqueue")||x.message.includes("flush")||x.message.includes("完成题目")||x.message.includes("未完成")));case"multi-device":return m.filter(x=>x.type==="sync"&&(x.message.includes("拉取")||x.message.includes("pull")||x.message.includes("合并")||x.message.includes("merge")));case"offline-sync":return m.filter(x=>x.type==="sync"&&(x.message.includes("offline")||x.message.includes("离线")||x.message.includes("网络")||x.message.includes("queue")));case"clear-records":return m.filter(x=>x.type==="storage"&&(x.message.includes("clear")||x.message.includes("remove")||x.message.includes("清除")||x.message.includes("恢复")));default:return[]}},p=h=>{const m=new Date(h.timestamp).toLocaleTimeString(),x=h.level.toUpperCase();return`[${m}] ${x}: ${h.message}`},w=h=>{switch(h){case"passed":return a.jsx(ql,{className:"w-4 h-4 text-green-500"});case"failed":return a.jsx(Yl,{className:"w-4 h-4 text-red-500"});case"running":return a.jsx(Xt,{className:"w-4 h-4 text-yellow-500 animate-spin"});default:return a.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300"})}},g=h=>{switch(h){case"passed":return"bg-green-50 border-green-200";case"failed":return"bg-red-50 border-red-200";case"running":return"bg-yellow-50 border-yellow-200";default:return"bg-gray-50 border-gray-200"}},v=()=>{const h={testSession:{timestamp:Date.now(),userId:n,networkStatus:r?"online":"offline"},scenarios:s.map(b=>({...b,logs:b.logs})),rawLogs:Te.getAllLogs(),summary:{total:s.length,passed:s.filter(b=>b.status==="passed").length,failed:s.filter(b=>b.status==="failed").length,pending:s.filter(b=>b.status==="pending").length}},m=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),x=URL.createObjectURL(m),k=document.createElement("a");k.href=x,k.download=`sync-test-report-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,k.click(),URL.revokeObjectURL(x)},_=h=>{o(m=>m.map(x=>x.id===h?{...x,status:"pending",logs:[],lastRun:void 0}:x))},y=s.find(h=>h.id===i);return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-5/6 flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"同步功能测试面板"}),a.jsx("div",{className:"flex items-center gap-2",children:r?a.jsxs(a.Fragment,{children:[a.jsx(Hg,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"text-sm text-green-600",children:"在线"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Bg,{className:"w-4 h-4 text-red-500"}),a.jsx("span",{className:"text-sm text-red-600",children:"离线"})]})}),n&&a.jsxs("span",{className:"text-sm text-gray-500",children:["用户: ",n]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:c,onChange:h=>d(h.target.checked),className:"rounded"}),"自动刷新"]}),a.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded",title:"手动刷新",children:a.jsx(sc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded",title:"导出测试报告",children:a.jsx(pf,{className:"w-4 h-4"})}),a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"关闭"})]})]}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[a.jsx("div",{className:"w-1/3 border-r bg-gray-50 overflow-y-auto",children:a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-medium mb-3",children:"测试场景"}),a.jsx("div",{className:"space-y-2",children:s.map(h=>a.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${i===h.id?"border-blue-300 bg-blue-50":g(h.status)}`,onClick:()=>l(h.id),children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"font-medium text-sm",children:h.name}),w(h.status)]}),a.jsx("p",{className:"text-xs text-gray-600",children:h.description}),a.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[a.jsxs("span",{children:["日志: ",h.logs.length," 条"]}),h.lastRun&&a.jsx("span",{children:new Date(h.lastRun).toLocaleTimeString()})]})]},h.id))})]})}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:y==null?void 0:y.name}),a.jsx("p",{className:"text-sm text-gray-600",children:y==null?void 0:y.description})]}),a.jsx("button",{onClick:()=>_(i),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"重置"})]})}),a.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:a.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded font-mono text-sm h-full overflow-y-auto",children:(y==null?void 0:y.logs.length)===0?a.jsx("div",{className:"text-gray-500 text-center py-8",children:"暂无日志，开始测试后日志将自动显示在这里"}):a.jsx("div",{className:"space-y-1",children:y==null?void 0:y.logs.map((h,m)=>a.jsx("div",{className:"whitespace-pre-wrap",children:h},m))})})})]})]}),a.jsx("div",{className:"border-t p-4 bg-gray-50",children:a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"测试提示:"}),a.jsxs("div",{className:"mt-1",children:[i==="online-sync"&&"请完成几道题目，观察同步日志。包括完成整套题目和中途退出的情况。",i==="multi-device"&&"在另一个浏览器窗口登录相同账户，做题后回到此处观察数据同步。",i==="offline-sync"&&"断开网络连接做题，然后重新连接网络观察自动同步过程。",i==="clear-records"&&"使用开发者工具清除本地记录，然后重新登录验证云端数据恢复。"]})]})})]})}):null};async function Rv(t,e){const r={...e,user_id:t},{data:n,error:s}=await Pe.from("history_records").upsert(r,{onConflict:"user_id,client_id"}).select("*").single();if(s)throw s;return n}async function Pv(t){const{data:e,error:r}=await Pe.from("history_records").select("*").eq("user_id",t).order("date",{ascending:!1});if(r)throw r;return e??[]}async function Av(t){return Pv(t)}async function Dv(t,e){const r={...e,user_id:t},{data:n,error:s}=await Pe.from("incomplete_history_records").upsert(r,{onConflict:"user_id,client_id"}).select("*").single();if(s)throw s;return n}async function Ov(t){const{data:e,error:r}=await Pe.from("incomplete_history_records").select("*").eq("user_id",t).order("date",{ascending:!1});if(r)throw r;return e??[]}async function Mv(t,e){const{error:r}=await Pe.from("incomplete_history_records").delete().eq("user_id",t).eq("client_id",e);if(r)throw r;console.log(`[deleteIncompleteHistoryRecord] 已删除云端未完成记录: ${e}`)}class Lv{constructor(){at(this,"logs",[]);at(this,"metrics",{totalSyncAttempts:0,successfulSyncs:0,failedSyncs:0,averageSyncDuration:0,lastSyncTimestamp:0,networkErrors:0,dataConflicts:0,timeoutErrors:0});at(this,"maxLogs",1e3);at(this,"storageKey","errorLogs");at(this,"metricsKey","syncMetrics");this.loadFromStorage()}log(e){const r={...e,timestamp:Date.now(),userAgent:navigator.userAgent,url:window.location.href};this.logs.push(r),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.saveToStorage(),e.level==="critical"&&this.reportCriticalError(r)}recordSyncAttempt(e,r,n){this.metrics.totalSyncAttempts++,this.metrics.lastSyncTimestamp=Date.now(),e?this.metrics.successfulSyncs++:(this.metrics.failedSyncs++,n!=null&&n.includes("网络")||n!=null&&n.includes("network")?this.metrics.networkErrors++:n!=null&&n.includes("超时")||n!=null&&n.includes("timeout")?this.metrics.timeoutErrors++:(n!=null&&n.includes("冲突")||n!=null&&n.includes("conflict"))&&this.metrics.dataConflicts++);const s=this.metrics.successfulSyncs+this.metrics.failedSyncs;s>0&&(this.metrics.averageSyncDuration=(this.metrics.averageSyncDuration*(s-1)+r)/s),this.saveMetricsToStorage()}getErrorStats(){const e={},r={};this.logs.forEach(o=>{e[o.level]=(e[o.level]||0)+1,r[o.category]=(r[o.category]||0)+1});const n=Date.now()-24*60*60*1e3,s=this.logs.filter(o=>o.timestamp>n);return{total:this.logs.length,byLevel:e,byCategory:r,recent:s}}getSyncMetrics(){return{...this.metrics}}getHealthScore(){const e=[];let r=100;if(this.metrics.totalSyncAttempts>0){const i=this.metrics.successfulSyncs/this.metrics.totalSyncAttempts;i<.5?(r-=30,e.push("同步成功率过低")):i<.8&&(r-=15,e.push("同步成功率较低"))}this.metrics.networkErrors>this.metrics.totalSyncAttempts*.3&&(r-=20,e.push("网络错误频繁")),this.metrics.dataConflicts>0&&(r-=15,e.push("存在数据冲突")),this.metrics.timeoutErrors>this.metrics.totalSyncAttempts*.2&&(r-=20,e.push("超时错误较多"));const s=this.getErrorStats().recent.filter(i=>i.level==="critical").length;s>0&&(r-=25,e.push(`发现 ${s} 个严重错误`));let o;return r>=90?o="excellent":r>=70?o="good":r>=50?o="warning":o="critical",{score:Math.max(0,r),status:o,issues:e}}cleanup(e=7){const r=Date.now()-e*24*60*60*1e3;this.logs=this.logs.filter(n=>n.timestamp>r),this.saveToStorage()}exportLogs(){return JSON.stringify({logs:this.logs,metrics:this.metrics,exportTime:Date.now(),version:"1.0"},null,2)}loadFromStorage(){try{const e=localStorage.getItem(this.storageKey);e&&(this.logs=JSON.parse(e));const r=localStorage.getItem(this.metricsKey);r&&(this.metrics={...this.metrics,...JSON.parse(r)})}catch(e){console.warn("Failed to load error logs from storage:",e)}}saveToStorage(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.logs))}catch(e){console.warn("Failed to save error logs to storage:",e)}}saveMetricsToStorage(){try{localStorage.setItem(this.metricsKey,JSON.stringify(this.metrics))}catch(e){console.warn("Failed to save sync metrics to storage:",e)}}reportCriticalError(e){console.error("Critical error detected:",e)}}const et=new Lv,Br=(t,e,r,n)=>{et.log({level:"error",category:"sync",message:t,details:e,userId:r,clientId:n,stackTrace:new Error().stack})},Iv=(t,e)=>{et.log({level:"error",category:"network",message:t,details:e,stackTrace:new Error().stack})},Uv=(t,e,r,n)=>{et.log({level:"warn",category:"database",message:t,details:e,userId:r,clientId:n})},zv=(t,e,r)=>{et.log({level:"info",category:"sync",message:t,details:{...r,duration:e}}),et.recordSyncAttempt(!0,e)},Ji=(t,e,r,n)=>{et.log({level:"error",category:"sync",message:t,details:{...n,duration:e,errorType:r}}),et.recordSyncAttempt(!1,e,r)},Gi=3e4,Ks=3,Fv=1e3,Qu=50;function Io(t){return`sync_outbox_${t}`}function Js(t){try{const e=localStorage.getItem(Io(t));return e?JSON.parse(e):[]}catch{return[]}}function Qi(t,e){const r=Io(t);if(!e||e.length===0){localStorage.removeItem(r);return}const n=e.length>Qu?e.slice(e.length-Qu):e;localStorage.setItem(r,JSON.stringify(n))}function Bv(t){const[e,r]=$.useState(!1),[n,s]=$.useState(null),[o,i]=$.useState(null),l=typeof navigator<"u"?navigator.onLine:!0,c=hf(),d=$.useRef(null),u=$.useRef(null),f=$.useRef(!0),p=$.useRef(null);$.useEffect(()=>(f.current=!0,()=>{f.current=!1,d.current&&clearTimeout(d.current),u.current&&clearTimeout(u.current)}),[]);const w=$.useCallback(m=>{if(console.log("[sync] enqueueRecord 调用:",{onlineUserId:t,clientId:m==null?void 0:m.client_id,payloadKeys:Object.keys(m||{})}),!t){console.warn("[sync] enqueueRecord: 无在线用户ID"),_t("enqueue_skip",{reason:"no_user_id"},t||void 0);return}_t("enqueue_start",{client_id:m.client_id},t);const x=Js(t);if(console.log("[sync] 当前队列状态:",{queueLength:x.length,outboxKey:Io(t),existingItems:x.map(b=>b.client_id)}),x.some(b=>b.client_id===m.client_id)){console.warn("[sync] 记录已存在队列中:",m.client_id),_t("enqueue_duplicate",{client_id:m.client_id},t);return}x.push({client_id:m.client_id,payload:m,retry:0}),Qi(t,x),console.log("[sync] 记录已入队:",{clientId:m.client_id,newQueueLength:x.length}),$v("set",`sync_outbox_${t}`,{count:x.length},t),_t("enqueue_success",{client_id:m.client_id,queue_length:x.length,payload_size:JSON.stringify(m).length},t)},[t]),g=$.useCallback(m=>{if(!t||!Array.isArray(m)||m.length===0)return 0;let x=0;const k=Js(t);for(const b of m)k.some(S=>S.client_id===b.client_id)||(k.push({client_id:b.client_id,payload:b,retry:0}),x+=1);return Qi(t,k),x},[t]),v=$.useCallback(async()=>{if(!t||e||!l)return _t("flush_skip",{onlineUserId:!!t,syncing:e,isOnline:l},t||void 0),{success:!1,message:t?e?"正在同步中":"网络未连接":"未登录在线账户"};const m=Date.now();_t("flush_start",{userId:t,timestamp:m,networkStatus:navigator.onLine},t),i(null),r(!0);const x=new Promise((k,b)=>{u.current=setTimeout(()=>{_t("flush_timeout",{userId:t,duration:Gi},t),b(new Error("同步操作超时"))},Gi)});try{await Promise.race([_(t,c),x]);const k=Date.now()-m;return f.current&&(s(Date.now()),i(null)),_t("flush_success",{userId:t,duration:k,timestamp:Date.now()},t),zv("同步操作成功完成",k,{userId:t,timestamp:Date.now()}),{success:!0,message:"同步成功完成"}}catch(k){const b=Date.now()-m,S=k instanceof Error?k.message:"同步失败";return f.current&&i(S),k instanceof Error&&(k.message.includes("超时")||k.message.includes("timeout")?Ji("同步操作超时",b,"超时错误",{userId:t,timeout:Gi,error:S}):k.message.includes("fetch")||k.message.includes("network")?(Iv(`网络同步失败: ${S}`,{userId:t,duration:b,error:S}),Ji("网络同步失败",b,"网络错误",{userId:t,error:S})):(Br(`同步操作失败: ${S}`,{userId:t,duration:b,error:S,stackTrace:k.stack}),Ji("同步操作失败",b,"其他错误",{userId:t,error:S}))),{success:!1,message:S}}finally{u.current&&(clearTimeout(u.current),u.current=null),f.current&&r(!1)}},[t,e,l]);$.useEffect(()=>{if(t&&l&&p.current!==t){console.log("[sync] 用户登录，自动触发初始同步:",t),p.current=t;const m=setTimeout(async()=>{if(f.current)try{r(!0),await _(t,c),s(Date.now()),console.log("[sync] 登录后自动同步完成")}catch(x){console.error("[sync] 登录后自动同步出错:",x),i(x instanceof Error?x.message:"同步失败")}finally{f.current&&r(!1)}},1500);return()=>clearTimeout(m)}},[t,l]),$.useEffect(()=>{if(!t||!l)return;console.log("[sync] 启动多设备同步定时器（每10秒检查一次）");const m=setInterval(async()=>{if(!f.current){console.log("[sync] 跳过多设备同步检查（组件已卸载）");return}if(e){console.log("[sync] 跳过多设备同步检查（正在同步中）");return}try{console.log("[sync] 🔄 多设备同步检查开始...",new Date().toLocaleTimeString()),r(!0);const x=await _(t,c);console.log("[sync] ✅ 多设备同步检查完成",{时间:new Date().toLocaleTimeString(),结果:x||"同步成功"})}catch(x){console.error("[sync] ❌ 多设备同步检查失败:",x)}finally{f.current&&r(!1)}},1e4);return()=>{console.log("[sync] 清理多设备同步定时器"),clearInterval(m)}},[t,l]);const _=async(m,x)=>{const k=Js(m);console.log("[sync] syncOperation 开始:",{userId:m,queueLength:k.length,outboxKey:Io(m),queue:k.map(E=>({client_id:E.client_id,retry:E.retry}))}),k.length>0?console.log("[sync] pushing",k.length,"items"):console.log("[sync] 队列为空，跳过push阶段");const b=[];let S=0,C=[],R=[],D=0,T=0;for(const E of k)try{if(E.retry>=Ks){Br("放弃重试项目，已达到最大重试次数",{clientId:E.client_id,retryCount:E.retry,maxRetries:Ks,payload:E.payload},m,E.client_id);continue}console.log(`[sync] upsert payload (重试 ${E.retry}/${Ks}):`,E.client_id),E.payload&&E.payload.planned_total_problems?await Dv(m,E.payload):await Rv(m,E.payload),console.log("[sync] upsert ok for",E.client_id),S++}catch(B){const I=B instanceof Error?B.message:"上传失败";Br("记录上传失败",{clientId:E.client_id,retryCount:E.retry,error:I,payload:E.payload},m,E.client_id),(I.includes("unique")||I.includes("constraint"))&&Uv("数据约束冲突，可能存在重复记录",{clientId:E.client_id,error:I,payload:E.payload},m,E.client_id),E.retry+=1,E.retry<Ks?b.push(E):Br(`彻底放弃重试项目 ${E.client_id}`,{clientId:E.client_id,finalRetryCount:E.retry,lastError:I},m,E.client_id)}Qi(m,b),console.log("[sync] 开始从云端拉取历史记录...");try{if(C=await Av(m),console.log(`[sync] 从云端获取到 ${C.length} 条完成记录`),D=x.mergeServerRecords(C,m),console.log(`[sync] 成功合并 ${D} 条完成记录到本地`),R=await Ov(m),console.log(`[sync] 从云端获取到 ${R.length} 条未完成记录`),T=x.mergeServerIncompleteRecords(R,m),console.log(`[sync] 成功合并 ${T} 条未完成记录到本地`),D>0||T>0){if(console.log("[sync] 🎯 检测到新数据，触发UI刷新",{新完成记录:D,新未完成记录:T}),x.refreshRecords(),typeof window<"u"){const E=new CustomEvent("syncComplete",{detail:{mergedCompletedCount:D,mergedIncompleteCount:T}});window.dispatchEvent(E),console.log("[sync] 📢 已派发syncComplete事件")}}else console.log("[sync] ℹ️ 无新数据需要合并");console.log("[sync] pull completed successfully"),_t("pull_success",{completedRecords:C.length,incompleteRecords:R.length,mergedCompleted:D,mergedIncomplete:T,userId:m},m)}catch(E){const B=E instanceof Error?E.message:"下载失败";return console.error("[sync] pull 阶段失败:",B),Br("从服务器拉取数据失败",{error:B,userId:m},m),_t("pull_failure",{error:B,userId:m},m),{success:!1,error:B,push:{成功:S,失败:k.length-S},pull:{错误:B}}}return console.log(`[sync] 同步完成，成功上传 ${S} 项，队列剩余 ${b.length} 项`),{success:!0,push:{成功:S,失败:k.length-S},pull:{完成记录:C.length,未完成记录:R.length,新合并完成:D,新合并未完成:T}}},y=$.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{f.current&&t&&l&&v()},Fv)},[v,t,l]);$.useEffect(()=>{if(!t)return;const m=()=>{console.log("[sync] 网络连接恢复，准备同步..."),y()},x=async()=>{if(!navigator.onLine)return!1;try{const S=Date.now(),C=await fetch("/",{method:"HEAD",cache:"no-cache",signal:AbortSignal.timeout(5e3)}),R=Date.now()-S,D=C.ok&&R<2e3;return D||console.log(`[sync] 网络质量检测: 较差 (${R}ms)`),D}catch(S){return console.warn("[sync] 网络质量检测失败:",S),!1}},k=async()=>{if(Js(t).length===0)return;await x()?v():console.log("[sync] 网络质量不佳，延迟同步")};window.addEventListener("online",m);const b=setTimeout(k,2e3);return()=>{window.removeEventListener("online",m),clearTimeout(b)}},[t,y,v]);const h=$.useCallback(async m=>{if(!t){console.warn("[sync] 未登录，无法删除云端未完成记录");return}try{await Mv(t,m),console.log(`[sync] 云端未完成记录删除成功: ${m}`)}catch(x){console.error("[sync] 删除云端未完成记录失败:",x),Br("删除云端未完成记录失败",{clientId:m,error:x instanceof Error?x.message:"删除失败"},t,m)}},[t]);return{enqueueRecord:w,enqueueBatch:g,flush:v,deleteIncompleteRecord:h,syncing:e,lastSyncAt:n,lastError:o,getErrorStats:()=>et.getErrorStats(),getSyncMetrics:()=>et.getSyncMetrics(),getHealthScore:()=>et.getHealthScore(),exportLogs:()=>et.exportLogs(),cleanupLogs:m=>et.cleanup(m)}}const Gs={currentProblem:null,problems:[],currentIndex:0,answers:[],answerTimes:[],score:0,totalProblems:0,correctAnswers:0,isActive:!1,isCompleted:!1,sessionId:"",startTime:0,problemStartTimes:[]};function Hv(){var bs,ks,N,M,Z;const[t,e]=$.useState("mental"),[r,n]=$.useState("basic"),[s,o]=Oo("mathSession",Gs),[i,l]=$.useState(!1),[c,d]=$.useState(null),[u,f]=$.useState(""),[p,w]=$.useState(!1),g=kg(),v=hf(),_=v.historyRecords,y=v.incompleteHistoryRecords,[h,m]=$.useState(0);$.useEffect(()=>{const A=()=>{console.log("[App] 🔄 检测到同步完成，强制刷新历史记录UI"),m(F=>F+1),v.refreshRecords()};if(typeof window<"u")return window.addEventListener("syncComplete",A),()=>window.removeEventListener("syncComplete",A)},[v]);const[x,k]=$.useState(!1),[b,S]=$.useState("login"),[C,R]=$.useState("home"),[D,T]=$.useState(null),[E,B]=$.useState(!1),[I,re]=$.useState(!1),[he,oe]=$.useState(!1),[O,U]=$.useState(!1),[H,te]=$.useState(null),z=uc(),we=Bv(((bs=z.user)==null?void 0:bs.id)??null);$.useEffect(()=>{if(!z.user)return;let A=!1;const q=setTimeout(async()=>{if(!A){A=!0,console.log("[App] 🔍 检查本地未上传的未完成记录...");try{const Y=v.incompleteHistoryRecords.filter(X=>X.userId===z.user.id&&!X.synced);if(Y.length===0){console.log("[App] ✅ 没有待上传的未完成记录");return}console.log(`[App] 📤 发现${Y.length}条未上传的未完成记录，开始同步...`);for(const X of Y)try{const lt={client_id:X.sessionId,date:new Date(X.timestamp).toISOString(),problem_type:X.problemType,difficulty:X.difficulty,total_problems:X.totalProblems,correct_answers:X.correctAnswers,accuracy:X.accuracy,total_time:X.totalTime,average_time:X.averageTime,problems:X.problems,answers:X.answers,answer_times:X.answerTimes,score:X.score,planned_total_problems:X.plannedTotalProblems};console.log(`[App] 📤 上传未完成记录: ${X.sessionId}`),we.enqueueRecord(lt),await we.flush(),v.markIncompleteRecordAsSynced(X.sessionId),console.log(`[App] ✅ 未完成记录已上传并标记: ${X.sessionId}`)}catch(lt){console.error(`[App] ❌ 上传未完成记录失败: ${X.sessionId}`,lt)}}catch(W){console.error("[App] ❌ 同步未完成记录过程中发生错误:",W)}}},1500);return()=>{clearTimeout(q)}},[(ks=z.user)==null?void 0:ks.id]),$.useEffect(()=>{C==="history"&&!z.user&&!g.currentUser&&R("home")},[C,z.user,g.currentUser]),$.useEffect(()=>{let A=!0;if(!z.user){te(null);return}return ca(z.user.id).then(F=>{A&&te((F==null?void 0:F.name)||null)}).catch(()=>{A&&te(null)}),()=>{A=!1}},[z.user]),$.useEffect(()=>{var A,F;if(console.log("[App] useEffect triggered:",{isCompleted:s.isCompleted,isRecordSaved:p,sessionId:s.sessionId,currentView:C}),s.isCompleted&&!p){const q=((A=z.user)==null?void 0:A.id)||((F=g.currentUser)==null?void 0:F.id);if(!q){console.warn("No active user found for saving record"),w(!0);return}console.log("[App] 🎯 游戏完成，开始保存记录，sessionId:",s.sessionId);const W=v.saveRecord(s,q);if(s.sessionId&&(v.removeIncompleteBySession(s.sessionId),console.log("[App] 已清理本地未完成记录")),z.user){const X={client_id:s.sessionId||W,date:new Date(s.endTime||Date.now()).toISOString(),problem_type:s.problemType,difficulty:s.difficulty,total_problems:s.totalProblems,correct_answers:s.correctAnswers,accuracy:Math.round(s.correctAnswers/s.totalProblems*100),total_time:s.endTime&&s.startTime?Math.round((s.endTime-s.startTime)/1e3):0,average_time:s.totalProblems>0&&s.endTime&&s.startTime?Math.round((s.endTime-s.startTime)/1e3/s.totalProblems):0,problems:s.problems,answers:s.answers,answer_times:s.answerTimes,score:s.score};console.log("[App] 📤 同步完成记录到云端:",X),we.enqueueRecord(X),we.flush()}w(!0)}},[s.isCompleted,p,v,z.user,g.currentUser,we]);const Qe=()=>{const A=Do(t,r),F=Date.now(),q=`${F}_${Math.random().toString(36).slice(2,8)}`,W={...Gs,problems:A,currentProblem:A[0],totalProblems:A.length,isActive:!0,startTime:F,sessionId:q,problemType:t,difficulty:r,problemStartTimes:[F]};o(W),R("game"),l(!1),d(null),f(""),w(!1)},Ut=A=>{var wt,Ss,dc;if(!s.currentProblem)return;const F=Date.now(),q=s.problemStartTimes[s.currentIndex]||s.startTime,W=Math.round((F-q)/1e3);f(A);let Y=!1;if(s.currentProblem.isMultipleChoice)Y=A===s.currentProblem.correctChoice;else if(s.currentProblem.isDivision){const Ft=A.toString().toLowerCase().trim(),Or=s.currentProblem.answer.toString().toLowerCase().trim();if(s.currentProblem.remainder===0){const fi=(wt=s.currentProblem.quotient)==null?void 0:wt.toString();Y=Ft===Or||Ft===fi}else Y=Ft===Or}else{const Ft=A.toString().toLowerCase().trim(),Or=s.currentProblem.answer.toString().toLowerCase().trim();Y=Ft===Or}d(Y),l(!0);const X=[...s.answers];X[s.currentIndex]=A;const lt=[...s.answerTimes];lt[s.currentIndex]=W;const zt={...s,answers:X,answerTimes:lt,correctAnswers:s.correctAnswers+(Y?1:0),score:s.score+(Y?10:0)};o(zt);{const Ft=((Ss=z.user)==null?void 0:Ss.id)||((dc=g.currentUser)==null?void 0:dc.id);if(Ft){v.upsertIncompleteRecord(zt,Ft);const Or=zt.answers.filter(fi=>fi!==void 0).length;console.log(`[App] 第${Or}题完成，已保存到本地（未完成记录不同步云端，避免重复）`)}}},it=()=>{const A=s.currentIndex+1;if(A>=s.problems.length)o(F=>({...F,isCompleted:!0,isActive:!1,endTime:Date.now()})),R("result");else{const F=Date.now(),q=[...s.problemStartTimes];q[A]=F,o(W=>({...W,currentIndex:A,currentProblem:W.problems[A],problemStartTimes:q})),l(!1),d(null),f("")}},Ye=()=>{var A,F;if(s.isActive&&!s.isCompleted){const q=((A=z.user)==null?void 0:A.id)||((F=g.currentUser)==null?void 0:F.id);if(q&&(v.upsertIncompleteRecord(s,q),z.user)){const W=s.answers.filter(wt=>wt!==void 0).length,Y=s.answerTimes.filter(wt=>typeof wt=="number").reduce((wt,Ss)=>wt+(Ss||0),0),X=W>0?Math.round(Y/W):0,lt=s.sessionId;if(!lt){console.error("[App] sessionId未设置，跳过未完成记录同步");return}const zt={client_id:lt,date:new Date().toISOString(),problem_type:s.problemType,difficulty:s.difficulty,total_problems:W,correct_answers:s.correctAnswers,accuracy:W>0?Math.round(s.correctAnswers/W*100):0,total_time:Y,average_time:X,problems:s.problems,answers:s.answers,answer_times:s.answerTimes,score:s.score,planned_total_problems:s.totalProblems};console.log("[App] 游戏中断，同步未完成记录到云端:",zt),we.enqueueRecord(zt),we.flush()}}o(Gs),l(!1),d(null),f(""),R("home"),T(null),w(!1)},ai=()=>{const A=Do(t,r),F=Date.now(),q=`${F}_${Math.random().toString(36).slice(2,8)}`,W={...Gs,problems:A,currentProblem:A[0],totalProblems:A.length,isActive:!0,startTime:F,sessionId:q,problemType:t,difficulty:r,problemStartTimes:[F]};o(W),R("game"),l(!1),d(null),f(""),w(!1)},vt=A=>{S(A),A==="viewHistory"?(z.user||g.currentUser)&&R("history"):A==="login"?re(!0):k(!0)},pr=()=>{k(!1)},Dr=A=>{const F={currentProblem:null,problems:A.problems,currentIndex:A.totalProblems-1,answers:A.answers,answerTimes:A.answerTimes,score:A.score,totalProblems:A.totalProblems,correctAnswers:A.correctAnswers,isActive:!1,isCompleted:!0,sessionId:`history_${A.id}`,startTime:A.date-A.totalTime*1e3,endTime:A.date,problemType:A.problemType,difficulty:A.difficulty,problemStartTimes:[]};T(A),o(F),R("historyDetail")},ci=()=>{R("history"),T(null)},ui=()=>{R("home")},di=()=>{switch(C){case"game":return s.currentProblem&&a.jsx(Yg,{problem:s.currentProblem,problemIndex:s.currentIndex,totalProblems:s.totalProblems,onAnswer:Ut,onNext:it,showResult:i,isCorrect:c,userAnswer:u});case"result":case"historyDetail":const A=C==="historyDetail"?Qe:ai;return a.jsxs("div",{children:[C==="historyDetail"&&a.jsx("div",{className:"mb-4",children:a.jsx("button",{onClick:ci,className:"flex items-center text-blue-600 hover:text-blue-800 font-medium",children:"← 返回历史记录"})}),a.jsx(Xg,{session:s,onRestart:A,onHome:Ye})]});case"history":if(!z.user&&!g.currentUser)return null;{const F=z.user?{id:z.user.id,name:H||"未命名",createdAt:Date.now(),lastLoginAt:Date.now()}:g.currentUser,q=_.filter(Y=>Y.userId===F.id),W=y.filter(Y=>Y.userId===F.id);return console.log(`[App] 渲染历史记录页面 (refresh: ${h})`,{总完成记录:_.length,用户完成记录:q.length,总未完成记录:y.length,用户未完成记录:W.length}),a.jsx(xv,{user:F,records:q,incompleteRecords:W,onBack:ui,onViewRecord:Dr},`history-${F.id}-${h}-${q.length}-${W.length}`)}default:return a.jsx(Qg,{selectedType:t,selectedDifficulty:r,onTypeChange:e,onDifficultyChange:n,onStartGame:Qe})}},hi=()=>{switch(C){case"result":return"练习完成";case"history":return"历史记录";case"historyDetail":return"记录详情";case"game":return"答题中";default:return"让学习变得更有趣"}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-white text-2xl font-bold",children:"🧮"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"小学数学练习"}),a.jsx("p",{className:"text-sm text-gray-600",children:hi()})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(vv,{userName:z.user?H||z.user.email||"Online User":g.getCurrentUserName(),isLoggedIn:z.user?!0:g.isLoggedIn(),isDeveloper:z.isDeveloper||g.isDeveloper(),onUserAction:vt,onGenerateTestData:()=>B(!0),onShowOnlineAuth:()=>re(!0),onSyncNow:()=>we.flush(),onShowTestPanel:()=>oe(!0),onShowSimplifiedTestPanel:()=>U(!0)}),z.user&&we.lastSyncAt&&a.jsxs("span",{className:"text-xs text-gray-500",children:["上次同步 ",new Date(we.lastSyncAt).toLocaleTimeString("zh-CN",{hour12:!1})]}),C!=="home"&&a.jsxs("button",{onClick:Ye,className:"bg-white hover:bg-gray-50 text-gray-700 font-medium py-2 px-4 rounded-xl border border-gray-200 transition-colors duration-200 flex items-center",children:[a.jsx(gf,{className:"w-4 h-4 mr-2"}),"返回首页"]})]})]}),di(),C==="home"&&a.jsx("div",{className:"text-center mt-12",children:a.jsx("p",{className:"text-gray-500 text-sm",children:"坚持练习，你会越来越棒！ 💪"})}),a.jsx(wv,{isOpen:x,onClose:pr,action:b,users:g.users,onCreateUser:g.createUser,onLoginUser:g.loginUser,currentUser:g.currentUser}),a.jsx(Nv,{isOpen:I,onClose:()=>re(!1)}),a.jsx(jv,{isOpen:E,onClose:()=>B(!1),currentUserId:((N=z.user)==null?void 0:N.id)||((M=g.currentUser)==null?void 0:M.id)||null,saveRecords:v.saveRecords,refreshRecords:v.refreshRecords,clearUserRecords:v.clearUserRecords,upsertIncompleteRecord:v.upsertIncompleteRecord,clearUserIncompleteRecords:v.clearUserIncompleteRecords,onSyncNow:we.flush}),a.jsx(Ev,{isOpen:he,onClose:()=>oe(!1)}),a.jsx(Tv,{isOpen:O,onClose:()=>U(!1),isOnline:navigator.onLine??!0,onlineUserId:((Z=z.user)==null?void 0:Z.id)??null})]})})}console.log("[main] Initializing test logger...");Te.log({type:"state",level:"info",message:"应用启动，测试日志器初始化完成"});df(document.getElementById("root")).render(a.jsx($.StrictMode,{children:a.jsx(Hv,{})}));</script>
    <style rel="stylesheet" crossorigin>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.bottom-2{bottom:.5rem}.bottom-4{bottom:1rem}.right-0{right:0}.right-2{right:.5rem}.right-4{right:1rem}.top-1\/2{top:50%}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:.25rem}.mb-1\.5{margin-bottom:.375rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:.25rem}.ml-16{margin-left:4rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-4{margin-left:1rem}.mr-0\.5{margin-right:.125rem}.mr-1{margin-right:.25rem}.mr-1\.5{margin-right:.375rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-12{margin-top:3rem}.mt-2{margin-top:.5rem}.mt-6{margin-top:1.5rem}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-1{height:.25rem}.h-12{height:3rem}.h-16{height:4rem}.h-2{height:.5rem}.h-20{height:5rem}.h-3{height:.75rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-5\/6{height:83.333333%}.h-6{height:1.5rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-\[80vh\]{height:80vh}.h-full{height:100%}.max-h-60{max-height:15rem}.max-h-64{max-height:16rem}.max-h-96{max-height:24rem}.max-h-\[50vh\]{max-height:50vh}.max-h-\[90vh\]{max-height:90vh}.max-h-\[calc\(90vh-80px\)\]{max-height:calc(90vh - 80px)}.min-h-screen{min-height:100vh}.w-1{width:.25rem}.w-1\/3{width:33.333333%}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:.5rem}.w-24{width:6rem}.w-3{width:.75rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-7{width:1.75rem}.w-8{width:2rem}.w-80{width:20rem}.w-\[95\%\]{width:95%}.w-full{width:100%}.max-w-2xl{max-width:42rem}.max-w-4xl{max-width:56rem}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.max-w-\[120px\]{max-width:120px}.max-w-md{max-width:28rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-7{grid-template-columns:repeat(7,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-x-2{-moz-column-gap:.5rem;column-gap:.5rem}.gap-x-4{-moz-column-gap:1rem;column-gap:1rem}.gap-y-2{row-gap:.5rem}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-3xl{border-radius:1.5rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-700{--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.border-green-200{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1))}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.border-yellow-200{--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/30{background-color:#0000004d}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-200{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-current{background-color:currentColor}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-500{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-indigo-100{--tw-bg-opacity: 1;background-color:rgb(224 231 255 / var(--tw-bg-opacity, 1))}.bg-indigo-50{--tw-bg-opacity: 1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.bg-orange-100{--tw-bg-opacity: 1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.bg-orange-500{--tw-bg-opacity: 1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.bg-orange-600{--tw-bg-opacity: 1;background-color:rgb(234 88 12 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-50{--tw-bg-opacity: 1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-purple-500{--tw-bg-opacity: 1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-red-800{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-opacity-20{--tw-bg-opacity: .2}.bg-opacity-50{--tw-bg-opacity: .5}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-blue-50{--tw-gradient-from: #eff6ff var(--tw-gradient-from-position);--tw-gradient-to: rgb(239 246 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500{--tw-gradient-from: #3b82f6 var(--tw-gradient-from-position);--tw-gradient-to: rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-purple-50{--tw-gradient-to: rgb(250 245 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #faf5ff var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-pink-50{--tw-gradient-to: #fdf2f8 var(--tw-gradient-to-position)}.to-purple-600{--tw-gradient-to: #9333ea var(--tw-gradient-to-position)}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:.5rem}.pr-2{padding-right:.5rem}.pr-8{padding-right:2rem}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-6xl{font-size:3.75rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.capitalize{text-transform:capitalize}.leading-relaxed{line-height:1.625}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-indigo-600{--tw-text-opacity: 1;color:rgb(79 70 229 / var(--tw-text-opacity, 1))}.text-indigo-700{--tw-text-opacity: 1;color:rgb(67 56 202 / var(--tw-text-opacity, 1))}.text-indigo-800{--tw-text-opacity: 1;color:rgb(55 48 163 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-orange-700{--tw-text-opacity: 1;color:rgb(194 65 12 / var(--tw-text-opacity, 1))}.text-purple-500{--tw-text-opacity: 1;color:rgb(168 85 247 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity: 1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity: 1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.text-opacity-90{--tw-text-opacity: .9}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.opacity-40{opacity:.4}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.last\:border-b-0:last-child{border-bottom-width:0px}.hover\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-gray-200:hover{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.hover\:border-gray-300:hover{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hover\:border-gray-400:hover{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity, 1))}.hover\:bg-blue-200:hover{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-50:hover{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-600:hover{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-800:hover{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\:bg-orange-700:hover{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-red-900:hover{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity, 1))}.hover\:from-blue-600:hover{--tw-gradient-from: #2563eb var(--tw-gradient-from-position);--tw-gradient-to: rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:to-purple-700:hover{--tw-gradient-to: #7e22ce var(--tw-gradient-to-position)}.hover\:text-blue-700:hover{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.hover\:text-blue-800:hover{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.hover\:text-gray-600:hover{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\:text-gray-800:hover{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.hover\:opacity-10:hover{opacity:.1}.hover\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\:border-blue-500:focus{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:bg-gray-300:disabled{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.disabled\:opacity-50:disabled{opacity:.5}.disabled\:hover\:scale-100:hover:disabled{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@media (min-width: 640px){.sm\:w-\[90\%\]{width:90%}.sm\:max-w-xs{max-width:20rem}.sm\:flex-row{flex-direction:row}.sm\:p-6{padding:1.5rem}.sm\:p-8{padding:2rem}}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:text-4xl{font-size:2.25rem;line-height:2.5rem}}@media (min-width: 1024px){.lg\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}</style>
  <link rel="manifest" href="./manifest.webmanifest"></head>
  <body>
    <div id="root"></div>
  </body>
</html>
